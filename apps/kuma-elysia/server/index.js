// @bun
var Az=Object.create;var{getPrototypeOf:wz,defineProperty:w9,getOwnPropertyNames:Hz}=Object;var qz=Object.prototype.hasOwnProperty;var $Y=(X,Y,$)=>{$=X!=null?Az(wz(X)):{};let Z=Y||!X||!X.__esModule?w9($,"default",{value:X,enumerable:!0}):$;for(let Q of Hz(X))if(!qz.call(Z,Q))w9(Z,Q,{get:()=>X[Q],enumerable:!0});return Z};var ZY=(X,Y)=>()=>(Y||X((Y={exports:{}}).exports,Y),Y.exports);var h6=(X,Y)=>{for(var $ in Y)w9(X,$,{get:Y[$],enumerable:!0,configurable:!0,set:(Z)=>Y[$]=()=>Z})};var eX=ZY((tJ,aX)=>{var __dirname="/Users/alexzhang/code/github.com/zhangchi0104/kuma-space/apps/kuma-elysia/src/@prisma/client/runtime",__filename="/Users/alexzhang/code/github.com/zhangchi0104/kuma-space/apps/kuma-elysia/src/@prisma/client/runtime/library.js",BD=Object.create,X9=Object.defineProperty,UD=Object.getOwnPropertyDescriptor,GD=Object.getOwnPropertyNames,AD=Object.getPrototypeOf,wD=Object.prototype.hasOwnProperty,F1=(X,Y)=>()=>(Y||X((Y={exports:{}}).exports,Y),Y.exports),o4=(X,Y)=>{for(var $ in Y)X9(X,$,{get:Y[$],enumerable:!0})},eQ=(X,Y,$,Z)=>{if(Y&&typeof Y=="object"||typeof Y=="function")for(let Q of GD(Y))!wD.call(X,Q)&&Q!==$&&X9(X,Q,{get:()=>Y[Q],enumerable:!(Z=UD(Y,Q))||Z.enumerable});return X},F0=(X,Y,$)=>($=X!=null?BD(AD(X)):{},eQ(Y||!X||!X.__esModule?X9($,"default",{value:X,enumerable:!0}):$,X)),HD=(X)=>eQ(X9({},"__esModule",{value:!0}),X),qD=F1((X,Y)=>{var $=Y.exports;Y.exports.default=$;var Z="\x1B[",Q="\x1B]",W="\x07",J=";",z=!1;$.cursorTo=(M,B)=>{if(typeof M!="number")throw new TypeError("The `x` argument is required");return typeof B!="number"?Z+(M+1)+"G":Z+(B+1)+";"+(M+1)+"H"},$.cursorMove=(M,B)=>{if(typeof M!="number")throw new TypeError("The `x` argument is required");let U="";return M<0?U+=Z+-M+"D":M>0&&(U+=Z+M+"C"),B<0?U+=Z+-B+"A":B>0&&(U+=Z+B+"B"),U},$.cursorUp=(M=1)=>Z+M+"A",$.cursorDown=(M=1)=>Z+M+"B",$.cursorForward=(M=1)=>Z+M+"C",$.cursorBackward=(M=1)=>Z+M+"D",$.cursorLeft=Z+"G",$.cursorSavePosition=z?"\x1B7":Z+"s",$.cursorRestorePosition=z?"\x1B8":Z+"u",$.cursorGetPosition=Z+"6n",$.cursorNextLine=Z+"E",$.cursorPrevLine=Z+"F",$.cursorHide=Z+"?25l",$.cursorShow=Z+"?25h",$.eraseLines=(M)=>{let B="";for(let U=0;U<M;U++)B+=$.eraseLine+(U<M-1?$.cursorUp():"");return M&&(B+=$.cursorLeft),B},$.eraseEndLine=Z+"K",$.eraseStartLine=Z+"1K",$.eraseLine=Z+"2K",$.eraseDown=Z+"J",$.eraseUp=Z+"1J",$.eraseScreen=Z+"2J",$.scrollUp=Z+"S",$.scrollDown=Z+"T",$.clearScreen="\x1Bc",$.clearTerminal=process.platform==="win32"?`${$.eraseScreen}${Z}0f`:`${$.eraseScreen}${Z}3J${Z}H`,$.beep=W,$.link=(M,B)=>[Q,"8",J,J,B,W,M,Q,"8",J,J,W].join(""),$.image=(M,B={})=>{let U=`${Q}1337;File=inline=1`;return B.width&&(U+=`;width=${B.width}`),B.height&&(U+=`;height=${B.height}`),B.preserveAspectRatio===!1&&(U+=";preserveAspectRatio=0"),U+":"+M.toString("base64")+W},$.iTerm={setCwd:(M=process.cwd())=>`${Q}50;CurrentDir=${M}${W}`,annotation:(M,B={})=>{let U=`${Q}1337;`,A=typeof B.x<"u",w=typeof B.y<"u";if((A||w)&&!(A&&w&&typeof B.length<"u"))throw new Error("`x`, `y` and `length` must be defined when `x` or `y` is defined");return M=M.replace(/\|/g,""),U+=B.isHidden?"AddHiddenAnnotation=":"AddAnnotation=",B.length>0?U+=(A?[M,B.length,B.x,B.y]:[B.length,M]).join("|"):U+=M,U+W}}}),XW=F1((X,Y)=>{Y.exports=($,Z=process.argv)=>{let Q=$.startsWith("-")?"":$.length===1?"-":"--",W=Z.indexOf(Q+$),J=Z.indexOf("--");return W!==-1&&(J===-1||W<J)}}),ND=F1((X,Y)=>{var $=import.meta.require("os"),Z=import.meta.require("tty"),Q=XW(),{env:W}=process,J;Q("no-color")||Q("no-colors")||Q("color=false")||Q("color=never")?J=0:(Q("color")||Q("colors")||Q("color=true")||Q("color=always"))&&(J=1),"FORCE_COLOR"in W&&(W.FORCE_COLOR==="true"?J=1:W.FORCE_COLOR==="false"?J=0:J=W.FORCE_COLOR.length===0?1:Math.min(parseInt(W.FORCE_COLOR,10),3));function z(U){return U===0?!1:{level:U,hasBasic:!0,has256:U>=2,has16m:U>=3}}function M(U,A){if(J===0)return 0;if(Q("color=16m")||Q("color=full")||Q("color=truecolor"))return 3;if(Q("color=256"))return 2;if(U&&!A&&J===void 0)return 0;let w=J||0;if(W.TERM==="dumb")return w;if(process.platform==="win32"){let G=$.release().split(".");return Number(G[0])>=10&&Number(G[2])>=10586?Number(G[2])>=14931?3:2:1}if("CI"in W)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE"].some((G)=>(G in W))||W.CI_NAME==="codeship"?1:w;if("TEAMCITY_VERSION"in W)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(W.TEAMCITY_VERSION)?1:0;if(W.COLORTERM==="truecolor")return 3;if("TERM_PROGRAM"in W){let G=parseInt((W.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(W.TERM_PROGRAM){case"iTerm.app":return G>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(W.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(W.TERM)||("COLORTERM"in W)?1:w}function B(U){let A=M(U,U&&U.isTTY);return z(A)}Y.exports={supportsColor:B,stdout:z(M(!0,Z.isatty(1))),stderr:z(M(!0,Z.isatty(2)))}}),DD=F1((X,Y)=>{var $=ND(),Z=XW();function Q(J){if(/^\d{3,4}$/.test(J)){let M=/(\d{1,2})(\d{2})/.exec(J);return{major:0,minor:parseInt(M[1],10),patch:parseInt(M[2],10)}}let z=(J||"").split(".").map((M)=>parseInt(M,10));return{major:z[0],minor:z[1],patch:z[2]}}function W(J){let{env:z}=process;if("FORCE_HYPERLINK"in z)return!(z.FORCE_HYPERLINK.length>0&&parseInt(z.FORCE_HYPERLINK,10)===0);if(Z("no-hyperlink")||Z("no-hyperlinks")||Z("hyperlink=false")||Z("hyperlink=never"))return!1;if(Z("hyperlink=true")||Z("hyperlink=always")||"NETLIFY"in z)return!0;if(!$.supportsColor(J)||J&&!J.isTTY||process.platform==="win32"||"CI"in z||"TEAMCITY_VERSION"in z)return!1;if("TERM_PROGRAM"in z){let M=Q(z.TERM_PROGRAM_VERSION);switch(z.TERM_PROGRAM){case"iTerm.app":return M.major===3?M.minor>=1:M.major>3;case"WezTerm":return M.major>=20200620;case"vscode":return M.major>1||M.major===1&&M.minor>=72}}if("VTE_VERSION"in z){if(z.VTE_VERSION==="0.50.0")return!1;let M=Q(z.VTE_VERSION);return M.major>0||M.minor>=50}return!1}Y.exports={supportsHyperlink:W,stdout:W(process.stdout),stderr:W(process.stderr)}}),OD=F1((X,Y)=>{var $=qD(),Z=DD(),Q=(W,J,{target:z="stdout",...M}={})=>Z[z]?$.link(W,J):M.fallback===!1?W:typeof M.fallback=="function"?M.fallback(W,J):`${W} (\u200B${J}\u200B)`;Y.exports=(W,J,z={})=>Q(W,J,z),Y.exports.stderr=(W,J,z={})=>Q(W,J,{target:"stderr",...z}),Y.exports.isSupported=Z.stdout,Y.exports.stderr.isSupported=Z.stderr}),YW=F1((X,Y)=>{Y.exports={name:"@prisma/engines-version",version:"5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2",main:"index.js",types:"index.d.ts",license:"Apache-2.0",author:"Tim Suchanek <suchanek@prisma.io>",prisma:{enginesVersion:"605197351a3c8bdd595af2d2a9bc3025bca48ea2"},repository:{type:"git",url:"https://github.com/prisma/engines-wrapper.git",directory:"packages/engines-version"},devDependencies:{"@types/node":"18.19.34",typescript:"4.9.5"},files:["index.js","index.d.ts"],scripts:{build:"tsc -d"}}}),$W=F1((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.enginesVersion=void 0,X.enginesVersion=YW().prisma.enginesVersion}),LD=F1((X,Y)=>{Y.exports={name:"dotenv",version:"16.0.3",description:"Loads environment variables from .env file",main:"lib/main.js",types:"lib/main.d.ts",exports:{".":{require:"./lib/main.js",types:"./lib/main.d.ts",default:"./lib/main.js"},"./config":"./config.js","./config.js":"./config.js","./lib/env-options":"./lib/env-options.js","./lib/env-options.js":"./lib/env-options.js","./lib/cli-options":"./lib/cli-options.js","./lib/cli-options.js":"./lib/cli-options.js","./package.json":"./package.json"},scripts:{"dts-check":"tsc --project tests/types/tsconfig.json",lint:"standard","lint-readme":"standard-markdown",pretest:"npm run lint && npm run dts-check",test:"tap tests/*.js --100 -Rspec",prerelease:"npm test",release:"standard-version"},repository:{type:"git",url:"git://github.com/motdotla/dotenv.git"},keywords:["dotenv","env",".env","environment","variables","config","settings"],readmeFilename:"README.md",license:"BSD-2-Clause",devDependencies:{"@types/node":"^17.0.9",decache:"^4.6.1",dtslint:"^3.7.0",sinon:"^12.0.1",standard:"^16.0.4","standard-markdown":"^7.1.0","standard-version":"^9.3.2",tap:"^15.1.6",tar:"^6.1.11",typescript:"^4.5.4"},engines:{node:">=12"}}}),PD=F1((X,Y)=>{var $=import.meta.require("fs"),Z=import.meta.require("path"),Q=import.meta.require("os"),W=LD(),J=W.version,z=/(?:^|^)\s*(?:export\s+)?([\w.-]+)(?:\s*=\s*?|:\s+?)(\s*'(?:\\'|[^'])*'|\s*"(?:\\"|[^"])*"|\s*`(?:\\`|[^`])*`|[^#\r\n]+)?\s*(?:#.*)?(?:$|$)/mg;function M(G){let H={},q=G.toString();q=q.replace(/\r\n?/mg,`
`);let _;for(;(_=z.exec(q))!=null;){let R=_[1],S=_[2]||"";S=S.trim();let C=S[0];S=S.replace(/^(['"`])([\s\S]*)\1$/mg,"$2"),C==='"'&&(S=S.replace(/\\n/g,`
`),S=S.replace(/\\r/g,"\r")),H[R]=S}return H}function B(G){console.log(`[dotenv@${J}][DEBUG] ${G}`)}function U(G){return G[0]==="~"?Z.join(Q.homedir(),G.slice(1)):G}function A(G){let H=Z.resolve(process.cwd(),".env"),q="utf8",_=!!(G&&G.debug),R=!!(G&&G.override);G&&(G.path!=null&&(H=U(G.path)),G.encoding!=null&&(q=G.encoding));try{let S=w.parse($.readFileSync(H,{encoding:q}));return Object.keys(S).forEach(function(C){Object.prototype.hasOwnProperty.call(process.env,C)?(R===!0&&(process.env[C]=S[C]),_&&B(R===!0?`"${C}" is already defined in \`process.env\` and WAS overwritten`:`"${C}" is already defined in \`process.env\` and was NOT overwritten`)):process.env[C]=S[C]}),{parsed:S}}catch(S){return _&&B(`Failed to load ${H} ${S.message}`),{error:S}}}var w={config:A,parse:M};Y.exports.config=w.config,Y.exports.parse=w.parse,Y.exports=w}),SD=F1((X,Y)=>{Y.exports=($)=>{let Z=$.match(/^[ \t]*(?=\S)/gm);return Z?Z.reduce((Q,W)=>Math.min(Q,W.length),1/0):0}}),_D=F1((X,Y)=>{var $=SD();Y.exports=(Z)=>{let Q=$(Z);if(Q===0)return Z;let W=new RegExp(`^[ \\t]{${Q}}`,"gm");return Z.replace(W,"")}}),ZW=F1((X,Y)=>{Y.exports=($,Z=1,Q)=>{if(Q={indent:" ",includeEmptyLines:!1,...Q},typeof $!="string")throw new TypeError(`Expected \`input\` to be a \`string\`, got \`${typeof $}\``);if(typeof Z!="number")throw new TypeError(`Expected \`count\` to be a \`number\`, got \`${typeof Z}\``);if(typeof Q.indent!="string")throw new TypeError(`Expected \`options.indent\` to be a \`string\`, got \`${typeof Q.indent}\``);if(Z===0)return $;let W=Q.includeEmptyLines?/^/gm:/^(?!\s*$)/gm;return $.replace(W,Q.indent.repeat(Z))}}),FD=F1((X,Y)=>{Y.exports=({onlyFirst:$=!1}={})=>{let Z=["[\\u001B\\u009B][[\\]()#;?]*(?:(?:(?:(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]+)*|[a-zA-Z\\d]+(?:;[-a-zA-Z\\d\\/#&.:=?%@~_]*)*)?\\u0007)","(?:(?:\\d{1,4}(?:;\\d{0,4})*)?[\\dA-PR-TZcf-ntqry=><~]))"].join("|");return new RegExp(Z,$?void 0:"g")}}),QW=F1((X,Y)=>{var $=FD();Y.exports=(Z)=>typeof Z=="string"?Z.replace($(),""):Z}),CD=F1((X,Y)=>{Y.exports=($={})=>{let Z;if($.repoUrl)Z=$.repoUrl;else if($.user&&$.repo)Z=`https://github.com/${$.user}/${$.repo}`;else throw new Error("You need to specify either the `repoUrl` option or both the `user` and `repo` options");let Q=new URL(`${Z}/issues/new`),W=["body","title","labels","template","milestone","assignee","projects"];for(let J of W){let z=$[J];if(z!==void 0){if(J==="labels"||J==="projects"){if(!Array.isArray(z))throw new TypeError(`The \`${J}\` option should be an array`);z=z.join(",")}Q.searchParams.set(J,z)}}return Q.toString()},Y.exports.default=Y.exports}),WW=F1((X,Y)=>{Y.exports=function(){function $(Z,Q,W,J,z){return Z<Q||W<Q?Z>W?W+1:Z+1:J===z?Q:Q+1}return function(Z,Q){if(Z===Q)return 0;if(Z.length>Q.length){var W=Z;Z=Q,Q=W}for(var J=Z.length,z=Q.length;J>0&&Z.charCodeAt(J-1)===Q.charCodeAt(z-1);)J--,z--;for(var M=0;M<J&&Z.charCodeAt(M)===Q.charCodeAt(M);)M++;if(J-=M,z-=M,J===0||z<3)return z;var B=0,U,A,w,G,H,q,_,R,S,C,d,h,k=[];for(U=0;U<J;U++)k.push(U+1),k.push(Z.charCodeAt(M+U));for(var x0=k.length-1;B<z-3;)for(S=Q.charCodeAt(M+(A=B)),C=Q.charCodeAt(M+(w=B+1)),d=Q.charCodeAt(M+(G=B+2)),h=Q.charCodeAt(M+(H=B+3)),q=B+=4,U=0;U<x0;U+=2)_=k[U],R=k[U+1],A=$(_,A,w,S,R),w=$(A,w,G,C,R),G=$(w,G,H,d,R),q=$(G,H,q,h,R),k[U]=q,H=G,G=w,w=A,A=_;for(;B<z;)for(S=Q.charCodeAt(M+(A=B)),q=++B,U=0;U<x0;U+=2)_=k[U],k[U]=q=$(_,A,q,S,k[U+1]),A=_;return q}}()}),JW={};o4(JW,{Debug:()=>HW,Decimal:()=>r4,Extensions:()=>zW,MetricsClient:()=>UJ,NotFoundError:()=>Z9,PrismaClientInitializationError:()=>r0,PrismaClientKnownRequestError:()=>a8,PrismaClientRustPanicError:()=>g6,PrismaClientUnknownRequestError:()=>A8,PrismaClientValidationError:()=>K8,Public:()=>MW,Sql:()=>v6,defineDmmfProperty:()=>YS,deserializeJsonResponse:()=>s7,dmmfToRuntimeDataModel:()=>XS,empty:()=>NS,getPrismaClient:()=>eF,getRuntime:()=>PJ,join:()=>qS,makeStrictEnum:()=>$C,makeTypedQueryFactory:()=>QS,objectEnumValues:()=>rW,raw:()=>GJ,serializeJsonQuery:()=>zJ,skip:()=>WJ,sqltag:()=>DS,warnEnvConflicts:()=>ZC,warnOnce:()=>RW});aX.exports=HD(JW);var zW={};o4(zW,{defineExtension:()=>RD,getExtensionContext:()=>KD});function RD(X){return typeof X=="function"?X:(Y)=>Y.$extends(X)}function KD(X){return X}var MW={};o4(MW,{validator:()=>jD});function jD(...X){return(Y)=>Y}var QX={};o4(QX,{$:()=>wW,bgBlack:()=>yD,bgBlue:()=>hD,bgCyan:()=>cD,bgGreen:()=>vD,bgMagenta:()=>mD,bgRed:()=>dD,bgWhite:()=>uD,bgYellow:()=>pD,black:()=>kD,blue:()=>T4,bold:()=>b8,cyan:()=>B2,dim:()=>n4,gray:()=>IX,green:()=>p4,grey:()=>fD,hidden:()=>ID,inverse:()=>ED,italic:()=>VD,magenta:()=>TD,red:()=>U2,reset:()=>bD,strikethrough:()=>xD,underline:()=>G8,white:()=>gD,yellow:()=>s4});var WX,BW,UW,GW,AW=!0;typeof process<"u"&&({FORCE_COLOR:WX,NODE_DISABLE_COLORS:BW,NO_COLOR:UW,TERM:GW}=process.env||{},AW=process.stdout&&process.stdout.isTTY);var wW={enabled:!BW&&UW==null&&GW!=="dumb"&&(WX!=null&&WX!=="0"||AW)};function I0(X,Y){let $=new RegExp(`\\x1b\\[${Y}m`,"g"),Z=`\x1B[${X}m`,Q=`\x1B[${Y}m`;return function(W){return!wW.enabled||W==null?W:Z+(~(""+W).indexOf(Q)?W.replace($,Q+Z):W)+Q}}var bD=I0(0,0),b8=I0(1,22),n4=I0(2,22),VD=I0(3,23),G8=I0(4,24),ED=I0(7,27),ID=I0(8,28),xD=I0(9,29),kD=I0(30,39),U2=I0(31,39),p4=I0(32,39),s4=I0(33,39),T4=I0(34,39),TD=I0(35,39),B2=I0(36,39),gD=I0(37,39),IX=I0(90,39),fD=I0(90,39),yD=I0(40,49),dD=I0(41,49),vD=I0(42,49),pD=I0(43,49),hD=I0(44,49),mD=I0(45,49),cD=I0(46,49),uD=I0(47,49),iD=100,GQ=["green","yellow","blue","magenta","cyan","red"],g4=[],AQ=Date.now(),lD=0,JX=typeof process<"u"?process.env:{};globalThis.DEBUG??=JX.DEBUG??"";globalThis.DEBUG_COLORS??=JX.DEBUG_COLORS?JX.DEBUG_COLORS==="true":!0;var f4={enable(X){typeof X=="string"&&(globalThis.DEBUG=X)},disable(){let X=globalThis.DEBUG;return globalThis.DEBUG="",X},enabled(X){let Y=globalThis.DEBUG.split(",").map((Q)=>Q.replace(/[.+?^${}()|[\]\\]/g,"\\$&")),$=Y.some((Q)=>Q===""||Q[0]==="-"?!1:X.match(RegExp(Q.split("*").join(".*")+"$"))),Z=Y.some((Q)=>Q===""||Q[0]!=="-"?!1:X.match(RegExp(Q.slice(1).split("*").join(".*")+"$")));return $&&!Z},log:(...X)=>{let[Y,$,...Z]=X;(console.warn??console.log)(`${Y} ${$}`,...Z)},formatters:{}};function oD(X){let Y={color:GQ[lD++%GQ.length],enabled:f4.enabled(X),namespace:X,log:f4.log,extend:()=>{}};return new Proxy((...Z)=>{let{enabled:Q,namespace:W,color:J,log:z}=Y;if(Z.length!==0&&g4.push([W,...Z]),g4.length>iD&&g4.shift(),f4.enabled(W)||Q){let M=Z.map((U)=>typeof U=="string"?U:nD(U)),B=`+${Date.now()-AQ}ms`;AQ=Date.now(),globalThis.DEBUG_COLORS?z(QX[J](b8(W)),...M,QX[J](B)):z(W,...M,B)}},{get:(Z,Q)=>Y[Q],set:(Z,Q,W)=>Y[Q]=W})}var HW=new Proxy(oD,{get:(X,Y)=>f4[Y],set:(X,Y,$)=>f4[Y]=$});function nD(X,Y=2){let $=new Set;return JSON.stringify(X,(Z,Q)=>{if(typeof Q=="object"&&Q!==null){if($.has(Q))return"[Circular *]";$.add(Q)}else if(typeof Q=="bigint")return Q.toString();return Q},Y)}function sD(X=7500){let Y=g4.map(([$,...Z])=>`${$} ${Z.map((Q)=>typeof Q=="string"?Q:JSON.stringify(Q)).join(" ")}`).join(`
`);return Y.length<X?Y:Y.slice(-X)}function tD(){g4.length=0}var b1=HW,rD=F0(import.meta.require("fs"));function aD(){let X=process.env.PRISMA_QUERY_ENGINE_LIBRARY;if(!(X&&rD.default.existsSync(X))&&process.arch==="ia32")throw new Error('The default query engine type (Node-API, "library") is currently not supported for 32bit Node. Please set `engineType = "binary"` in the "generator" block of your "schema.prisma" file (or use the environment variables "PRISMA_CLIENT_ENGINE_TYPE=binary" and/or "PRISMA_CLI_QUERY_ENGINE_TYPE=binary".)')}var eD=["darwin","darwin-arm64","debian-openssl-1.0.x","debian-openssl-1.1.x","debian-openssl-3.0.x","rhel-openssl-1.0.x","rhel-openssl-1.1.x","rhel-openssl-3.0.x","linux-arm64-openssl-1.1.x","linux-arm64-openssl-1.0.x","linux-arm64-openssl-3.0.x","linux-arm-openssl-1.1.x","linux-arm-openssl-1.0.x","linux-arm-openssl-3.0.x","linux-musl","linux-musl-openssl-3.0.x","linux-musl-arm64-openssl-1.1.x","linux-musl-arm64-openssl-3.0.x","linux-nixos","linux-static-x64","linux-static-arm64","windows","freebsd11","freebsd12","freebsd13","freebsd14","freebsd15","openbsd","netbsd","arm"],x7="libquery_engine";function XO(X,Y){let $=Y==="url";return X.includes("windows")?$?"query_engine.dll.node":`query_engine-${X}.dll.node`:X.includes("darwin")?$?`${x7}.dylib.node`:`${x7}-${X}.dylib.node`:$?`${x7}.so.node`:`${x7}-${X}.so.node`}var YO=F0(import.meta.require("child_process")),qW=F0(import.meta.require("fs/promises")),zX=F0(import.meta.require("os")),L6=Symbol.for("@ts-pattern/matcher"),$O=Symbol.for("@ts-pattern/isVariadic"),u7="@ts-pattern/anonymous-select-key",MX=(X)=>!!(X&&typeof X=="object"),v7=(X)=>X&&!!X[L6],s8=(X,Y,$)=>{if(v7(X)){let Z=X[L6](),{matched:Q,selections:W}=Z.match(Y);return Q&&W&&Object.keys(W).forEach((J)=>$(J,W[J])),Q}if(MX(X)){if(!MX(Y))return!1;if(Array.isArray(X)){if(!Array.isArray(Y))return!1;let Z=[],Q=[],W=[];for(let J of X.keys()){let z=X[J];v7(z)&&z[$O]?W.push(z):W.length?Q.push(z):Z.push(z)}if(W.length){if(W.length>1)throw new Error("Pattern error: Using `...P.array(...)` several times in a single pattern is not allowed.");if(Y.length<Z.length+Q.length)return!1;let J=Y.slice(0,Z.length),z=Q.length===0?[]:Y.slice(-Q.length),M=Y.slice(Z.length,Q.length===0?1/0:-Q.length);return Z.every((B,U)=>s8(B,J[U],$))&&Q.every((B,U)=>s8(B,z[U],$))&&(W.length===0||s8(W[0],M,$))}return X.length===Y.length&&X.every((J,z)=>s8(J,Y[z],$))}return Object.keys(X).every((Z)=>{let Q=X[Z];return((Z in Y)||v7(W=Q)&&W[L6]().matcherType==="optional")&&s8(Q,Y[Z],$);var W})}return Object.is(Y,X)},f6=(X)=>{var Y,$,Z;return MX(X)?v7(X)?(Y=($=(Z=X[L6]()).getSelectionKeys)==null?void 0:$.call(Z))!=null?Y:[]:Array.isArray(X)?h4(X,f6):h4(Object.values(X),f6):[]},h4=(X,Y)=>X.reduce(($,Z)=>$.concat(Y(Z)),[]);function w8(X){return Object.assign(X,{optional:()=>ZO(X),and:(Y)=>d0(X,Y),or:(Y)=>QO(X,Y),select:(Y)=>Y===void 0?wQ(X):wQ(Y,X)})}function ZO(X){return w8({[L6]:()=>({match:(Y)=>{let $={},Z=(Q,W)=>{$[Q]=W};return Y===void 0?(f6(X).forEach((Q)=>Z(Q,void 0)),{matched:!0,selections:$}):{matched:s8(X,Y,Z),selections:$}},getSelectionKeys:()=>f6(X),matcherType:"optional"})})}function d0(...X){return w8({[L6]:()=>({match:(Y)=>{let $={},Z=(Q,W)=>{$[Q]=W};return{matched:X.every((Q)=>s8(Q,Y,Z)),selections:$}},getSelectionKeys:()=>h4(X,f6),matcherType:"and"})})}function QO(...X){return w8({[L6]:()=>({match:(Y)=>{let $={},Z=(Q,W)=>{$[Q]=W};return h4(X,f6).forEach((Q)=>Z(Q,void 0)),{matched:X.some((Q)=>s8(Q,Y,Z)),selections:$}},getSelectionKeys:()=>h4(X,f6),matcherType:"or"})})}function q0(X){return{[L6]:()=>({match:(Y)=>({matched:!!X(Y)})})}}function wQ(...X){let Y=typeof X[0]=="string"?X[0]:void 0,$=X.length===2?X[1]:typeof X[0]=="string"?void 0:X[0];return w8({[L6]:()=>({match:(Z)=>{let Q={[Y??u7]:Z};return{matched:$===void 0||s8($,Z,(W,J)=>{Q[W]=J}),selections:Q}},getSelectionKeys:()=>[Y??u7].concat($===void 0?[]:f6($))})})}function l8(X){return typeof X=="number"}function V6(X){return typeof X=="string"}function E6(X){return typeof X=="bigint"}var jm=w8(q0(function(X){return!0})),I6=(X)=>Object.assign(w8(X),{startsWith:(Y)=>{return I6(d0(X,($=Y,q0((Z)=>V6(Z)&&Z.startsWith($)))));var $},endsWith:(Y)=>{return I6(d0(X,($=Y,q0((Z)=>V6(Z)&&Z.endsWith($)))));var $},minLength:(Y)=>I6(d0(X,(($)=>q0((Z)=>V6(Z)&&Z.length>=$))(Y))),length:(Y)=>I6(d0(X,(($)=>q0((Z)=>V6(Z)&&Z.length===$))(Y))),maxLength:(Y)=>I6(d0(X,(($)=>q0((Z)=>V6(Z)&&Z.length<=$))(Y))),includes:(Y)=>{return I6(d0(X,($=Y,q0((Z)=>V6(Z)&&Z.includes($)))));var $},regex:(Y)=>{return I6(d0(X,($=Y,q0((Z)=>V6(Z)&&!!Z.match($)))));var $}}),bm=I6(q0(V6)),o8=(X)=>Object.assign(w8(X),{between:(Y,$)=>o8(d0(X,((Z,Q)=>q0((W)=>l8(W)&&Z<=W&&Q>=W))(Y,$))),lt:(Y)=>o8(d0(X,(($)=>q0((Z)=>l8(Z)&&Z<$))(Y))),gt:(Y)=>o8(d0(X,(($)=>q0((Z)=>l8(Z)&&Z>$))(Y))),lte:(Y)=>o8(d0(X,(($)=>q0((Z)=>l8(Z)&&Z<=$))(Y))),gte:(Y)=>o8(d0(X,(($)=>q0((Z)=>l8(Z)&&Z>=$))(Y))),int:()=>o8(d0(X,q0((Y)=>l8(Y)&&Number.isInteger(Y)))),finite:()=>o8(d0(X,q0((Y)=>l8(Y)&&Number.isFinite(Y)))),positive:()=>o8(d0(X,q0((Y)=>l8(Y)&&Y>0))),negative:()=>o8(d0(X,q0((Y)=>l8(Y)&&Y<0)))}),Vm=o8(q0(l8)),x6=(X)=>Object.assign(w8(X),{between:(Y,$)=>x6(d0(X,((Z,Q)=>q0((W)=>E6(W)&&Z<=W&&Q>=W))(Y,$))),lt:(Y)=>x6(d0(X,(($)=>q0((Z)=>E6(Z)&&Z<$))(Y))),gt:(Y)=>x6(d0(X,(($)=>q0((Z)=>E6(Z)&&Z>$))(Y))),lte:(Y)=>x6(d0(X,(($)=>q0((Z)=>E6(Z)&&Z<=$))(Y))),gte:(Y)=>x6(d0(X,(($)=>q0((Z)=>E6(Z)&&Z>=$))(Y))),positive:()=>x6(d0(X,q0((Y)=>E6(Y)&&Y>0))),negative:()=>x6(d0(X,q0((Y)=>E6(Y)&&Y<0)))}),Em=x6(q0(E6)),Im=w8(q0(function(X){return typeof X=="boolean"})),xm=w8(q0(function(X){return typeof X=="symbol"})),km=w8(q0(function(X){return X==null})),Tm=w8(q0(function(X){return X!=null})),BX={matched:!1,value:void 0};function Y9(X){return new WO(X,BX)}var WO=class X{constructor(Y,$){this.input=void 0,this.state=void 0,this.input=Y,this.state=$}with(...Y){if(this.state.matched)return this;let $=Y[Y.length-1],Z=[Y[0]],Q;Y.length===3&&typeof Y[1]=="function"?Q=Y[1]:Y.length>2&&Z.push(...Y.slice(1,Y.length-1));let W=!1,J={},z=(B,U)=>{W=!0,J[B]=U},M=!Z.some((B)=>s8(B,this.input,z))||Q&&!Q(this.input)?BX:{matched:!0,value:$(W?u7 in J?J[u7]:J:this.input,this.input)};return new X(this.input,M)}when(Y,$){if(this.state.matched)return this;let Z=!!Y(this.input);return new X(this.input,Z?{matched:!0,value:$(this.input,this.input)}:BX)}otherwise(Y){return this.state.matched?this.state.value:Y(this.input)}exhaustive(){if(this.state.matched)return this.state.value;let Y;try{Y=JSON.stringify(this.input)}catch{Y=this.input}throw new Error(`Pattern matching error: no pattern matches value ${Y}`)}run(){return this.exhaustive()}returnType(){return this}},JO=import.meta.require("util"),zO={warn:s4("prisma:warn")},MO={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function s5(X,...Y){MO.warn()&&console.warn(`${zO.warn} ${X}`,...Y)}var BO=JO.promisify(YO.default.exec),j1=b1("prisma:get-platform"),UO=["1.0.x","1.1.x","3.0.x"];async function GO(){let X=zX.default.platform(),Y=process.arch;if(X==="freebsd"){let J=await i7("freebsd-version");if(J&&J.trim().length>0){let z=/^(\d+)\.?/.exec(J);if(z)return{platform:"freebsd",targetDistro:`freebsd${z[1]}`,arch:Y}}}if(X!=="linux")return{platform:X,arch:Y};let $=await wO(),Z=await _O(),Q=qO({arch:Y,archFromUname:Z,familyDistro:$.familyDistro}),{libssl:W}=await NO(Q);return{platform:"linux",libssl:W,arch:Y,archFromUname:Z,...$}}function AO(X){let Y=/^ID="?([^"\n]*)"?$/im,$=/^ID_LIKE="?([^"\n]*)"?$/im,Z=Y.exec(X),Q=Z&&Z[1]&&Z[1].toLowerCase()||"",W=$.exec(X),J=W&&W[1]&&W[1].toLowerCase()||"",z=Y9({id:Q,idLike:J}).with({id:"alpine"},({id:M})=>({targetDistro:"musl",familyDistro:M,originalDistro:M})).with({id:"raspbian"},({id:M})=>({targetDistro:"arm",familyDistro:"debian",originalDistro:M})).with({id:"nixos"},({id:M})=>({targetDistro:"nixos",originalDistro:M,familyDistro:"nixos"})).with({id:"debian"},{id:"ubuntu"},({id:M})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:M})).with({id:"rhel"},{id:"centos"},{id:"fedora"},({id:M})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:M})).when(({idLike:M})=>M.includes("debian")||M.includes("ubuntu"),({id:M})=>({targetDistro:"debian",familyDistro:"debian",originalDistro:M})).when(({idLike:M})=>Q==="arch"||M.includes("arch"),({id:M})=>({targetDistro:"debian",familyDistro:"arch",originalDistro:M})).when(({idLike:M})=>M.includes("centos")||M.includes("fedora")||M.includes("rhel")||M.includes("suse"),({id:M})=>({targetDistro:"rhel",familyDistro:"rhel",originalDistro:M})).otherwise(({id:M})=>({targetDistro:void 0,familyDistro:void 0,originalDistro:M}));return j1(`Found distro info:
${JSON.stringify(z,null,2)}`),z}async function wO(){let X="/etc/os-release";try{let Y=await qW.default.readFile(X,{encoding:"utf-8"});return AO(Y)}catch{return{targetDistro:void 0,familyDistro:void 0,originalDistro:void 0}}}function HO(X){let Y=/^OpenSSL\s(\d+\.\d+)\.\d+/.exec(X);if(Y){let $=`${Y[1]}.x`;return NW($)}}function HQ(X){let Y=/libssl\.so\.(\d)(\.\d)?/.exec(X);if(Y){let $=`${Y[1]}${Y[2]??".0"}.x`;return NW($)}}function NW(X){let Y=(()=>{if(OW(X))return X;let $=X.split(".");return $[1]="0",$.join(".")})();if(UO.includes(Y))return Y}function qO(X){return Y9(X).with({familyDistro:"musl"},()=>(j1('Trying platform-specific paths for "alpine"'),["/lib"])).with({familyDistro:"debian"},({archFromUname:Y})=>(j1('Trying platform-specific paths for "debian" (and "ubuntu")'),[`/usr/lib/${Y}-linux-gnu`,`/lib/${Y}-linux-gnu`])).with({familyDistro:"rhel"},()=>(j1('Trying platform-specific paths for "rhel"'),["/lib64","/usr/lib64"])).otherwise(({familyDistro:Y,arch:$,archFromUname:Z})=>(j1(`Don't know any platform-specific paths for "${Y}" on ${$} (${Z})`),[]))}async function NO(X){let Y='grep -v "libssl.so.0"',$=await qQ(X);if($){j1(`Found libssl.so file using platform-specific paths: ${$}`);let W=HQ($);if(j1(`The parsed libssl version is: ${W}`),W)return{libssl:W,strategy:"libssl-specific-path"}}j1('Falling back to "ldconfig" and other generic paths');let Z=await i7(`ldconfig -p | sed "s/.*=>s*//" | sed "s|.*/||" | grep libssl | sort | ${Y}`);if(Z||(Z=await qQ(["/lib64","/usr/lib64","/lib"])),Z){j1(`Found libssl.so file using "ldconfig" or other generic paths: ${Z}`);let W=HQ(Z);if(j1(`The parsed libssl version is: ${W}`),W)return{libssl:W,strategy:"ldconfig"}}let Q=await i7("openssl version -v");if(Q){j1(`Found openssl binary with version: ${Q}`);let W=HO(Q);if(j1(`The parsed openssl version is: ${W}`),W)return{libssl:W,strategy:"openssl-binary"}}return j1("Couldn't find any version of libssl or OpenSSL in the system"),{}}async function qQ(X){for(let Y of X){let $=await DO(Y);if($)return $}}async function DO(X){try{return(await qW.default.readdir(X)).find((Y)=>Y.startsWith("libssl.so.")&&!Y.startsWith("libssl.so.0"))}catch(Y){if(Y.code==="ENOENT")return;throw Y}}async function xX(){let{binaryTarget:X}=await DW();return X}function OO(X){return X.binaryTarget!==void 0}async function LO(){let{memoized:X,...Y}=await DW();return Y}var k7={};async function DW(){if(OO(k7))return Promise.resolve({...k7,memoized:!0});let X=await GO(),Y=PO(X);return k7={...X,binaryTarget:Y},{...k7,memoized:!1}}function PO(X){let{platform:Y,arch:$,archFromUname:Z,libssl:Q,targetDistro:W,familyDistro:J,originalDistro:z}=X;Y==="linux"&&!["x64","arm64"].includes($)&&s5(`Prisma only officially supports Linux on amd64 (x86_64) and arm64 (aarch64) system architectures (detected "${$}" instead). If you are using your own custom Prisma engines, you can ignore this warning, as long as you've compiled the engines for your system architecture "${Z}".`);let M="1.1.x";if(Y==="linux"&&Q===void 0){let U=Y9({familyDistro:J}).with({familyDistro:"debian"},()=>"Please manually install OpenSSL via `apt-get update -y && apt-get install -y openssl` and try installing Prisma again. If you're running Prisma on Docker, add this command to your Dockerfile, or switch to an image that already has OpenSSL installed.").otherwise(()=>"Please manually install OpenSSL and try installing Prisma again.");s5(`Prisma failed to detect the libssl/openssl version to use, and may not work as expected. Defaulting to "openssl-${M}".
${U}`)}let B="debian";if(Y==="linux"&&W===void 0&&j1(`Distro is "${z}". Falling back to Prisma engines built for "${B}".`),Y==="darwin"&&$==="arm64")return"darwin-arm64";if(Y==="darwin")return"darwin";if(Y==="win32")return"windows";if(Y==="freebsd")return W;if(Y==="openbsd")return"openbsd";if(Y==="netbsd")return"netbsd";if(Y==="linux"&&W==="nixos")return"linux-nixos";if(Y==="linux"&&$==="arm64")return`${W==="musl"?"linux-musl-arm64":"linux-arm64"}-openssl-${Q||M}`;if(Y==="linux"&&$==="arm")return`linux-arm-openssl-${Q||M}`;if(Y==="linux"&&W==="musl"){let U="linux-musl";return!Q||OW(Q)?U:`${U}-openssl-${Q}`}return Y==="linux"&&W&&Q?`${W}-openssl-${Q}`:(Y!=="linux"&&s5(`Prisma detected unknown OS "${Y}" and may not work as expected. Defaulting to "linux".`),Q?`${B}-openssl-${Q}`:W?`${W}-openssl-${M}`:`${B}-openssl-${M}`)}async function SO(X){try{return await X()}catch{return}}function i7(X){return SO(async()=>{let Y=await BO(X);return j1(`Command "${X}" successfully returned "${Y.stdout}"`),Y.stdout})}async function _O(){return typeof zX.default.machine=="function"?zX.default.machine():(await i7("uname -m"))?.trim()}function OW(X){return X.startsWith("1.")}var FO=F0(OD());function CO(X){return FO.default(X,X,{fallback:G8})}var gm=F0($W()),f0=F0(import.meta.require("path")),fm=F0($W()),ym=b1("prisma:engines");function RO(){return f0.default.join(__dirname,"../")}var dm="libquery-engine";f0.default.join(__dirname,"../query-engine-darwin");f0.default.join(__dirname,"../query-engine-darwin-arm64");f0.default.join(__dirname,"../query-engine-debian-openssl-1.0.x");f0.default.join(__dirname,"../query-engine-debian-openssl-1.1.x");f0.default.join(__dirname,"../query-engine-debian-openssl-3.0.x");f0.default.join(__dirname,"../query-engine-linux-static-x64");f0.default.join(__dirname,"../query-engine-linux-static-arm64");f0.default.join(__dirname,"../query-engine-rhel-openssl-1.0.x");f0.default.join(__dirname,"../query-engine-rhel-openssl-1.1.x");f0.default.join(__dirname,"../query-engine-rhel-openssl-3.0.x");f0.default.join(__dirname,"../libquery_engine-darwin.dylib.node");f0.default.join(__dirname,"../libquery_engine-darwin-arm64.dylib.node");f0.default.join(__dirname,"../libquery_engine-debian-openssl-1.0.x.so.node");f0.default.join(__dirname,"../libquery_engine-debian-openssl-1.1.x.so.node");f0.default.join(__dirname,"../libquery_engine-debian-openssl-3.0.x.so.node");f0.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.0.x.so.node");f0.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-1.1.x.so.node");f0.default.join(__dirname,"../libquery_engine-linux-arm64-openssl-3.0.x.so.node");f0.default.join(__dirname,"../libquery_engine-linux-musl.so.node");f0.default.join(__dirname,"../libquery_engine-linux-musl-openssl-3.0.x.so.node");f0.default.join(__dirname,"../libquery_engine-rhel-openssl-1.0.x.so.node");f0.default.join(__dirname,"../libquery_engine-rhel-openssl-1.1.x.so.node");f0.default.join(__dirname,"../libquery_engine-rhel-openssl-3.0.x.so.node");f0.default.join(__dirname,"../query_engine-windows.dll.node");var NQ=F0(import.meta.require("fs")),DQ=b1("chmodPlusX");function KO(X){if(process.platform==="win32")return;let Y=NQ.default.statSync(X),$=Y.mode|64|8|1;if(Y.mode===$){DQ(`Execution permissions of ${X} are fine`);return}let Z=$.toString(8).slice(-3);DQ(`Have to call chmodPlusX on ${X}`),NQ.default.chmodSync(X,Z)}function jO(X){let Y=X.e,$=(z)=>`Prisma cannot find the required \`${z}\` system library in your system`,Z=Y.message.includes("cannot open shared object file"),Q=`Please refer to the documentation about Prisma's system requirements: ${CO("https://pris.ly/d/system-requirements")}`,W=`Unable to require(\`${n4(X.id)}\`).`,J=Y9({message:Y.message,code:Y.code}).with({code:"ENOENT"},()=>"File does not exist.").when(({message:z})=>Z&&z.includes("libz"),()=>`${$("libz")}. Please install it and try again.`).when(({message:z})=>Z&&z.includes("libgcc_s"),()=>`${$("libgcc_s")}. Please install it and try again.`).when(({message:z})=>Z&&z.includes("libssl"),()=>{let z=X.platformInfo.libssl?`openssl-${X.platformInfo.libssl}`:"openssl";return`${$("libssl")}. Please install ${z} and try again.`}).when(({message:z})=>z.includes("GLIBC"),()=>`Prisma has detected an incompatible version of the \`glibc\` C standard library installed in your system. This probably means your system may be too old to run Prisma. ${Q}`).when(({message:z})=>X.platformInfo.platform==="linux"&&z.includes("symbol not found"),()=>`The Prisma engines are not compatible with your system ${X.platformInfo.originalDistro} on (${X.platformInfo.archFromUname}) which uses the \`${X.platformInfo.binaryTarget}\` binaryTarget by default. ${Q}`).otherwise(()=>`The Prisma engines do not seem to be compatible with your system. ${Q}`);return`${W}
${J}

Details: ${Y.message}`}var LW=F0(PD()),UX=F0(import.meta.require("fs")),m4=F0(import.meta.require("path"));function bO(X){let Y=X.ignoreProcessEnv?{}:process.env,$=(Z)=>Z.match(/(.?\${(?:[a-zA-Z0-9_]+)?})/g)?.reduce(function(Q,W){let J=/(.?)\${([a-zA-Z0-9_]+)?}/g.exec(W);if(!J)return Q;let z=J[1],M,B;if(z==="\\")B=J[0],M=B.replace("\\$","$");else{let U=J[2];B=J[0].substring(z.length),M=Object.hasOwnProperty.call(Y,U)?Y[U]:X.parsed[U]||"",M=$(M)}return Q.replace(B,M)},Z)??Z;for(let Z in X.parsed){let Q=Object.hasOwnProperty.call(Y,Z)?Y[Z]:X.parsed[Z];X.parsed[Z]=$(Q)}for(let Z in X.parsed)Y[Z]=X.parsed[Z];return X}var GX=b1("prisma:tryLoadEnv");function PW({rootEnvPath:X,schemaEnvPath:Y},$={conflictCheck:"none"}){let Z=OQ(X);$.conflictCheck!=="none"&&VO(Z,Y,$.conflictCheck);let Q=null;return SW(Z?.path,Y)||(Q=OQ(Y)),!Z&&!Q&&GX("No Environment variables loaded"),Q?.dotenvResult.error?console.error(U2(b8("Schema Env Error: "))+Q.dotenvResult.error):{message:[Z?.message,Q?.message].filter(Boolean).join(`
`),parsed:{...Z?.dotenvResult?.parsed,...Q?.dotenvResult?.parsed}}}function VO(X,Y,$){let Z=X?.dotenvResult.parsed,Q=!SW(X?.path,Y);if(Z&&Y&&Q&&UX.default.existsSync(Y)){let W=LW.default.parse(UX.default.readFileSync(Y)),J=[];for(let z in W)Z[z]===W[z]&&J.push(z);if(J.length>0){let z=m4.default.relative(process.cwd(),X.path),M=m4.default.relative(process.cwd(),Y);if($==="error"){let B=`There is a conflict between env var${J.length>1?"s":""} in ${G8(z)} and ${G8(M)}
Conflicting env vars:
${J.map((U)=>`  ${b8(U)}`).join(`
`)}

We suggest to move the contents of ${G8(M)} to ${G8(z)} to consolidate your env vars.
`;throw new Error(B)}else if($==="warn"){let B=`Conflict for env var${J.length>1?"s":""} ${J.map((U)=>b8(U)).join(", ")} in ${G8(z)} and ${G8(M)}
Env vars from ${G8(M)} overwrite the ones from ${G8(z)}
      `;console.warn(`${s4("warn(prisma)")} ${B}`)}}}}function OQ(X){if(EO(X)){GX(`Environment variables loaded from ${X}`);let Y=LW.default.config({path:X,debug:process.env.DOTENV_CONFIG_DEBUG?!0:void 0});return{dotenvResult:bO(Y),message:n4(`Environment variables loaded from ${m4.default.relative(process.cwd(),X)}`),path:X}}else GX(`Environment variables not found at ${X}`);return null}function SW(X,Y){return X&&Y&&m4.default.resolve(X)===m4.default.resolve(Y)}function EO(X){return!!(X&&UX.default.existsSync(X))}var IO="library";function _W(X){return xO()||(X?.config.engineType==="library"?"library":X?.config.engineType==="binary"?"binary":IO)}function xO(){let X=process.env.PRISMA_CLIENT_ENGINE_TYPE;return X==="library"?"library":X==="binary"?"binary":void 0}var c4;((X)=>{let Y;(($)=>($.findUnique="findUnique",$.findUniqueOrThrow="findUniqueOrThrow",$.findFirst="findFirst",$.findFirstOrThrow="findFirstOrThrow",$.findMany="findMany",$.create="create",$.createMany="createMany",$.createManyAndReturn="createManyAndReturn",$.update="update",$.updateMany="updateMany",$.upsert="upsert",$.delete="delete",$.deleteMany="deleteMany",$.groupBy="groupBy",$.count="count",$.aggregate="aggregate",$.findRaw="findRaw",$.aggregateRaw="aggregateRaw"))(Y=X.ModelAction||={})})(c4||={});var T7=F0(import.meta.require("path"));function kO(X){return T7.default.sep===T7.default.posix.sep?X:X.split(T7.default.sep).join(T7.default.posix.sep)}var TO=F0(ZW());function gO(X){return String(new fO(X))}var fO=class{constructor(X){this.config=X}toString(){let{config:X}=this,Y=X.provider.fromEnvVar?`env("${X.provider.fromEnvVar}")`:X.provider.value,$=JSON.parse(JSON.stringify({provider:Y,binaryTargets:yO(X.binaryTargets)}));return`generator ${X.name} {
${TO.default(dO($),2)}
}`}};function yO(X){let Y;if(X.length>0){let $=X.find((Z)=>Z.fromEnvVar!==null);$?Y=`env("${$.fromEnvVar}")`:Y=X.map((Z)=>Z.native?"native":Z.value)}else Y=void 0;return Y}function dO(X){let Y=Object.keys(X).reduce(($,Z)=>Math.max($,Z.length),0);return Object.entries(X).map(([$,Z])=>`${$.padEnd(Y)} = ${vO(Z)}`).join(`
`)}function vO(X){return JSON.parse(JSON.stringify(X,(Y,$)=>Array.isArray($)?`[${$.map((Z)=>JSON.stringify(Z)).join(", ")}]`:JSON.stringify($)))}var AX={};o4(AX,{error:()=>mO,info:()=>hO,log:()=>pO,query:()=>cO,should:()=>FW,tags:()=>t4,warn:()=>CW});var t4={error:U2("prisma:error"),warn:s4("prisma:warn"),info:B2("prisma:info"),query:T4("prisma:query")},FW={warn:()=>!process.env.PRISMA_DISABLE_WARNINGS};function pO(...X){console.log(...X)}function CW(X,...Y){FW.warn()&&console.warn(`${t4.warn} ${X}`,...Y)}function hO(X,...Y){console.info(`${t4.info} ${X}`,...Y)}function mO(X,...Y){console.error(`${t4.error} ${X}`,...Y)}function cO(X,...Y){console.log(`${t4.query} ${X}`,...Y)}function LQ(X,Y){if(!X)throw new Error(`${Y}. This should never happen. If you see this error, please, open an issue at https://pris.ly/prisma-prisma-bug-report`)}function $9(X,Y){throw new Error(Y)}function uO(X,Y){return Object.prototype.hasOwnProperty.call(X,Y)}var iO=(X,Y)=>X.reduce(($,Z)=>($[Y(Z)]=Z,$),{});function kX(X,Y){let $={};for(let Z of Object.keys(X))$[Z]=Y(X[Z],Z);return $}function lO(X,Y){if(X.length===0)return;let $=X[0];for(let Z=1;Z<X.length;Z++)Y($,X[Z])<0&&($=X[Z]);return $}function i0(X,Y){Object.defineProperty(X,"name",{value:Y,configurable:!0})}var PQ=new Set,RW=(X,Y,...$)=>{PQ.has(X)||(PQ.add(X),CW(Y,...$))},a8=class extends Error{constructor(X,{code:Y,clientVersion:$,meta:Z,batchRequestIdx:Q}){super(X),this.name="PrismaClientKnownRequestError",this.code=Y,this.clientVersion=$,this.meta=Z,Object.defineProperty(this,"batchRequestIdx",{value:Q,enumerable:!1,writable:!0})}get[Symbol.toStringTag](){return"PrismaClientKnownRequestError"}};i0(a8,"PrismaClientKnownRequestError");var Z9=class extends a8{constructor(X,Y){super(X,{code:"P2025",clientVersion:Y}),this.name="NotFoundError"}};i0(Z9,"NotFoundError");var r0=class X extends Error{constructor(Y,$,Z){super(Y),this.name="PrismaClientInitializationError",this.clientVersion=$,this.errorCode=Z,Error.captureStackTrace(X)}get[Symbol.toStringTag](){return"PrismaClientInitializationError"}};i0(r0,"PrismaClientInitializationError");var g6=class extends Error{constructor(X,Y){super(X),this.name="PrismaClientRustPanicError",this.clientVersion=Y}get[Symbol.toStringTag](){return"PrismaClientRustPanicError"}};i0(g6,"PrismaClientRustPanicError");var A8=class extends Error{constructor(X,{clientVersion:Y,batchRequestIdx:$}){super(X),this.name="PrismaClientUnknownRequestError",this.clientVersion=Y,Object.defineProperty(this,"batchRequestIdx",{value:$,writable:!0,enumerable:!1})}get[Symbol.toStringTag](){return"PrismaClientUnknownRequestError"}};i0(A8,"PrismaClientUnknownRequestError");var K8=class extends Error{constructor(X,{clientVersion:Y}){super(X);this.name="PrismaClientValidationError",this.clientVersion=Y}get[Symbol.toStringTag](){return"PrismaClientValidationError"}};i0(K8,"PrismaClientValidationError");var V2=9000000000000000,d6=1e9,wX="0123456789abcdef",l7="2.3025850929940456840179914546843642076011014886287729760333279009675726096773524802359972050895982983419677840422862486334095254650828067566662873690987816894829072083255546808437998948262331985283935053089653777326288461633662222876982198867465436674744042432743651550489343149393914796194044002221051017141748003688084012647080685567743216228355220114804663715659121373450747856947683463616792101806445070648000277502684916746550586856935673420670581136429224554405758925724208241314695689016758940256776311356919292033376587141660230105703089634572075440370847469940168269282808481184289314848524948644871927809676271275775397027668605952496716674183485704422507197965004714951050492214776567636938662976979522110718264549734772662425709429322582798502585509785265383207606726317164309505995087807523710333101197857547331541421808427543863591778117054309827482385045648019095610299291824318237525357709750539565187697510374970888692180205189339507238539205144634197265287286965110862571492198849978748873771345686209167058",o7="3.1415926535897932384626433832795028841971693993751058209749445923078164062862089986280348253421170679821480865132823066470938446095505822317253594081284811174502841027019385211055596446229489549303819644288109756659334461284756482337867831652712019091456485669234603486104543266482133936072602491412737245870066063155881748815209209628292540917153643678925903600113305305488204665213841469519415116094330572703657595919530921861173819326117931051185480744623799627495673518857527248912279381830119491298336733624406566430860213949463952247371907021798609437027705392171762931767523846748184676694051320005681271452635608277857713427577896091736371787214684409012249534301465495853710507922796892589235420199561121290219608640344181598136297747713099605187072113499999983729780499510597317328160963185950244594553469083026425223082533446850352619311881710100031378387528865875332083814206171776691473035982534904287554687311595628638823537875937519577818577805321712268066130019278766111959092164201989380952572010654858632789",HX={precision:20,rounding:4,modulo:1,toExpNeg:-7,toExpPos:21,minE:-V2,maxE:V2,crypto:!1},KW,O6,o=!0,Q9="[DecimalError] ",y6=Q9+"Invalid argument: ",jW=Q9+"Precision limit exceeded",bW=Q9+"crypto unavailable",VW="[object Decimal]",_1=Math.floor,z1=Math.pow,oO=/^0b([01]+(\.[01]*)?|\.[01]+)(p[+-]?\d+)?$/i,nO=/^0x([0-9a-f]+(\.[0-9a-f]*)?|\.[0-9a-f]+)(p[+-]?\d+)?$/i,sO=/^0o([0-7]+(\.[0-7]*)?|\.[0-7]+)(p[+-]?\d+)?$/i,EW=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,V8=1e7,c=7,tO=9007199254740991,rO=l7.length-1,qX=o7.length-1,j={toStringTag:VW};j.absoluteValue=j.abs=function(){var X=new this.constructor(this);return X.s<0&&(X.s=1),m(X)};j.ceil=function(){return m(new this.constructor(this),this.e+1,2)};j.clampedTo=j.clamp=function(X,Y){var $,Z=this,Q=Z.constructor;if(X=new Q(X),Y=new Q(Y),!X.s||!Y.s)return new Q(NaN);if(X.gt(Y))throw Error(y6+Y);return $=Z.cmp(X),$<0?X:Z.cmp(Y)>0?Y:new Q(Z)};j.comparedTo=j.cmp=function(X){var Y,$,Z,Q,W=this,J=W.d,z=(X=new W.constructor(X)).d,M=W.s,B=X.s;if(!J||!z)return!M||!B?NaN:M!==B?M:J===z?0:!J^M<0?1:-1;if(!J[0]||!z[0])return J[0]?M:z[0]?-B:0;if(M!==B)return M;if(W.e!==X.e)return W.e>X.e^M<0?1:-1;for(Z=J.length,Q=z.length,Y=0,$=Z<Q?Z:Q;Y<$;++Y)if(J[Y]!==z[Y])return J[Y]>z[Y]^M<0?1:-1;return Z===Q?0:Z>Q^M<0?1:-1};j.cosine=j.cos=function(){var X,Y,$=this,Z=$.constructor;return $.d?$.d[0]?(X=Z.precision,Y=Z.rounding,Z.precision=X+Math.max($.e,$.sd())+c,Z.rounding=1,$=aO(Z,gW(Z,$)),Z.precision=X,Z.rounding=Y,m(O6==2||O6==3?$.neg():$,X,Y,!0)):new Z(1):new Z(NaN)};j.cubeRoot=j.cbrt=function(){var X,Y,$,Z,Q,W,J,z,M,B,U=this,A=U.constructor;if(!U.isFinite()||U.isZero())return new A(U);for(o=!1,W=U.s*z1(U.s*U,0.3333333333333333),!W||Math.abs(W)==1/0?($=q1(U.d),X=U.e,(W=(X-$.length+1)%3)&&($+=W==1||W==-2?"0":"00"),W=z1($,0.3333333333333333),X=_1((X+1)/3)-(X%3==(X<0?-1:2)),W==1/0?$="5e"+X:($=W.toExponential(),$=$.slice(0,$.indexOf("e")+1)+X),Z=new A($),Z.s=U.s):Z=new A(W.toString()),J=(X=A.precision)+3;;)if(z=Z,M=z.times(z).times(z),B=M.plus(U),Z=K0(B.plus(U).times(z),B.plus(M),J+2,1),q1(z.d).slice(0,J)===($=q1(Z.d)).slice(0,J))if($=$.slice(J-3,J+1),$=="9999"||!Q&&$=="4999"){if(!Q&&(m(z,X+1,0),z.times(z).times(z).eq(U))){Z=z;break}J+=4,Q=1}else{(!+$||!+$.slice(1)&&$.charAt(0)=="5")&&(m(Z,X+1,1),Y=!Z.times(Z).times(Z).eq(U));break}return o=!0,m(Z,X,A.rounding,Y)};j.decimalPlaces=j.dp=function(){var X,Y=this.d,$=NaN;if(Y){if(X=Y.length-1,$=(X-_1(this.e/c))*c,X=Y[X],X)for(;X%10==0;X/=10)$--;$<0&&($=0)}return $};j.dividedBy=j.div=function(X){return K0(this,new this.constructor(X))};j.dividedToIntegerBy=j.divToInt=function(X){var Y=this,$=Y.constructor;return m(K0(Y,new $(X),0,1,1),$.precision,$.rounding)};j.equals=j.eq=function(X){return this.cmp(X)===0};j.floor=function(){return m(new this.constructor(this),this.e+1,3)};j.greaterThan=j.gt=function(X){return this.cmp(X)>0};j.greaterThanOrEqualTo=j.gte=function(X){var Y=this.cmp(X);return Y==1||Y===0};j.hyperbolicCosine=j.cosh=function(){var X,Y,$,Z,Q,W=this,J=W.constructor,z=new J(1);if(!W.isFinite())return new J(W.s?1/0:NaN);if(W.isZero())return z;$=J.precision,Z=J.rounding,J.precision=$+Math.max(W.e,W.sd())+4,J.rounding=1,Q=W.d.length,Q<32?(X=Math.ceil(Q/3),Y=(1/J9(4,X)).toString()):(X=16,Y="2.3283064365386962890625e-10"),W=E2(J,1,W.times(Y),new J(1),!0);for(var M,B=X,U=new J(8);B--;)M=W.times(W),W=z.minus(M.times(U.minus(M.times(U))));return m(W,J.precision=$,J.rounding=Z,!0)};j.hyperbolicSine=j.sinh=function(){var X,Y,$,Z,Q=this,W=Q.constructor;if(!Q.isFinite()||Q.isZero())return new W(Q);if(Y=W.precision,$=W.rounding,W.precision=Y+Math.max(Q.e,Q.sd())+4,W.rounding=1,Z=Q.d.length,Z<3)Q=E2(W,2,Q,Q,!0);else{X=1.4*Math.sqrt(Z),X=X>16?16:X|0,Q=Q.times(1/J9(5,X)),Q=E2(W,2,Q,Q,!0);for(var J,z=new W(5),M=new W(16),B=new W(20);X--;)J=Q.times(Q),Q=Q.times(z.plus(J.times(M.times(J).plus(B))))}return W.precision=Y,W.rounding=$,m(Q,Y,$,!0)};j.hyperbolicTangent=j.tanh=function(){var X,Y,$=this,Z=$.constructor;return $.isFinite()?$.isZero()?new Z($):(X=Z.precision,Y=Z.rounding,Z.precision=X+7,Z.rounding=1,K0($.sinh(),$.cosh(),Z.precision=X,Z.rounding=Y)):new Z($.s)};j.inverseCosine=j.acos=function(){var X,Y=this,$=Y.constructor,Z=Y.abs().cmp(1),Q=$.precision,W=$.rounding;return Z!==-1?Z===0?Y.isNeg()?j8($,Q,W):new $(0):new $(NaN):Y.isZero()?j8($,Q+4,W).times(0.5):($.precision=Q+6,$.rounding=1,Y=Y.asin(),X=j8($,Q+4,W).times(0.5),$.precision=Q,$.rounding=W,X.minus(Y))};j.inverseHyperbolicCosine=j.acosh=function(){var X,Y,$=this,Z=$.constructor;return $.lte(1)?new Z($.eq(1)?0:NaN):$.isFinite()?(X=Z.precision,Y=Z.rounding,Z.precision=X+Math.max(Math.abs($.e),$.sd())+4,Z.rounding=1,o=!1,$=$.times($).minus(1).sqrt().plus($),o=!0,Z.precision=X,Z.rounding=Y,$.ln()):new Z($)};j.inverseHyperbolicSine=j.asinh=function(){var X,Y,$=this,Z=$.constructor;return!$.isFinite()||$.isZero()?new Z($):(X=Z.precision,Y=Z.rounding,Z.precision=X+2*Math.max(Math.abs($.e),$.sd())+6,Z.rounding=1,o=!1,$=$.times($).plus(1).sqrt().plus($),o=!0,Z.precision=X,Z.rounding=Y,$.ln())};j.inverseHyperbolicTangent=j.atanh=function(){var X,Y,$,Z,Q=this,W=Q.constructor;return Q.isFinite()?Q.e>=0?new W(Q.abs().eq(1)?Q.s/0:Q.isZero()?Q:NaN):(X=W.precision,Y=W.rounding,Z=Q.sd(),Math.max(Z,X)<2*-Q.e-1?m(new W(Q),X,Y,!0):(W.precision=$=Z-Q.e,Q=K0(Q.plus(1),new W(1).minus(Q),$+X,1),W.precision=X+4,W.rounding=1,Q=Q.ln(),W.precision=X,W.rounding=Y,Q.times(0.5))):new W(NaN)};j.inverseSine=j.asin=function(){var X,Y,$,Z,Q=this,W=Q.constructor;return Q.isZero()?new W(Q):(Y=Q.abs().cmp(1),$=W.precision,Z=W.rounding,Y!==-1?Y===0?(X=j8(W,$+4,Z).times(0.5),X.s=Q.s,X):new W(NaN):(W.precision=$+6,W.rounding=1,Q=Q.div(new W(1).minus(Q.times(Q)).sqrt().plus(1)).atan(),W.precision=$,W.rounding=Z,Q.times(2)))};j.inverseTangent=j.atan=function(){var X,Y,$,Z,Q,W,J,z,M,B=this,U=B.constructor,A=U.precision,w=U.rounding;if(B.isFinite()){if(B.isZero())return new U(B);if(B.abs().eq(1)&&A+4<=qX)return J=j8(U,A+4,w).times(0.25),J.s=B.s,J}else{if(!B.s)return new U(NaN);if(A+4<=qX)return J=j8(U,A+4,w).times(0.5),J.s=B.s,J}for(U.precision=z=A+10,U.rounding=1,$=Math.min(28,z/c+2|0),X=$;X;--X)B=B.div(B.times(B).plus(1).sqrt().plus(1));for(o=!1,Y=Math.ceil(z/c),Z=1,M=B.times(B),J=new U(B),Q=B;X!==-1;)if(Q=Q.times(M),W=J.minus(Q.div(Z+=2)),Q=Q.times(M),J=W.plus(Q.div(Z+=2)),J.d[Y]!==void 0)for(X=Y;J.d[X]===W.d[X]&&X--;);return $&&(J=J.times(2<<$-1)),o=!0,m(J,U.precision=A,U.rounding=w,!0)};j.isFinite=function(){return!!this.d};j.isInteger=j.isInt=function(){return!!this.d&&_1(this.e/c)>this.d.length-2};j.isNaN=function(){return!this.s};j.isNegative=j.isNeg=function(){return this.s<0};j.isPositive=j.isPos=function(){return this.s>0};j.isZero=function(){return!!this.d&&this.d[0]===0};j.lessThan=j.lt=function(X){return this.cmp(X)<0};j.lessThanOrEqualTo=j.lte=function(X){return this.cmp(X)<1};j.logarithm=j.log=function(X){var Y,$,Z,Q,W,J,z,M,B=this,U=B.constructor,A=U.precision,w=U.rounding,G=5;if(X==null)X=new U(10),Y=!0;else{if(X=new U(X),$=X.d,X.s<0||!$||!$[0]||X.eq(1))return new U(NaN);Y=X.eq(10)}if($=B.d,B.s<0||!$||!$[0]||B.eq(1))return new U($&&!$[0]?-1/0:B.s!=1?NaN:$?0:1/0);if(Y)if($.length>1)W=!0;else{for(Q=$[0];Q%10===0;)Q/=10;W=Q!==1}if(o=!1,z=A+G,J=T6(B,z),Z=Y?n7(U,z+10):T6(X,z),M=K0(J,Z,z,1),u4(M.d,Q=A,w))do if(z+=10,J=T6(B,z),Z=Y?n7(U,z+10):T6(X,z),M=K0(J,Z,z,1),!W){+q1(M.d).slice(Q+1,Q+15)+1==100000000000000&&(M=m(M,A+1,0));break}while(u4(M.d,Q+=10,w));return o=!0,m(M,A,w)};j.minus=j.sub=function(X){var Y,$,Z,Q,W,J,z,M,B,U,A,w,G=this,H=G.constructor;if(X=new H(X),!G.d||!X.d)return!G.s||!X.s?X=new H(NaN):G.d?X.s=-X.s:X=new H(X.d||G.s!==X.s?G:NaN),X;if(G.s!=X.s)return X.s=-X.s,G.plus(X);if(B=G.d,w=X.d,z=H.precision,M=H.rounding,!B[0]||!w[0]){if(w[0])X.s=-X.s;else if(B[0])X=new H(G);else return new H(M===3?-0:0);return o?m(X,z,M):X}if($=_1(X.e/c),U=_1(G.e/c),B=B.slice(),W=U-$,W){for(A=W<0,A?(Y=B,W=-W,J=w.length):(Y=w,$=U,J=B.length),Z=Math.max(Math.ceil(z/c),J)+2,W>Z&&(W=Z,Y.length=1),Y.reverse(),Z=W;Z--;)Y.push(0);Y.reverse()}else{for(Z=B.length,J=w.length,A=Z<J,A&&(J=Z),Z=0;Z<J;Z++)if(B[Z]!=w[Z]){A=B[Z]<w[Z];break}W=0}for(A&&(Y=B,B=w,w=Y,X.s=-X.s),J=B.length,Z=w.length-J;Z>0;--Z)B[J++]=0;for(Z=w.length;Z>W;){if(B[--Z]<w[Z]){for(Q=Z;Q&&B[--Q]===0;)B[Q]=V8-1;--B[Q],B[Z]+=V8}B[Z]-=w[Z]}for(;B[--J]===0;)B.pop();for(;B[0]===0;B.shift())--$;return B[0]?(X.d=B,X.e=W9(B,$),o?m(X,z,M):X):new H(M===3?-0:0)};j.modulo=j.mod=function(X){var Y,$=this,Z=$.constructor;return X=new Z(X),!$.d||!X.s||X.d&&!X.d[0]?new Z(NaN):!X.d||$.d&&!$.d[0]?m(new Z($),Z.precision,Z.rounding):(o=!1,Z.modulo==9?(Y=K0($,X.abs(),0,3,1),Y.s*=X.s):Y=K0($,X,0,Z.modulo,1),Y=Y.times(X),o=!0,$.minus(Y))};j.naturalExponential=j.exp=function(){return NX(this)};j.naturalLogarithm=j.ln=function(){return T6(this)};j.negated=j.neg=function(){var X=new this.constructor(this);return X.s=-X.s,m(X)};j.plus=j.add=function(X){var Y,$,Z,Q,W,J,z,M,B,U,A=this,w=A.constructor;if(X=new w(X),!A.d||!X.d)return!A.s||!X.s?X=new w(NaN):A.d||(X=new w(X.d||A.s===X.s?A:NaN)),X;if(A.s!=X.s)return X.s=-X.s,A.minus(X);if(B=A.d,U=X.d,z=w.precision,M=w.rounding,!B[0]||!U[0])return U[0]||(X=new w(A)),o?m(X,z,M):X;if(W=_1(A.e/c),Z=_1(X.e/c),B=B.slice(),Q=W-Z,Q){for(Q<0?($=B,Q=-Q,J=U.length):($=U,Z=W,J=B.length),W=Math.ceil(z/c),J=W>J?W+1:J+1,Q>J&&(Q=J,$.length=1),$.reverse();Q--;)$.push(0);$.reverse()}for(J=B.length,Q=U.length,J-Q<0&&(Q=J,$=U,U=B,B=$),Y=0;Q;)Y=(B[--Q]=B[Q]+U[Q]+Y)/V8|0,B[Q]%=V8;for(Y&&(B.unshift(Y),++Z),J=B.length;B[--J]==0;)B.pop();return X.d=B,X.e=W9(B,Z),o?m(X,z,M):X};j.precision=j.sd=function(X){var Y,$=this;if(X!==void 0&&X!==!!X&&X!==1&&X!==0)throw Error(y6+X);return $.d?(Y=IW($.d),X&&$.e+1>Y&&(Y=$.e+1)):Y=NaN,Y};j.round=function(){var X=this,Y=X.constructor;return m(new Y(X),X.e+1,Y.rounding)};j.sine=j.sin=function(){var X,Y,$=this,Z=$.constructor;return $.isFinite()?$.isZero()?new Z($):(X=Z.precision,Y=Z.rounding,Z.precision=X+Math.max($.e,$.sd())+c,Z.rounding=1,$=XL(Z,gW(Z,$)),Z.precision=X,Z.rounding=Y,m(O6>2?$.neg():$,X,Y,!0)):new Z(NaN)};j.squareRoot=j.sqrt=function(){var X,Y,$,Z,Q,W,J=this,z=J.d,M=J.e,B=J.s,U=J.constructor;if(B!==1||!z||!z[0])return new U(!B||B<0&&(!z||z[0])?NaN:z?J:1/0);for(o=!1,B=Math.sqrt(+J),B==0||B==1/0?(Y=q1(z),(Y.length+M)%2==0&&(Y+="0"),B=Math.sqrt(Y),M=_1((M+1)/2)-(M<0||M%2),B==1/0?Y="5e"+M:(Y=B.toExponential(),Y=Y.slice(0,Y.indexOf("e")+1)+M),Z=new U(Y)):Z=new U(B.toString()),$=(M=U.precision)+3;;)if(W=Z,Z=W.plus(K0(J,W,$+2,1)).times(0.5),q1(W.d).slice(0,$)===(Y=q1(Z.d)).slice(0,$))if(Y=Y.slice($-3,$+1),Y=="9999"||!Q&&Y=="4999"){if(!Q&&(m(W,M+1,0),W.times(W).eq(J))){Z=W;break}$+=4,Q=1}else{(!+Y||!+Y.slice(1)&&Y.charAt(0)=="5")&&(m(Z,M+1,1),X=!Z.times(Z).eq(J));break}return o=!0,m(Z,M,U.rounding,X)};j.tangent=j.tan=function(){var X,Y,$=this,Z=$.constructor;return $.isFinite()?$.isZero()?new Z($):(X=Z.precision,Y=Z.rounding,Z.precision=X+10,Z.rounding=1,$=$.sin(),$.s=1,$=K0($,new Z(1).minus($.times($)).sqrt(),X+10,0),Z.precision=X,Z.rounding=Y,m(O6==2||O6==4?$.neg():$,X,Y,!0)):new Z(NaN)};j.times=j.mul=function(X){var Y,$,Z,Q,W,J,z,M,B,U=this,A=U.constructor,w=U.d,G=(X=new A(X)).d;if(X.s*=U.s,!w||!w[0]||!G||!G[0])return new A(!X.s||w&&!w[0]&&!G||G&&!G[0]&&!w?NaN:!w||!G?X.s/0:X.s*0);for($=_1(U.e/c)+_1(X.e/c),M=w.length,B=G.length,M<B&&(W=w,w=G,G=W,J=M,M=B,B=J),W=[],J=M+B,Z=J;Z--;)W.push(0);for(Z=B;--Z>=0;){for(Y=0,Q=M+Z;Q>Z;)z=W[Q]+G[Z]*w[Q-Z-1]+Y,W[Q--]=z%V8|0,Y=z/V8|0;W[Q]=(W[Q]+Y)%V8|0}for(;!W[--J];)W.pop();return Y?++$:W.shift(),X.d=W,X.e=W9(W,$),o?m(X,A.precision,A.rounding):X};j.toBinary=function(X,Y){return TX(this,2,X,Y)};j.toDecimalPlaces=j.toDP=function(X,Y){var $=this,Z=$.constructor;return $=new Z($),X===void 0?$:(v1(X,0,d6),Y===void 0?Y=Z.rounding:v1(Y,0,8),m($,X+$.e+1,Y))};j.toExponential=function(X,Y){var $,Z=this,Q=Z.constructor;return X===void 0?$=e8(Z,!0):(v1(X,0,d6),Y===void 0?Y=Q.rounding:v1(Y,0,8),Z=m(new Q(Z),X+1,Y),$=e8(Z,!0,X+1)),Z.isNeg()&&!Z.isZero()?"-"+$:$};j.toFixed=function(X,Y){var $,Z,Q=this,W=Q.constructor;return X===void 0?$=e8(Q):(v1(X,0,d6),Y===void 0?Y=W.rounding:v1(Y,0,8),Z=m(new W(Q),X+Q.e+1,Y),$=e8(Z,!1,X+Z.e+1)),Q.isNeg()&&!Q.isZero()?"-"+$:$};j.toFraction=function(X){var Y,$,Z,Q,W,J,z,M,B,U,A,w,G=this,H=G.d,q=G.constructor;if(!H)return new q(G);if(B=$=new q(1),Z=M=new q(0),Y=new q(Z),W=Y.e=IW(H)-G.e-1,J=W%c,Y.d[0]=z1(10,J<0?c+J:J),X==null)X=W>0?Y:B;else{if(z=new q(X),!z.isInt()||z.lt(B))throw Error(y6+z);X=z.gt(Y)?W>0?Y:B:z}for(o=!1,z=new q(q1(H)),U=q.precision,q.precision=W=H.length*c*2;A=K0(z,Y,0,1,1),Q=$.plus(A.times(Z)),Q.cmp(X)!=1;)$=Z,Z=Q,Q=B,B=M.plus(A.times(Q)),M=Q,Q=Y,Y=z.minus(A.times(Q)),z=Q;return Q=K0(X.minus($),Z,0,1,1),M=M.plus(Q.times(B)),$=$.plus(Q.times(Z)),M.s=B.s=G.s,w=K0(B,Z,W,1).minus(G).abs().cmp(K0(M,$,W,1).minus(G).abs())<1?[B,Z]:[M,$],q.precision=U,o=!0,w};j.toHexadecimal=j.toHex=function(X,Y){return TX(this,16,X,Y)};j.toNearest=function(X,Y){var $=this,Z=$.constructor;if($=new Z($),X==null){if(!$.d)return $;X=new Z(1),Y=Z.rounding}else{if(X=new Z(X),Y===void 0?Y=Z.rounding:v1(Y,0,8),!$.d)return X.s?$:X;if(!X.d)return X.s&&(X.s=$.s),X}return X.d[0]?(o=!1,$=K0($,X,0,Y,1).times(X),o=!0,m($)):(X.s=$.s,$=X),$};j.toNumber=function(){return+this};j.toOctal=function(X,Y){return TX(this,8,X,Y)};j.toPower=j.pow=function(X){var Y,$,Z,Q,W,J,z=this,M=z.constructor,B=+(X=new M(X));if(!z.d||!X.d||!z.d[0]||!X.d[0])return new M(z1(+z,B));if(z=new M(z),z.eq(1))return z;if(Z=M.precision,W=M.rounding,X.eq(1))return m(z,Z,W);if(Y=_1(X.e/c),Y>=X.d.length-1&&($=B<0?-B:B)<=tO)return Q=xW(M,z,$,Z),X.s<0?new M(1).div(Q):m(Q,Z,W);if(J=z.s,J<0){if(Y<X.d.length-1)return new M(NaN);if(X.d[Y]&1||(J=1),z.e==0&&z.d[0]==1&&z.d.length==1)return z.s=J,z}return $=z1(+z,B),Y=$==0||!isFinite($)?_1(B*(Math.log("0."+q1(z.d))/Math.LN10+z.e+1)):new M($+"").e,Y>M.maxE+1||Y<M.minE-1?new M(Y>0?J/0:0):(o=!1,M.rounding=z.s=1,$=Math.min(12,(Y+"").length),Q=NX(X.times(T6(z,Z+$)),Z),Q.d&&(Q=m(Q,Z+5,1),u4(Q.d,Z,W)&&(Y=Z+10,Q=m(NX(X.times(T6(z,Y+$)),Y),Y+5,1),+q1(Q.d).slice(Z+1,Z+15)+1==100000000000000&&(Q=m(Q,Z+1,0)))),Q.s=J,o=!0,M.rounding=W,m(Q,Z,W))};j.toPrecision=function(X,Y){var $,Z=this,Q=Z.constructor;return X===void 0?$=e8(Z,Z.e<=Q.toExpNeg||Z.e>=Q.toExpPos):(v1(X,1,d6),Y===void 0?Y=Q.rounding:v1(Y,0,8),Z=m(new Q(Z),X,Y),$=e8(Z,X<=Z.e||Z.e<=Q.toExpNeg,X)),Z.isNeg()&&!Z.isZero()?"-"+$:$};j.toSignificantDigits=j.toSD=function(X,Y){var $=this,Z=$.constructor;return X===void 0?(X=Z.precision,Y=Z.rounding):(v1(X,1,d6),Y===void 0?Y=Z.rounding:v1(Y,0,8)),m(new Z($),X,Y)};j.toString=function(){var X=this,Y=X.constructor,$=e8(X,X.e<=Y.toExpNeg||X.e>=Y.toExpPos);return X.isNeg()&&!X.isZero()?"-"+$:$};j.truncated=j.trunc=function(){return m(new this.constructor(this),this.e+1,1)};j.valueOf=j.toJSON=function(){var X=this,Y=X.constructor,$=e8(X,X.e<=Y.toExpNeg||X.e>=Y.toExpPos);return X.isNeg()?"-"+$:$};function q1(X){var Y,$,Z,Q=X.length-1,W="",J=X[0];if(Q>0){for(W+=J,Y=1;Y<Q;Y++)Z=X[Y]+"",$=c-Z.length,$&&(W+=k6($)),W+=Z;J=X[Y],Z=J+"",$=c-Z.length,$&&(W+=k6($))}else if(J===0)return"0";for(;J%10===0;)J/=10;return W+J}function v1(X,Y,$){if(X!==~~X||X<Y||X>$)throw Error(y6+X)}function u4(X,Y,$,Z){var Q,W,J,z;for(W=X[0];W>=10;W/=10)--Y;return--Y<0?(Y+=c,Q=0):(Q=Math.ceil((Y+1)/c),Y%=c),W=z1(10,c-Y),z=X[Q]%W|0,Z==null?Y<3?(Y==0?z=z/100|0:Y==1&&(z=z/10|0),J=$<4&&z==99999||$>3&&z==49999||z==50000||z==0):J=($<4&&z+1==W||$>3&&z+1==W/2)&&(X[Q+1]/W/100|0)==z1(10,Y-2)-1||(z==W/2||z==0)&&(X[Q+1]/W/100|0)==0:Y<4?(Y==0?z=z/1000|0:Y==1?z=z/100|0:Y==2&&(z=z/10|0),J=(Z||$<4)&&z==9999||!Z&&$>3&&z==4999):J=((Z||$<4)&&z+1==W||!Z&&$>3&&z+1==W/2)&&(X[Q+1]/W/1000|0)==z1(10,Y-3)-1,J}function p7(X,Y,$){for(var Z,Q=[0],W,J=0,z=X.length;J<z;){for(W=Q.length;W--;)Q[W]*=Y;for(Q[0]+=wX.indexOf(X.charAt(J++)),Z=0;Z<Q.length;Z++)Q[Z]>$-1&&(Q[Z+1]===void 0&&(Q[Z+1]=0),Q[Z+1]+=Q[Z]/$|0,Q[Z]%=$)}return Q.reverse()}function aO(X,Y){var $,Z,Q;if(Y.isZero())return Y;Z=Y.d.length,Z<32?($=Math.ceil(Z/3),Q=(1/J9(4,$)).toString()):($=16,Q="2.3283064365386962890625e-10"),X.precision+=$,Y=E2(X,1,Y.times(Q),new X(1));for(var W=$;W--;){var J=Y.times(Y);Y=J.times(J).minus(J).times(8).plus(1)}return X.precision-=$,Y}var K0=function(){function X(Z,Q,W){var J,z=0,M=Z.length;for(Z=Z.slice();M--;)J=Z[M]*Q+z,Z[M]=J%W|0,z=J/W|0;return z&&Z.unshift(z),Z}function Y(Z,Q,W,J){var z,M;if(W!=J)M=W>J?1:-1;else for(z=M=0;z<W;z++)if(Z[z]!=Q[z]){M=Z[z]>Q[z]?1:-1;break}return M}function $(Z,Q,W,J){for(var z=0;W--;)Z[W]-=z,z=Z[W]<Q[W]?1:0,Z[W]=z*J+Z[W]-Q[W];for(;!Z[0]&&Z.length>1;)Z.shift()}return function(Z,Q,W,J,z,M){var B,U,A,w,G,H,q,_,R,S,C,d,h,k,x0,T,e,n,H0,e0,X8=Z.constructor,p6=Z.s==Q.s?1:-1,v0=Z.d,t=Q.d;if(!v0||!v0[0]||!t||!t[0])return new X8(!Z.s||!Q.s||(v0?t&&v0[0]==t[0]:!t)?NaN:v0&&v0[0]==0||!t?p6*0:p6/0);for(M?(G=1,U=Z.e-Q.e):(M=V8,G=c,U=_1(Z.e/G)-_1(Q.e/G)),H0=t.length,e=v0.length,R=new X8(p6),S=R.d=[],A=0;t[A]==(v0[A]||0);A++);if(t[A]>(v0[A]||0)&&U--,W==null?(k=W=X8.precision,J=X8.rounding):z?k=W+(Z.e-Q.e)+1:k=W,k<0)S.push(1),H=!0;else{if(k=k/G+2|0,A=0,H0==1){for(w=0,t=t[0],k++;(A<e||w)&&k--;A++)x0=w*M+(v0[A]||0),S[A]=x0/t|0,w=x0%t|0;H=w||A<e}else{for(w=M/(t[0]+1)|0,w>1&&(t=X(t,w,M),v0=X(v0,w,M),H0=t.length,e=v0.length),T=H0,C=v0.slice(0,H0),d=C.length;d<H0;)C[d++]=0;e0=t.slice(),e0.unshift(0),n=t[0],t[1]>=M/2&&++n;do w=0,B=Y(t,C,H0,d),B<0?(h=C[0],H0!=d&&(h=h*M+(C[1]||0)),w=h/n|0,w>1?(w>=M&&(w=M-1),q=X(t,w,M),_=q.length,d=C.length,B=Y(q,C,_,d),B==1&&(w--,$(q,H0<_?e0:t,_,M))):(w==0&&(B=w=1),q=t.slice()),_=q.length,_<d&&q.unshift(0),$(C,q,d,M),B==-1&&(d=C.length,B=Y(t,C,H0,d),B<1&&(w++,$(C,H0<d?e0:t,d,M))),d=C.length):B===0&&(w++,C=[0]),S[A++]=w,B&&C[0]?C[d++]=v0[T]||0:(C=[v0[T]],d=1);while((T++<e||C[0]!==void 0)&&k--);H=C[0]!==void 0}S[0]||S.shift()}if(G==1)R.e=U,KW=H;else{for(A=1,w=S[0];w>=10;w/=10)A++;R.e=A+U*G-1,m(R,z?W+R.e+1:W,J,H)}return R}}();function m(X,Y,$,Z){var Q,W,J,z,M,B,U,A,w,G=X.constructor;X:if(Y!=null){if(A=X.d,!A)return X;for(Q=1,z=A[0];z>=10;z/=10)Q++;if(W=Y-Q,W<0)W+=c,J=Y,U=A[w=0],M=U/z1(10,Q-J-1)%10|0;else if(w=Math.ceil((W+1)/c),z=A.length,w>=z)if(Z){for(;z++<=w;)A.push(0);U=M=0,Q=1,W%=c,J=W-c+1}else break X;else{for(U=z=A[w],Q=1;z>=10;z/=10)Q++;W%=c,J=W-c+Q,M=J<0?0:U/z1(10,Q-J-1)%10|0}if(Z=Z||Y<0||A[w+1]!==void 0||(J<0?U:U%z1(10,Q-J-1)),B=$<4?(M||Z)&&($==0||$==(X.s<0?3:2)):M>5||M==5&&($==4||Z||$==6&&(W>0?J>0?U/z1(10,Q-J):0:A[w-1])%10&1||$==(X.s<0?8:7)),Y<1||!A[0])return A.length=0,B?(Y-=X.e+1,A[0]=z1(10,(c-Y%c)%c),X.e=-Y||0):A[0]=X.e=0,X;if(W==0?(A.length=w,z=1,w--):(A.length=w+1,z=z1(10,c-W),A[w]=J>0?(U/z1(10,Q-J)%z1(10,J)|0)*z:0),B)for(;;)if(w==0){for(W=1,J=A[0];J>=10;J/=10)W++;for(J=A[0]+=z,z=1;J>=10;J/=10)z++;W!=z&&(X.e++,A[0]==V8&&(A[0]=1));break}else{if(A[w]+=z,A[w]!=V8)break;A[w--]=0,z=1}for(W=A.length;A[--W]===0;)A.pop()}return o&&(X.e>G.maxE?(X.d=null,X.e=NaN):X.e<G.minE&&(X.e=0,X.d=[0])),X}function e8(X,Y,$){if(!X.isFinite())return TW(X);var Z,Q=X.e,W=q1(X.d),J=W.length;return Y?($&&(Z=$-J)>0?W=W.charAt(0)+"."+W.slice(1)+k6(Z):J>1&&(W=W.charAt(0)+"."+W.slice(1)),W=W+(X.e<0?"e":"e+")+X.e):Q<0?(W="0."+k6(-Q-1)+W,$&&(Z=$-J)>0&&(W+=k6(Z))):Q>=J?(W+=k6(Q+1-J),$&&(Z=$-Q-1)>0&&(W=W+"."+k6(Z))):((Z=Q+1)<J&&(W=W.slice(0,Z)+"."+W.slice(Z)),$&&(Z=$-J)>0&&(Q+1===J&&(W+="."),W+=k6(Z))),W}function W9(X,Y){var $=X[0];for(Y*=c;$>=10;$/=10)Y++;return Y}function n7(X,Y,$){if(Y>rO)throw o=!0,$&&(X.precision=$),Error(jW);return m(new X(l7),Y,1,!0)}function j8(X,Y,$){if(Y>qX)throw Error(jW);return m(new X(o7),Y,$,!0)}function IW(X){var Y=X.length-1,$=Y*c+1;if(Y=X[Y],Y){for(;Y%10==0;Y/=10)$--;for(Y=X[0];Y>=10;Y/=10)$++}return $}function k6(X){for(var Y="";X--;)Y+="0";return Y}function xW(X,Y,$,Z){var Q,W=new X(1),J=Math.ceil(Z/c+4);for(o=!1;;){if($%2&&(W=W.times(Y),_Q(W.d,J)&&(Q=!0)),$=_1($/2),$===0){$=W.d.length-1,Q&&W.d[$]===0&&++W.d[$];break}Y=Y.times(Y),_Q(Y.d,J)}return o=!0,W}function SQ(X){return X.d[X.d.length-1]&1}function kW(X,Y,$){for(var Z,Q=new X(Y[0]),W=0;++W<Y.length;)if(Z=new X(Y[W]),Z.s)Q[$](Z)&&(Q=Z);else{Q=Z;break}return Q}function NX(X,Y){var $,Z,Q,W,J,z,M,B=0,U=0,A=0,w=X.constructor,G=w.rounding,H=w.precision;if(!X.d||!X.d[0]||X.e>17)return new w(X.d?X.d[0]?X.s<0?0:1/0:1:X.s?X.s<0?0:X:NaN);for(Y==null?(o=!1,M=H):M=Y,z=new w(0.03125);X.e>-2;)X=X.times(z),A+=5;for(Z=Math.log(z1(2,A))/Math.LN10*2+5|0,M+=Z,$=W=J=new w(1),w.precision=M;;){if(W=m(W.times(X),M,1),$=$.times(++U),z=J.plus(K0(W,$,M,1)),q1(z.d).slice(0,M)===q1(J.d).slice(0,M)){for(Q=A;Q--;)J=m(J.times(J),M,1);if(Y==null)if(B<3&&u4(J.d,M-Z,G,B))w.precision=M+=10,$=W=z=new w(1),U=0,B++;else return m(J,w.precision=H,G,o=!0);else return w.precision=H,J}J=z}}function T6(X,Y){var $,Z,Q,W,J,z,M,B,U,A,w,G=1,H=10,q=X,_=q.d,R=q.constructor,S=R.rounding,C=R.precision;if(q.s<0||!_||!_[0]||!q.e&&_[0]==1&&_.length==1)return new R(_&&!_[0]?-1/0:q.s!=1?NaN:_?0:q);if(Y==null?(o=!1,U=C):U=Y,R.precision=U+=H,$=q1(_),Z=$.charAt(0),Math.abs(W=q.e)<1500000000000000){for(;Z<7&&Z!=1||Z==1&&$.charAt(1)>3;)q=q.times(X),$=q1(q.d),Z=$.charAt(0),G++;W=q.e,Z>1?(q=new R("0."+$),W++):q=new R(Z+"."+$.slice(1))}else return B=n7(R,U+2,C).times(W+""),q=T6(new R(Z+"."+$.slice(1)),U-H).plus(B),R.precision=C,Y==null?m(q,C,S,o=!0):q;for(A=q,M=J=q=K0(q.minus(1),q.plus(1),U,1),w=m(q.times(q),U,1),Q=3;;){if(J=m(J.times(w),U,1),B=M.plus(K0(J,new R(Q),U,1)),q1(B.d).slice(0,U)===q1(M.d).slice(0,U))if(M=M.times(2),W!==0&&(M=M.plus(n7(R,U+2,C).times(W+""))),M=K0(M,new R(G),U,1),Y==null)if(u4(M.d,U-H,S,z))R.precision=U+=H,B=J=q=K0(A.minus(1),A.plus(1),U,1),w=m(q.times(q),U,1),Q=z=1;else return m(M,R.precision=C,S,o=!0);else return R.precision=C,M;M=B,Q+=2}}function TW(X){return String(X.s*X.s/0)}function DX(X,Y){var $,Z,Q;for(($=Y.indexOf("."))>-1&&(Y=Y.replace(".","")),(Z=Y.search(/e/i))>0?($<0&&($=Z),$+=+Y.slice(Z+1),Y=Y.substring(0,Z)):$<0&&($=Y.length),Z=0;Y.charCodeAt(Z)===48;Z++);for(Q=Y.length;Y.charCodeAt(Q-1)===48;--Q);if(Y=Y.slice(Z,Q),Y){if(Q-=Z,X.e=$=$-Z-1,X.d=[],Z=($+1)%c,$<0&&(Z+=c),Z<Q){for(Z&&X.d.push(+Y.slice(0,Z)),Q-=c;Z<Q;)X.d.push(+Y.slice(Z,Z+=c));Y=Y.slice(Z),Z=c-Y.length}else Z-=Q;for(;Z--;)Y+="0";X.d.push(+Y),o&&(X.e>X.constructor.maxE?(X.d=null,X.e=NaN):X.e<X.constructor.minE&&(X.e=0,X.d=[0]))}else X.e=0,X.d=[0];return X}function eO(X,Y){var $,Z,Q,W,J,z,M,B,U;if(Y.indexOf("_")>-1){if(Y=Y.replace(/(\d)_(?=\d)/g,"$1"),EW.test(Y))return DX(X,Y)}else if(Y==="Infinity"||Y==="NaN")return+Y||(X.s=NaN),X.e=NaN,X.d=null,X;if(nO.test(Y))$=16,Y=Y.toLowerCase();else if(oO.test(Y))$=2;else if(sO.test(Y))$=8;else throw Error(y6+Y);for(W=Y.search(/p/i),W>0?(M=+Y.slice(W+1),Y=Y.substring(2,W)):Y=Y.slice(2),W=Y.indexOf("."),J=W>=0,Z=X.constructor,J&&(Y=Y.replace(".",""),z=Y.length,W=z-W,Q=xW(Z,new Z($),W,W*2)),B=p7(Y,$,V8),U=B.length-1,W=U;B[W]===0;--W)B.pop();return W<0?new Z(X.s*0):(X.e=W9(B,U),X.d=B,o=!1,J&&(X=K0(X,Q,z*4)),M&&(X=X.times(Math.abs(M)<54?z1(2,M):I2.pow(2,M))),o=!0,X)}function XL(X,Y){var $,Z=Y.d.length;if(Z<3)return Y.isZero()?Y:E2(X,2,Y,Y);$=1.4*Math.sqrt(Z),$=$>16?16:$|0,Y=Y.times(1/J9(5,$)),Y=E2(X,2,Y,Y);for(var Q,W=new X(5),J=new X(16),z=new X(20);$--;)Q=Y.times(Y),Y=Y.times(W.plus(Q.times(J.times(Q).minus(z))));return Y}function E2(X,Y,$,Z,Q){var W,J,z,M,B=1,U=X.precision,A=Math.ceil(U/c);for(o=!1,M=$.times($),z=new X(Z);;){if(J=K0(z.times(M),new X(Y++*Y++),U,1),z=Q?Z.plus(J):Z.minus(J),Z=K0(J.times(M),new X(Y++*Y++),U,1),J=z.plus(Z),J.d[A]!==void 0){for(W=A;J.d[W]===z.d[W]&&W--;);if(W==-1)break}W=z,z=Z,Z=J,J=W,B++}return o=!0,J.d.length=A+1,J}function J9(X,Y){for(var $=X;--Y;)$*=X;return $}function gW(X,Y){var $,Z=Y.s<0,Q=j8(X,X.precision,1),W=Q.times(0.5);if(Y=Y.abs(),Y.lte(W))return O6=Z?4:1,Y;if($=Y.divToInt(Q),$.isZero())O6=Z?3:2;else{if(Y=Y.minus($.times(Q)),Y.lte(W))return O6=SQ($)?Z?2:3:Z?4:1,Y;O6=SQ($)?Z?1:4:Z?3:2}return Y.minus(Q).abs()}function TX(X,Y,$,Z){var Q,W,J,z,M,B,U,A,w,G=X.constructor,H=$!==void 0;if(H?(v1($,1,d6),Z===void 0?Z=G.rounding:v1(Z,0,8)):($=G.precision,Z=G.rounding),!X.isFinite())U=TW(X);else{for(U=e8(X),J=U.indexOf("."),H?(Q=2,Y==16?$=$*4-3:Y==8&&($=$*3-2)):Q=Y,J>=0&&(U=U.replace(".",""),w=new G(1),w.e=U.length-J,w.d=p7(e8(w),10,Q),w.e=w.d.length),A=p7(U,10,Q),W=M=A.length;A[--M]==0;)A.pop();if(!A[0])U=H?"0p+0":"0";else{if(J<0?W--:(X=new G(X),X.d=A,X.e=W,X=K0(X,w,$,Z,0,Q),A=X.d,W=X.e,B=KW),J=A[$],z=Q/2,B=B||A[$+1]!==void 0,B=Z<4?(J!==void 0||B)&&(Z===0||Z===(X.s<0?3:2)):J>z||J===z&&(Z===4||B||Z===6&&A[$-1]&1||Z===(X.s<0?8:7)),A.length=$,B)for(;++A[--$]>Q-1;)A[$]=0,$||(++W,A.unshift(1));for(M=A.length;!A[M-1];--M);for(J=0,U="";J<M;J++)U+=wX.charAt(A[J]);if(H){if(M>1)if(Y==16||Y==8){for(J=Y==16?4:3,--M;M%J;M++)U+="0";for(A=p7(U,Q,Y),M=A.length;!A[M-1];--M);for(J=1,U="1.";J<M;J++)U+=wX.charAt(A[J])}else U=U.charAt(0)+"."+U.slice(1);U=U+(W<0?"p":"p+")+W}else if(W<0){for(;++W;)U="0"+U;U="0."+U}else if(++W>M)for(W-=M;W--;)U+="0";else W<M&&(U=U.slice(0,W)+"."+U.slice(W))}U=(Y==16?"0x":Y==2?"0b":Y==8?"0o":"")+U}return X.s<0?"-"+U:U}function _Q(X,Y){if(X.length>Y)return X.length=Y,!0}function YL(X){return new this(X).abs()}function $L(X){return new this(X).acos()}function ZL(X){return new this(X).acosh()}function QL(X,Y){return new this(X).plus(Y)}function WL(X){return new this(X).asin()}function JL(X){return new this(X).asinh()}function zL(X){return new this(X).atan()}function ML(X){return new this(X).atanh()}function BL(X,Y){X=new this(X),Y=new this(Y);var $,Z=this.precision,Q=this.rounding,W=Z+4;return!X.s||!Y.s?$=new this(NaN):!X.d&&!Y.d?($=j8(this,W,1).times(Y.s>0?0.25:0.75),$.s=X.s):!Y.d||X.isZero()?($=Y.s<0?j8(this,Z,Q):new this(0),$.s=X.s):!X.d||Y.isZero()?($=j8(this,W,1).times(0.5),$.s=X.s):Y.s<0?(this.precision=W,this.rounding=1,$=this.atan(K0(X,Y,W,1)),Y=j8(this,W,1),this.precision=Z,this.rounding=Q,$=X.s<0?$.minus(Y):$.plus(Y)):$=this.atan(K0(X,Y,W,1)),$}function UL(X){return new this(X).cbrt()}function GL(X){return m(X=new this(X),X.e+1,2)}function AL(X,Y,$){return new this(X).clamp(Y,$)}function wL(X){if(!X||typeof X!="object")throw Error(Q9+"Object expected");var Y,$,Z,Q=X.defaults===!0,W=["precision",1,d6,"rounding",0,8,"toExpNeg",-V2,0,"toExpPos",0,V2,"maxE",0,V2,"minE",-V2,0,"modulo",0,9];for(Y=0;Y<W.length;Y+=3)if($=W[Y],Q&&(this[$]=HX[$]),(Z=X[$])!==void 0)if(_1(Z)===Z&&Z>=W[Y+1]&&Z<=W[Y+2])this[$]=Z;else throw Error(y6+$+": "+Z);if($="crypto",Q&&(this[$]=HX[$]),(Z=X[$])!==void 0)if(Z===!0||Z===!1||Z===0||Z===1)if(Z)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))this[$]=!0;else throw Error(bW);else this[$]=!1;else throw Error(y6+$+": "+Z);return this}function HL(X){return new this(X).cos()}function qL(X){return new this(X).cosh()}function fW(X){var Y,$,Z;function Q(W){var J,z,M,B=this;if(!(B instanceof Q))return new Q(W);if(B.constructor=Q,FQ(W)){B.s=W.s,o?!W.d||W.e>Q.maxE?(B.e=NaN,B.d=null):W.e<Q.minE?(B.e=0,B.d=[0]):(B.e=W.e,B.d=W.d.slice()):(B.e=W.e,B.d=W.d?W.d.slice():W.d);return}if(M=typeof W,M==="number"){if(W===0){B.s=1/W<0?-1:1,B.e=0,B.d=[0];return}if(W<0?(W=-W,B.s=-1):B.s=1,W===~~W&&W<1e7){for(J=0,z=W;z>=10;z/=10)J++;o?J>Q.maxE?(B.e=NaN,B.d=null):J<Q.minE?(B.e=0,B.d=[0]):(B.e=J,B.d=[W]):(B.e=J,B.d=[W]);return}else if(W*0!==0){W||(B.s=NaN),B.e=NaN,B.d=null;return}return DX(B,W.toString())}else if(M!=="string")throw Error(y6+W);return(z=W.charCodeAt(0))===45?(W=W.slice(1),B.s=-1):(z===43&&(W=W.slice(1)),B.s=1),EW.test(W)?DX(B,W):eO(B,W)}if(Q.prototype=j,Q.ROUND_UP=0,Q.ROUND_DOWN=1,Q.ROUND_CEIL=2,Q.ROUND_FLOOR=3,Q.ROUND_HALF_UP=4,Q.ROUND_HALF_DOWN=5,Q.ROUND_HALF_EVEN=6,Q.ROUND_HALF_CEIL=7,Q.ROUND_HALF_FLOOR=8,Q.EUCLID=9,Q.config=Q.set=wL,Q.clone=fW,Q.isDecimal=FQ,Q.abs=YL,Q.acos=$L,Q.acosh=ZL,Q.add=QL,Q.asin=WL,Q.asinh=JL,Q.atan=zL,Q.atanh=ML,Q.atan2=BL,Q.cbrt=UL,Q.ceil=GL,Q.clamp=AL,Q.cos=HL,Q.cosh=qL,Q.div=NL,Q.exp=DL,Q.floor=OL,Q.hypot=LL,Q.ln=PL,Q.log=SL,Q.log10=FL,Q.log2=_L,Q.max=CL,Q.min=RL,Q.mod=KL,Q.mul=jL,Q.pow=bL,Q.random=VL,Q.round=EL,Q.sign=IL,Q.sin=xL,Q.sinh=kL,Q.sqrt=TL,Q.sub=gL,Q.sum=fL,Q.tan=yL,Q.tanh=dL,Q.trunc=vL,X===void 0&&(X={}),X&&X.defaults!==!0)for(Z=["precision","rounding","toExpNeg","toExpPos","maxE","minE","modulo","crypto"],Y=0;Y<Z.length;)X.hasOwnProperty($=Z[Y++])||(X[$]=this[$]);return Q.config(X),Q}function NL(X,Y){return new this(X).div(Y)}function DL(X){return new this(X).exp()}function OL(X){return m(X=new this(X),X.e+1,3)}function LL(){var X,Y,$=new this(0);for(o=!1,X=0;X<arguments.length;)if(Y=new this(arguments[X++]),Y.d)$.d&&($=$.plus(Y.times(Y)));else{if(Y.s)return o=!0,new this(1/0);$=Y}return o=!0,$.sqrt()}function FQ(X){return X instanceof I2||X&&X.toStringTag===VW||!1}function PL(X){return new this(X).ln()}function SL(X,Y){return new this(X).log(Y)}function _L(X){return new this(X).log(2)}function FL(X){return new this(X).log(10)}function CL(){return kW(this,arguments,"lt")}function RL(){return kW(this,arguments,"gt")}function KL(X,Y){return new this(X).mod(Y)}function jL(X,Y){return new this(X).mul(Y)}function bL(X,Y){return new this(X).pow(Y)}function VL(X){var Y,$,Z,Q,W=0,J=new this(1),z=[];if(X===void 0?X=this.precision:v1(X,1,d6),Z=Math.ceil(X/c),this.crypto)if(crypto.getRandomValues)for(Y=crypto.getRandomValues(new Uint32Array(Z));W<Z;)Q=Y[W],Q>=4290000000?Y[W]=crypto.getRandomValues(new Uint32Array(1))[0]:z[W++]=Q%1e7;else if(crypto.randomBytes){for(Y=crypto.randomBytes(Z*=4);W<Z;)Q=Y[W]+(Y[W+1]<<8)+(Y[W+2]<<16)+((Y[W+3]&127)<<24),Q>=2140000000?crypto.randomBytes(4).copy(Y,W):(z.push(Q%1e7),W+=4);W=Z/4}else throw Error(bW);else for(;W<Z;)z[W++]=Math.random()*1e7|0;for(Z=z[--W],X%=c,Z&&X&&(Q=z1(10,c-X),z[W]=(Z/Q|0)*Q);z[W]===0;W--)z.pop();if(W<0)$=0,z=[0];else{for($=-1;z[0]===0;$-=c)z.shift();for(Z=1,Q=z[0];Q>=10;Q/=10)Z++;Z<c&&($-=c-Z)}return J.e=$,J.d=z,J}function EL(X){return m(X=new this(X),X.e+1,this.rounding)}function IL(X){return X=new this(X),X.d?X.d[0]?X.s:0*X.s:X.s||NaN}function xL(X){return new this(X).sin()}function kL(X){return new this(X).sinh()}function TL(X){return new this(X).sqrt()}function gL(X,Y){return new this(X).sub(Y)}function fL(){var X=0,Y=arguments,$=new this(Y[X]);for(o=!1;$.s&&++X<Y.length;)$=$.plus(Y[X]);return o=!0,m($,this.precision,this.rounding)}function yL(X){return new this(X).tan()}function dL(X){return new this(X).tanh()}function vL(X){return m(X=new this(X),X.e+1,1)}j[Symbol.for("nodejs.util.inspect.custom")]=j.toString;j[Symbol.toStringTag]="Decimal";var I2=j.constructor=fW(HX);l7=new I2(l7);o7=new I2(o7);var r4=I2;function s7(X){return X===null?X:Array.isArray(X)?X.map(s7):typeof X=="object"?pL(X)?hL(X):kX(X,s7):X}function pL(X){return X!==null&&typeof X=="object"&&typeof X.$type=="string"}function hL({$type:X,value:Y}){switch(X){case"BigInt":return BigInt(Y);case"Bytes":return Buffer.from(Y,"base64");case"DateTime":return new Date(Y);case"Decimal":return new r4(Y);case"Json":return JSON.parse(Y);default:$9(Y,"Unknown tagged value")}}function gX(X){return X.substring(0,1).toLowerCase()+X.substring(1)}function fX(X){return X instanceof Date||Object.prototype.toString.call(X)==="[object Date]"}function yW(X){return X.toString()!=="Invalid Date"}function yX(X){return I2.isDecimal(X)?!0:X!==null&&typeof X=="object"&&typeof X.s=="number"&&typeof X.e=="number"&&typeof X.toFixed=="function"&&Array.isArray(X.d)}var mL=F0(ZW()),cL=F0(import.meta.require("fs")),uL={keyword:B2,entity:B2,value:(X)=>b8(T4(X)),punctuation:T4,directive:B2,function:B2,variable:(X)=>b8(T4(X)),string:(X)=>b8(p4(X)),boolean:s4,number:B2,comment:IX},iL=(X)=>X,g7={},lL=0,a={manual:g7.Prism&&g7.Prism.manual,disableWorkerMessageHandler:g7.Prism&&g7.Prism.disableWorkerMessageHandler,util:{encode:function(X){if(X instanceof n8){let Y=X;return new n8(Y.type,a.util.encode(Y.content),Y.alias)}else return Array.isArray(X)?X.map(a.util.encode):X.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/\u00a0/g," ")},type:function(X){return Object.prototype.toString.call(X).slice(8,-1)},objId:function(X){return X.__id||Object.defineProperty(X,"__id",{value:++lL}),X.__id},clone:function X(Y,$){let Z,Q,W=a.util.type(Y);switch($=$||{},W){case"Object":if(Q=a.util.objId(Y),$[Q])return $[Q];Z={},$[Q]=Z;for(let J in Y)Y.hasOwnProperty(J)&&(Z[J]=X(Y[J],$));return Z;case"Array":return Q=a.util.objId(Y),$[Q]?$[Q]:(Z=[],$[Q]=Z,Y.forEach(function(J,z){Z[z]=X(J,$)}),Z);default:return Y}}},languages:{extend:function(X,Y){let $=a.util.clone(a.languages[X]);for(let Z in Y)$[Z]=Y[Z];return $},insertBefore:function(X,Y,$,Z){Z=Z||a.languages;let Q=Z[X],W={};for(let z in Q)if(Q.hasOwnProperty(z)){if(z==Y)for(let M in $)$.hasOwnProperty(M)&&(W[M]=$[M]);$.hasOwnProperty(z)||(W[z]=Q[z])}let J=Z[X];return Z[X]=W,a.languages.DFS(a.languages,function(z,M){M===J&&z!=X&&(this[z]=W)}),W},DFS:function X(Y,$,Z,Q){Q=Q||{};let W=a.util.objId;for(let J in Y)if(Y.hasOwnProperty(J)){$.call(Y,J,Y[J],Z||J);let z=Y[J],M=a.util.type(z);M==="Object"&&!Q[W(z)]?(Q[W(z)]=!0,X(z,$,null,Q)):M==="Array"&&!Q[W(z)]&&(Q[W(z)]=!0,X(z,$,J,Q))}}},plugins:{},highlight:function(X,Y,$){let Z={code:X,grammar:Y,language:$};return a.hooks.run("before-tokenize",Z),Z.tokens=a.tokenize(Z.code,Z.grammar),a.hooks.run("after-tokenize",Z),n8.stringify(a.util.encode(Z.tokens),Z.language)},matchGrammar:function(X,Y,$,Z,Q,W,J){for(let q in $){if(!$.hasOwnProperty(q)||!$[q])continue;if(q==J)return;let _=$[q];_=a.util.type(_)==="Array"?_:[_];for(let R=0;R<_.length;++R){let S=_[R],C=S.inside,d=!!S.lookbehind,h=!!S.greedy,k=0,x0=S.alias;if(h&&!S.pattern.global){let T=S.pattern.toString().match(/[imuy]*$/)[0];S.pattern=RegExp(S.pattern.source,T+"g")}S=S.pattern||S;for(let T=Z,e=Q;T<Y.length;e+=Y[T].length,++T){let n=Y[T];if(Y.length>X.length)return;if(n instanceof n8)continue;if(h&&T!=Y.length-1){S.lastIndex=e;var A=S.exec(X);if(!A)break;var U=A.index+(d?A[1].length:0),w=A.index+A[0].length,z=T,M=e;for(let t=Y.length;z<t&&(M<w||!Y[z].type&&!Y[z-1].greedy);++z)M+=Y[z].length,U>=M&&(++T,e=M);if(Y[T]instanceof n8)continue;B=z-T,n=X.slice(e,M),A.index-=e}else{S.lastIndex=0;var A=S.exec(n),B=1}if(!A){if(W)break;continue}d&&(k=A[1]?A[1].length:0);var U=A.index+k,A=A[0].slice(k),w=U+A.length,G=n.slice(0,U),H=n.slice(w);let H0=[T,B];G&&(++T,e+=G.length,H0.push(G));let e0=new n8(q,C?a.tokenize(A,C):A,x0,A,h);if(H0.push(e0),H&&H0.push(H),Array.prototype.splice.apply(Y,H0),B!=1&&a.matchGrammar(X,Y,$,T,e,!0,q),W)break}}}},tokenize:function(X,Y){let $=[X],Z=Y.rest;if(Z){for(let Q in Z)Y[Q]=Z[Q];delete Y.rest}return a.matchGrammar(X,$,Y,0,0,!1),$},hooks:{all:{},add:function(X,Y){let $=a.hooks.all;$[X]=$[X]||[],$[X].push(Y)},run:function(X,Y){let $=a.hooks.all[X];if(!(!$||!$.length))for(var Z=0,Q;Q=$[Z++];)Q(Y)}},Token:n8};a.languages.clike={comment:[{pattern:/(^|[^\\])\/\*[\s\S]*?(?:\*\/|$)/,lookbehind:!0},{pattern:/(^|[^\\:])\/\/.*/,lookbehind:!0,greedy:!0}],string:{pattern:/(["'])(?:\\(?:\r\n|[\s\S])|(?!\1)[^\\\r\n])*\1/,greedy:!0},"class-name":{pattern:/((?:\b(?:class|interface|extends|implements|trait|instanceof|new)\s+)|(?:catch\s+\())[\w.\\]+/i,lookbehind:!0,inside:{punctuation:/[.\\]/}},keyword:/\b(?:if|else|while|do|for|return|in|instanceof|function|new|try|throw|catch|finally|null|break|continue)\b/,boolean:/\b(?:true|false)\b/,function:/\w+(?=\()/,number:/\b0x[\da-f]+\b|(?:\b\d+\.?\d*|\B\.\d+)(?:e[+-]?\d+)?/i,operator:/--?|\+\+?|!=?=?|<=?|>=?|==?=?|&&?|\|\|?|\?|\*|\/|~|\^|%/,punctuation:/[{}[\];(),.:]/};a.languages.javascript=a.languages.extend("clike",{"class-name":[a.languages.clike["class-name"],{pattern:/(^|[^$\w\xA0-\uFFFF])[_$A-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\.(?:prototype|constructor))/,lookbehind:!0}],keyword:[{pattern:/((?:^|})\s*)(?:catch|finally)\b/,lookbehind:!0},{pattern:/(^|[^.])\b(?:as|async(?=\s*(?:function\b|\(|[$\w\xA0-\uFFFF]|$))|await|break|case|class|const|continue|debugger|default|delete|do|else|enum|export|extends|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)\b/,lookbehind:!0}],number:/\b(?:(?:0[xX](?:[\dA-Fa-f](?:_[\dA-Fa-f])?)+|0[bB](?:[01](?:_[01])?)+|0[oO](?:[0-7](?:_[0-7])?)+)n?|(?:\d(?:_\d)?)+n|NaN|Infinity)\b|(?:\b(?:\d(?:_\d)?)+\.?(?:\d(?:_\d)?)*|\B\.(?:\d(?:_\d)?)+)(?:[Ee][+-]?(?:\d(?:_\d)?)+)?/,function:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*(?:\.\s*(?:apply|bind|call)\s*)?\()/,operator:/-[-=]?|\+[+=]?|!=?=?|<<?=?|>>?>?=?|=(?:==?|>)?|&[&=]?|\|[|=]?|\*\*?=?|\/=?|~|\^=?|%=?|\?|\.{3}/});a.languages.javascript["class-name"][0].pattern=/(\b(?:class|interface|extends|implements|instanceof|new)\s+)[\w.\\]+/;a.languages.insertBefore("javascript","keyword",{regex:{pattern:/((?:^|[^$\w\xA0-\uFFFF."'\])\s])\s*)\/(\[(?:[^\]\\\r\n]|\\.)*]|\\.|[^/\\\[\r\n])+\/[gimyus]{0,6}(?=\s*($|[\r\n,.;})\]]))/,lookbehind:!0,greedy:!0},"function-variable":{pattern:/[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*[=:]\s*(?:async\s*)?(?:\bfunction\b|(?:\((?:[^()]|\([^()]*\))*\)|[_$a-zA-Z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)\s*=>))/,alias:"function"},parameter:[{pattern:/(function(?:\s+[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*)?\s*\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\))/,lookbehind:!0,inside:a.languages.javascript},{pattern:/[_$a-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*(?=\s*=>)/i,inside:a.languages.javascript},{pattern:/(\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*=>)/,lookbehind:!0,inside:a.languages.javascript},{pattern:/((?:\b|\s|^)(?!(?:as|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|let|new|null|of|package|private|protected|public|return|set|static|super|switch|this|throw|try|typeof|undefined|var|void|while|with|yield)(?![$\w\xA0-\uFFFF]))(?:[_$A-Za-z\xA0-\uFFFF][$\w\xA0-\uFFFF]*\s*)\(\s*)(?!\s)(?:[^()]|\([^()]*\))+?(?=\s*\)\s*\{)/,lookbehind:!0,inside:a.languages.javascript}],constant:/\b[A-Z](?:[A-Z_]|\dx?)*\b/});a.languages.markup&&a.languages.markup.tag.addInlined("script","javascript");a.languages.js=a.languages.javascript;a.languages.typescript=a.languages.extend("javascript",{keyword:/\b(?:abstract|as|async|await|break|case|catch|class|const|constructor|continue|debugger|declare|default|delete|do|else|enum|export|extends|finally|for|from|function|get|if|implements|import|in|instanceof|interface|is|keyof|let|module|namespace|new|null|of|package|private|protected|public|readonly|return|require|set|static|super|switch|this|throw|try|type|typeof|var|void|while|with|yield)\b/,builtin:/\b(?:string|Function|any|number|boolean|Array|symbol|console|Promise|unknown|never)\b/});a.languages.ts=a.languages.typescript;function n8(X,Y,$,Z,Q){this.type=X,this.content=Y,this.alias=$,this.length=(Z||"").length|0,this.greedy=!!Q}n8.stringify=function(X,Y){return typeof X=="string"?X:Array.isArray(X)?X.map(function($){return n8.stringify($,Y)}).join(""):oL(X.type)(X.content)};function oL(X){return uL[X]||iL}function nL(X){return sL(X,a.languages.javascript)}function sL(X,Y){return a.tokenize(X,Y).map(($)=>n8.stringify($)).join("")}var tL=F0(_D());function rL(X){return tL.default(X)}var aL=class X{static read(Y){let $;try{$=cL.default.readFileSync(Y,"utf-8")}catch{return null}return X.fromContent($)}static fromContent(Y){let $=Y.split(/\r?\n/);return new X(1,$)}constructor(Y,$){this.firstLineNumber=Y,this.lines=$}get lastLineNumber(){return this.firstLineNumber+this.lines.length-1}mapLineAt(Y,$){if(Y<this.firstLineNumber||Y>this.lines.length+this.firstLineNumber)return this;let Z=Y-this.firstLineNumber,Q=[...this.lines];return Q[Z]=$(Q[Z]),new X(this.firstLineNumber,Q)}mapLines(Y){return new X(this.firstLineNumber,this.lines.map(($,Z)=>Y($,this.firstLineNumber+Z)))}lineAt(Y){return this.lines[Y-this.firstLineNumber]}prependSymbolAt(Y,$){return this.mapLines((Z,Q)=>Q===Y?`${$} ${Z}`:`  ${Z}`)}slice(Y,$){let Z=this.lines.slice(Y-1,$).join(`
`);return new X(Y,rL(Z).split(`
`))}highlight(){let Y=nL(this.toString());return new X(this.firstLineNumber,Y.split(`
`))}toString(){return this.lines.join(`
`)}},eL={red:U2,gray:IX,dim:n4,bold:b8,underline:G8,highlightSource:(X)=>X.highlight()},XP={red:(X)=>X,gray:(X)=>X,dim:(X)=>X,bold:(X)=>X,underline:(X)=>X,highlightSource:(X)=>X};function YP({message:X,originalMethod:Y,isPanic:$,callArguments:Z}){return{functionName:`prisma.${Y}()`,message:X,isPanic:$??!1,callArguments:Z}}function $P({callsite:X,message:Y,originalMethod:$,isPanic:Z,callArguments:Q},W){let J=YP({message:Y,originalMethod:$,isPanic:Z,callArguments:Q});if(!X||typeof window<"u")return J;let z=X.getLocation();if(!z||!z.lineNumber||!z.columnNumber)return J;let M=Math.max(1,z.lineNumber-3),B=aL.read(z.fileName)?.slice(M,z.lineNumber),U=B?.lineAt(z.lineNumber);if(B&&U){let A=QP(U),w=ZP(U);if(!w)return J;J.functionName=`${w.code})`,J.location=z,Z||(B=B.mapLineAt(z.lineNumber,(H)=>H.slice(0,w.openingBraceIndex))),B=W.highlightSource(B);let G=String(B.lastLineNumber).length;if(J.contextLines=B.mapLines((H,q)=>W.gray(String(q).padStart(G))+" "+H).mapLines((H)=>W.dim(H)).prependSymbolAt(z.lineNumber,W.bold(W.red("\u2192"))),Q){let H=A+G+1;H+=2,J.callArguments=mL.default(Q,H).slice(H)}}return J}function ZP(X){let Y=Object.keys(c4.ModelAction).join("|"),$=new RegExp(String.raw`\.(${Y})\(`).exec(X);if($){let Z=$.index+$[0].length,Q=X.lastIndexOf(" ",$.index)+1;return{code:X.slice(Q,Z),openingBraceIndex:Z}}return null}function QP(X){let Y=0;for(let $=0;$<X.length;$++){if(X.charAt($)!==" ")return Y;Y++}return Y}function WP({functionName:X,location:Y,message:$,isPanic:Z,contextLines:Q,callArguments:W},J){let z=[""],M=Y?" in":":";if(Z?(z.push(J.red(`Oops, an unknown error occurred! This is ${J.bold("on us")}, you did nothing wrong.`)),z.push(J.red(`It occurred in the ${J.bold(`\`${X}\``)} invocation${M}`))):z.push(J.red(`Invalid ${J.bold(`\`${X}\``)} invocation${M}`)),Y&&z.push(J.underline(JP(Y))),Q){z.push("");let B=[Q.toString()];W&&(B.push(W),B.push(J.dim(")"))),z.push(B.join("")),W&&z.push("")}else z.push(""),W&&z.push(W),z.push("");return z.push($),z.join(`
`)}function JP(X){let Y=[X.fileName];return X.lineNumber&&Y.push(String(X.lineNumber)),X.columnNumber&&Y.push(String(X.columnNumber)),Y.join(":")}function dX(X){let Y=X.showColors?eL:XP,$;return $=$P(X,Y),WP($,Y)}var zP=F0(WW());function MP(X,Y,$){let Z=dW(X),Q=BP(Z),W=GP(Q);W?uW(W,Y,$):Y.addErrorMessage(()=>"Unknown error")}function dW(X){return X.errors.flatMap((Y)=>Y.kind==="Union"?dW(Y):[Y])}function BP(X){let Y=new Map,$=[];for(let Z of X){if(Z.kind!=="InvalidArgumentType"){$.push(Z);continue}let Q=`${Z.selectionPath.join(".")}:${Z.argumentPath.join(".")}`,W=Y.get(Q);W?Y.set(Q,{...Z,argument:{...Z.argument,typeNames:UP(W.argument.typeNames,Z.argument.typeNames)}}):Y.set(Q,Z)}return $.push(...Y.values()),$}function UP(X,Y){return[...new Set(X.concat(Y))]}function GP(X){return lO(X,(Y,$)=>{let Z=CQ(Y),Q=CQ($);return Z!==Q?Z-Q:RQ(Y)-RQ($)})}function CQ(X){let Y=0;return Array.isArray(X.selectionPath)&&(Y+=X.selectionPath.length),Array.isArray(X.argumentPath)&&(Y+=X.argumentPath.length),Y}function RQ(X){switch(X.kind){case"InvalidArgumentValue":case"ValueTooLarge":return 20;case"InvalidArgumentType":return 10;case"RequiredArgumentMissing":return-10;default:return 0}}var X6=class{constructor(X,Y){this.name=X,this.value=Y,this.isRequired=!1}makeRequired(){return this.isRequired=!0,this}write(X){let{colors:{green:Y}}=X.context;X.addMarginSymbol(Y(this.isRequired?"+":"?")),X.write(Y(this.name)),this.isRequired||X.write(Y("?")),X.write(Y(": ")),typeof this.value=="string"?X.write(Y(this.value)):X.write(this.value)}},vW=class{constructor(X=0,Y){this.context=Y,this.lines=[],this.currentLine="",this.currentIndent=0,this.currentIndent=X}write(X){return typeof X=="string"?this.currentLine+=X:X.write(this),this}writeJoined(X,Y,$=(Z,Q)=>Q.write(Z)){let Z=Y.length-1;for(let Q=0;Q<Y.length;Q++)$(Y[Q],this),Q!==Z&&this.write(X);return this}writeLine(X){return this.write(X).newLine()}newLine(){this.lines.push(this.indentedCurrentLine()),this.currentLine="",this.marginSymbol=void 0;let X=this.afterNextNewLineCallback;return this.afterNextNewLineCallback=void 0,X?.(),this}withIndent(X){return this.indent(),X(this),this.unindent(),this}afterNextNewline(X){return this.afterNextNewLineCallback=X,this}indent(){return this.currentIndent++,this}unindent(){return this.currentIndent>0&&this.currentIndent--,this}addMarginSymbol(X){return this.marginSymbol=X,this}toString(){return this.lines.concat(this.indentedCurrentLine()).join(`
`)}getCurrentLineLength(){return this.currentLine.length}indentedCurrentLine(){let X=this.currentLine.padStart(this.currentLine.length+2*this.currentIndent);return this.marginSymbol?this.marginSymbol+X.slice(1):X}},AP=class{constructor(X){this.value=X}write(X){X.write(this.value)}markAsError(){this.value.markAsError()}},f7=(X)=>X,pW={bold:f7,red:f7,green:f7,dim:f7,enabled:!1},wP={bold:b8,red:U2,green:p4,dim:n4,enabled:!0},vX={write(X){X.writeLine(",")}},z9=class{constructor(X){this.contents=X,this.isUnderlined=!1,this.color=(Y)=>Y}underline(){return this.isUnderlined=!0,this}setColor(X){return this.color=X,this}write(X){let Y=X.getCurrentLineLength();X.write(this.color(this.contents)),this.isUnderlined&&X.afterNextNewline(()=>{X.write(" ".repeat(Y)).writeLine(this.color("~".repeat(this.contents.length)))})}},pX=class{constructor(){this.hasError=!1}markAsError(){return this.hasError=!0,this}},hW=class extends pX{constructor(){super(...arguments);this.items=[]}addItem(X){return this.items.push(new AP(X)),this}getField(X){return this.items[X]}getPrintWidth(){return this.items.length===0?2:Math.max(...this.items.map((X)=>X.value.getPrintWidth()))+2}write(X){if(this.items.length===0){this.writeEmpty(X);return}this.writeWithItems(X)}writeEmpty(X){let Y=new z9("[]");this.hasError&&Y.setColor(X.context.colors.red).underline(),X.write(Y)}writeWithItems(X){let{colors:Y}=X.context;X.writeLine("[").withIndent(()=>X.writeJoined(vX,this.items).newLine()).write("]"),this.hasError&&X.afterNextNewline(()=>{X.writeLine(Y.red("~".repeat(this.getPrintWidth())))})}asObject(){}},mW=class X extends pX{constructor(){super(...arguments);this.fields={},this.suggestions=[]}addField(Y){this.fields[Y.name]=Y}addSuggestion(Y){this.suggestions.push(Y)}getField(Y){return this.fields[Y]}getDeepField(Y){let[$,...Z]=Y,Q=this.getField($);if(!Q)return;let W=Q;for(let J of Z){let z;if(W.value instanceof X?z=W.value.getField(J):W.value instanceof hW&&(z=W.value.getField(Number(J))),!z)return;W=z}return W}getDeepFieldValue(Y){return Y.length===0?this:this.getDeepField(Y)?.value}hasField(Y){return!!this.getField(Y)}removeAllFields(){this.fields={}}removeField(Y){delete this.fields[Y]}getFields(){return this.fields}isEmpty(){return Object.keys(this.fields).length===0}getFieldValue(Y){return this.getField(Y)?.value}getDeepSubSelectionValue(Y){let $=this;for(let Z of Y){if(!($ instanceof X))return;let Q=$.getSubSelectionValue(Z);if(!Q)return;$=Q}return $}getDeepSelectionParent(Y){let $=this.getSelectionParent();if(!$)return;let Z=$;for(let Q of Y){let W=Z.value.getFieldValue(Q);if(!W||!(W instanceof X))return;let J=W.getSelectionParent();if(!J)return;Z=J}return Z}getSelectionParent(){let Y=this.getField("select")?.value.asObject();if(Y)return{kind:"select",value:Y};let $=this.getField("include")?.value.asObject();if($)return{kind:"include",value:$}}getSubSelectionValue(Y){return this.getSelectionParent()?.value.fields[Y].value}getPrintWidth(){let Y=Object.values(this.fields);return Y.length==0?2:Math.max(...Y.map(($)=>$.getPrintWidth()))+2}write(Y){let $=Object.values(this.fields);if($.length===0&&this.suggestions.length===0){this.writeEmpty(Y);return}this.writeWithContents(Y,$)}asObject(){return this}writeEmpty(Y){let $=new z9("{}");this.hasError&&$.setColor(Y.context.colors.red).underline(),Y.write($)}writeWithContents(Y,$){Y.writeLine("{").withIndent(()=>{Y.writeJoined(vX,[...$,...this.suggestions]).newLine()}),Y.write("}"),this.hasError&&Y.afterNextNewline(()=>{Y.writeLine(Y.context.colors.red("~".repeat(this.getPrintWidth())))})}},d1=class extends pX{constructor(X){super();this.text=X}getPrintWidth(){return this.text.length}write(X){let Y=new z9(this.text);this.hasError&&Y.underline().setColor(X.context.colors.red),X.write(Y)}asObject(){}},cW=class{constructor(){this.fields=[]}addField(X,Y){return this.fields.push({write($){let{green:Z,dim:Q}=$.context.colors;$.write(Z(Q(`${X}: ${Y}`))).addMarginSymbol(Z(Q("+")))}}),this}write(X){let{colors:{green:Y}}=X.context;X.writeLine(Y("{")).withIndent(()=>{X.writeJoined(vX,this.fields).newLine()}).write(Y("}")).addMarginSymbol(Y("+"))}};function uW(X,Y,$){switch(X.kind){case"MutuallyExclusiveFields":HP(X,Y);break;case"IncludeOnScalar":qP(X,Y);break;case"EmptySelection":NP(X,Y,$);break;case"UnknownSelectionField":PP(X,Y);break;case"InvalidSelectionValue":SP(X,Y);break;case"UnknownArgument":_P(X,Y);break;case"UnknownInputField":FP(X,Y);break;case"RequiredArgumentMissing":CP(X,Y);break;case"InvalidArgumentType":RP(X,Y);break;case"InvalidArgumentValue":KP(X,Y);break;case"ValueTooLarge":jP(X,Y);break;case"SomeFieldsMissing":bP(X,Y);break;case"TooManyFieldsGiven":VP(X,Y);break;case"Union":MP(X,Y,$);break;default:throw new Error("not implemented: "+X.kind)}}function HP(X,Y){let $=Y.arguments.getDeepSubSelectionValue(X.selectionPath)?.asObject();$&&($.getField(X.firstField)?.markAsError(),$.getField(X.secondField)?.markAsError()),Y.addErrorMessage((Z)=>`Please ${Z.bold("either")} use ${Z.green(`\`${X.firstField}\``)} or ${Z.green(`\`${X.secondField}\``)}, but ${Z.red("not both")} at the same time.`)}function qP(X,Y){let[$,Z]=a4(X.selectionPath),Q=X.outputType,W=Y.arguments.getDeepSelectionParent($)?.value;if(W&&(W.getField(Z)?.markAsError(),Q))for(let J of Q.fields)J.isRelation&&W.addSuggestion(new X6(J.name,"true"));Y.addErrorMessage((J)=>{let z=`Invalid scalar field ${J.red(`\`${Z}\``)} for ${J.bold("include")} statement`;return Q?z+=` on model ${J.bold(Q.name)}. ${e4(J)}`:z+=".",z+=`
Note that ${J.bold("include")} statements only accept relation fields.`,z})}function NP(X,Y,$){let Z=Y.arguments.getDeepSubSelectionValue(X.selectionPath)?.asObject();if(Z){let Q=Z.getField("omit")?.value.asObject();if(Q){DP(X,Y,Q);return}if(Z.hasField("select")){OP(X,Y);return}}if($?.[gX(X.outputType.name)]){LP(X,Y);return}Y.addErrorMessage(()=>`Unknown field at "${X.selectionPath.join(".")} selection"`)}function DP(X,Y,$){$.removeAllFields();for(let Z of X.outputType.fields)$.addSuggestion(new X6(Z.name,"false"));Y.addErrorMessage((Z)=>`The ${Z.red("omit")} statement includes every field of the model ${Z.bold(X.outputType.name)}. At least one field must be included in the result`)}function OP(X,Y){let $=X.outputType,Z=Y.arguments.getDeepSelectionParent(X.selectionPath)?.value,Q=Z?.isEmpty()??!1;Z&&(Z.removeAllFields(),oW(Z,$)),Y.addErrorMessage((W)=>Q?`The ${W.red("`select`")} statement for type ${W.bold($.name)} must not be empty. ${e4(W)}`:`The ${W.red("`select`")} statement for type ${W.bold($.name)} needs ${W.bold("at least one truthy value")}.`)}function LP(X,Y){let $=new cW;for(let Q of X.outputType.fields)Q.isRelation||$.addField(Q.name,"false");let Z=new X6("omit",$).makeRequired();if(X.selectionPath.length===0)Y.arguments.addSuggestion(Z);else{let[Q,W]=a4(X.selectionPath),J=Y.arguments.getDeepSelectionParent(Q)?.value.asObject()?.getField(W);if(J){let z=J?.value.asObject()??new mW;z.addSuggestion(Z),J.value=z}}Y.addErrorMessage((Q)=>`The global ${Q.red("omit")} configuration excludes every field of the model ${Q.bold(X.outputType.name)}. At least one field must be included in the result`)}function PP(X,Y){let $=nW(X.selectionPath,Y);if($.parentKind!=="unknown"){$.field.markAsError();let Z=$.parent;switch($.parentKind){case"select":oW(Z,X.outputType);break;case"include":EP(Z,X.outputType);break;case"omit":IP(Z,X.outputType);break}}Y.addErrorMessage((Z)=>{let Q=[`Unknown field ${Z.red(`\`${$.fieldName}\``)}`];return $.parentKind!=="unknown"&&Q.push(`for ${Z.bold($.parentKind)} statement`),Q.push(`on model ${Z.bold(`\`${X.outputType.name}\``)}.`),Q.push(e4(Z)),Q.join(" ")})}function SP(X,Y){let $=nW(X.selectionPath,Y);$.parentKind!=="unknown"&&$.field.value.markAsError(),Y.addErrorMessage((Z)=>`Invalid value for selection field \`${Z.red($.fieldName)}\`: ${X.underlyingError}`)}function _P(X,Y){let $=X.argumentPath[0],Z=Y.arguments.getDeepSubSelectionValue(X.selectionPath)?.asObject();Z&&(Z.getField($)?.markAsError(),xP(Z,X.arguments)),Y.addErrorMessage((Q)=>iW(Q,$,X.arguments.map((W)=>W.name)))}function FP(X,Y){let[$,Z]=a4(X.argumentPath),Q=Y.arguments.getDeepSubSelectionValue(X.selectionPath)?.asObject();if(Q){Q.getDeepField(X.argumentPath)?.markAsError();let W=Q.getDeepFieldValue($)?.asObject();W&&sW(W,X.inputType)}Y.addErrorMessage((W)=>iW(W,Z,X.inputType.fields.map((J)=>J.name)))}function iW(X,Y,$){let Z=[`Unknown argument \`${X.red(Y)}\`.`],Q=TP(Y,$);return Q&&Z.push(`Did you mean \`${X.green(Q)}\`?`),$.length>0&&Z.push(e4(X)),Z.join(" ")}function CP(X,Y){let $;Y.addErrorMessage((M)=>$?.value instanceof d1&&$.value.text==="null"?`Argument \`${M.green(W)}\` must not be ${M.red("null")}.`:`Argument \`${M.green(W)}\` is missing.`);let Z=Y.arguments.getDeepSubSelectionValue(X.selectionPath)?.asObject();if(!Z)return;let[Q,W]=a4(X.argumentPath),J=new cW,z=Z.getDeepFieldValue(Q)?.asObject();if(z)if($=z.getField(W),$&&z.removeField(W),X.inputTypes.length===1&&X.inputTypes[0].kind==="object"){for(let M of X.inputTypes[0].fields)J.addField(M.name,M.typeNames.join(" | "));z.addSuggestion(new X6(W,J).makeRequired())}else{let M=X.inputTypes.map(lW).join(" | ");z.addSuggestion(new X6(W,M).makeRequired())}}function lW(X){return X.kind==="list"?`${lW(X.elementType)}[]`:X.name}function RP(X,Y){let $=X.argument.name,Z=Y.arguments.getDeepSubSelectionValue(X.selectionPath)?.asObject();Z&&Z.getDeepFieldValue(X.argumentPath)?.markAsError(),Y.addErrorMessage((Q)=>{let W=M9("or",X.argument.typeNames.map((J)=>Q.green(J)));return`Argument \`${Q.bold($)}\`: Invalid value provided. Expected ${W}, provided ${Q.red(X.inferredType)}.`})}function KP(X,Y){let $=X.argument.name,Z=Y.arguments.getDeepSubSelectionValue(X.selectionPath)?.asObject();Z&&Z.getDeepFieldValue(X.argumentPath)?.markAsError(),Y.addErrorMessage((Q)=>{let W=[`Invalid value for argument \`${Q.bold($)}\``];if(X.underlyingError&&W.push(`: ${X.underlyingError}`),W.push("."),X.argument.typeNames.length>0){let J=M9("or",X.argument.typeNames.map((z)=>Q.green(z)));W.push(` Expected ${J}.`)}return W.join("")})}function jP(X,Y){let $=X.argument.name,Z=Y.arguments.getDeepSubSelectionValue(X.selectionPath)?.asObject(),Q;if(Z){let W=Z.getDeepField(X.argumentPath)?.value;W?.markAsError(),W instanceof d1&&(Q=W.text)}Y.addErrorMessage((W)=>{let J=["Unable to fit value"];return Q&&J.push(W.red(Q)),J.push(`into a 64-bit signed integer for field \`${W.bold($)}\``),J.join(" ")})}function bP(X,Y){let $=X.argumentPath[X.argumentPath.length-1],Z=Y.arguments.getDeepSubSelectionValue(X.selectionPath)?.asObject();if(Z){let Q=Z.getDeepFieldValue(X.argumentPath)?.asObject();Q&&sW(Q,X.inputType)}Y.addErrorMessage((Q)=>{let W=[`Argument \`${Q.bold($)}\` of type ${Q.bold(X.inputType.name)} needs`];return X.constraints.minFieldCount===1?X.constraints.requiredFields?W.push(`${Q.green("at least one of")} ${M9("or",X.constraints.requiredFields.map((J)=>`\`${Q.bold(J)}\``))} arguments.`):W.push(`${Q.green("at least one")} argument.`):W.push(`${Q.green(`at least ${X.constraints.minFieldCount}`)} arguments.`),W.push(e4(Q)),W.join(" ")})}function VP(X,Y){let $=X.argumentPath[X.argumentPath.length-1],Z=Y.arguments.getDeepSubSelectionValue(X.selectionPath)?.asObject(),Q=[];if(Z){let W=Z.getDeepFieldValue(X.argumentPath)?.asObject();W&&(W.markAsError(),Q=Object.keys(W.getFields()))}Y.addErrorMessage((W)=>{let J=[`Argument \`${W.bold($)}\` of type ${W.bold(X.inputType.name)} needs`];return X.constraints.minFieldCount===1&&X.constraints.maxFieldCount==1?J.push(`${W.green("exactly one")} argument,`):X.constraints.maxFieldCount==1?J.push(`${W.green("at most one")} argument,`):J.push(`${W.green(`at most ${X.constraints.maxFieldCount}`)} arguments,`),J.push(`but you provided ${M9("and",Q.map((z)=>W.red(z)))}. Please choose`),X.constraints.maxFieldCount===1?J.push("one."):J.push(`${X.constraints.maxFieldCount}.`),J.join(" ")})}function oW(X,Y){for(let $ of Y.fields)X.hasField($.name)||X.addSuggestion(new X6($.name,"true"))}function EP(X,Y){for(let $ of Y.fields)$.isRelation&&!X.hasField($.name)&&X.addSuggestion(new X6($.name,"true"))}function IP(X,Y){for(let $ of Y.fields)!X.hasField($.name)&&!$.isRelation&&X.addSuggestion(new X6($.name,"true"))}function xP(X,Y){for(let $ of Y)X.hasField($.name)||X.addSuggestion(new X6($.name,$.typeNames.join(" | ")))}function nW(X,Y){let[$,Z]=a4(X),Q=Y.arguments.getDeepSubSelectionValue($)?.asObject();if(!Q)return{parentKind:"unknown",fieldName:Z};let W=Q.getFieldValue("select")?.asObject(),J=Q.getFieldValue("include")?.asObject(),z=Q.getFieldValue("omit")?.asObject(),M=W?.getField(Z);return W&&M?{parentKind:"select",parent:W,field:M,fieldName:Z}:(M=J?.getField(Z),J&&M?{parentKind:"include",field:M,parent:J,fieldName:Z}:(M=z?.getField(Z),z&&M?{parentKind:"omit",field:M,parent:z,fieldName:Z}:{parentKind:"unknown",fieldName:Z}))}function sW(X,Y){if(Y.kind==="object")for(let $ of Y.fields)X.hasField($.name)||X.addSuggestion(new X6($.name,$.typeNames.join(" | ")))}function a4(X){let Y=[...X],$=Y.pop();if(!$)throw new Error("unexpected empty path");return[Y,$]}function e4({green:X,enabled:Y}){return"Available options are "+(Y?`listed in ${X("green")}`:"marked with ?")+"."}function M9(X,Y){if(Y.length===1)return Y[0];let $=[...Y],Z=$.pop();return`${$.join(", ")} ${X} ${Z}`}var kP=3;function TP(X,Y){let $=1/0,Z;for(let Q of Y){let W=zP.default(X,Q);W>kP||W<$&&($=W,Z=Q)}return Z}function gP(X){return X.substring(0,1).toLowerCase()+X.substring(1)}var tW=class{constructor(X,Y,$,Z,Q){this.modelName=X,this.name=Y,this.typeName=$,this.isList=Z,this.isEnum=Q}_toGraphQLInputType(){let X=this.isList?"List":"",Y=this.isEnum?"Enum":"";return`${X}${Y}${this.typeName}FieldRefInput<${this.modelName}>`}};function hX(X){return X instanceof tW}var h7=Symbol(),t5=new WeakMap,B9=class{constructor(X){X===h7?t5.set(this,`Prisma.${this._getName()}`):t5.set(this,`new Prisma.${this._getNamespace()}.${this._getName()}()`)}_getName(){return this.constructor.name}toString(){return t5.get(this)}},mX=class extends B9{_getNamespace(){return"NullTypes"}},OX=class extends mX{};cX(OX,"DbNull");var LX=class extends mX{};cX(LX,"JsonNull");var PX=class extends mX{};cX(PX,"AnyNull");var rW={classes:{DbNull:OX,JsonNull:LX,AnyNull:PX},instances:{DbNull:new OX(h7),JsonNull:new LX(h7),AnyNull:new PX(h7)}};function cX(X,Y){Object.defineProperty(X,"name",{value:Y,configurable:!0})}var KQ=": ",fP=class{constructor(X,Y){this.name=X,this.value=Y,this.hasError=!1}markAsError(){this.hasError=!0}getPrintWidth(){return this.name.length+this.value.getPrintWidth()+KQ.length}write(X){let Y=new z9(this.name);this.hasError&&Y.underline().setColor(X.context.colors.red),X.write(Y).write(KQ).write(this.value)}},yP=class{constructor(X){this.errorMessages=[],this.arguments=X}write(X){X.write(this.arguments)}addErrorMessage(X){this.errorMessages.push(X)}renderAllMessages(X){return this.errorMessages.map((Y)=>Y(X)).join(`
`)}};function uX(X){return new yP(aW(X))}function aW(X){let Y=new mW;for(let[$,Z]of Object.entries(X)){let Q=new fP($,eW(Z));Y.addField(Q)}return Y}function eW(X){if(typeof X=="string")return new d1(JSON.stringify(X));if(typeof X=="number"||typeof X=="boolean")return new d1(String(X));if(typeof X=="bigint")return new d1(`${X}n`);if(X===null)return new d1("null");if(X===void 0)return new d1("undefined");if(yX(X))return new d1(`new Prisma.Decimal("${X.toFixed()}")`);if(X instanceof Uint8Array)return Buffer.isBuffer(X)?new d1(`Buffer.alloc(${X.byteLength})`):new d1(`new Uint8Array(${X.byteLength})`);if(X instanceof Date){let Y=yW(X)?X.toISOString():"Invalid Date";return new d1(`new Date("${Y}")`)}return X instanceof B9?new d1(`Prisma.${X._getName()}`):hX(X)?new d1(`prisma.${gP(X.modelName)}.\$fields.${X.name}`):Array.isArray(X)?dP(X):typeof X=="object"?aW(X):new d1(Object.prototype.toString.call(X))}function dP(X){let Y=new hW;for(let $ of X)Y.addItem(eW($));return Y}function XJ(X,Y){let $=Y==="pretty"?wP:pW,Z=X.renderAllMessages($),Q=new vW(0,{colors:$}).write(X).toString();return{message:Z,args:Q}}function YJ({args:X,errors:Y,errorFormat:$,callsite:Z,originalMethod:Q,clientVersion:W,globalOmit:J}){let z=uX(X);for(let A of Y)uW(A,z,J);let{message:M,args:B}=XJ(z,$),U=dX({message:M,callsite:Z,originalMethod:Q,showColors:$==="pretty",callArguments:B});throw new K8(U,{clientVersion:W})}var y4=class{constructor(){this._map=new Map}get(X){return this._map.get(X)?.value}set(X,Y){this._map.set(X,{value:Y})}getOrCreate(X,Y){let $=this._map.get(X);if($)return $.value;let Z=Y();return this.set(X,Z),Z}};function SX(X){let Y;return{get(){return Y||(Y={value:X()}),Y.value}}}function X7(X){return X.replace(/^./,(Y)=>Y.toLowerCase())}function vP(X,Y,$){let Z=X7($);return!Y.result||!(Y.result.$allModels||Y.result[Z])?X:pP({...X,...jQ(Y.name,X,Y.result.$allModels),...jQ(Y.name,X,Y.result[Z])})}function pP(X){let Y=new y4,$=(Z,Q)=>Y.getOrCreate(Z,()=>Q.has(Z)?[Z]:(Q.add(Z),X[Z]?X[Z].needs.flatMap((W)=>$(W,Q)):[Z]));return kX(X,(Z)=>({...Z,needs:$(Z.name,new Set)}))}function jQ(X,Y,$){return $?kX($,({needs:Z,compute:Q},W)=>({name:W,needs:Z?Object.keys(Z).filter((J)=>Z[J]):[],compute:hP(Y,W,Q)})):{}}function hP(X,Y,$){let Z=X?.[Y]?.compute;return Z?(Q)=>$({...Q,[Y]:Z(Q)}):$}function mP(X,Y){if(!Y)return X;let $={...X};for(let Z of Object.values(Y))if(X[Z.name])for(let Q of Z.needs)$[Q]=!0;return $}function cP(X,Y){if(!Y)return X;let $={...X};for(let Z of Object.values(Y))if(!X[Z.name])for(let Q of Z.needs)delete $[Q];return $}var bQ=class{constructor(X,Y){this.extension=X,this.previous=Y,this.computedFieldsCache=new y4,this.modelExtensionsCache=new y4,this.queryCallbacksCache=new y4,this.clientExtensions=SX(()=>this.extension.client?{...this.previous?.getAllClientExtensions(),...this.extension.client}:this.previous?.getAllClientExtensions()),this.batchCallbacks=SX(()=>{let $=this.previous?.getAllBatchQueryCallbacks()??[],Z=this.extension.query?.$__internalBatch;return Z?$.concat(Z):$})}getAllComputedFields(X){return this.computedFieldsCache.getOrCreate(X,()=>vP(this.previous?.getAllComputedFields(X),this.extension,X))}getAllClientExtensions(){return this.clientExtensions.get()}getAllModelExtensions(X){return this.modelExtensionsCache.getOrCreate(X,()=>{let Y=X7(X);return!this.extension.model||!(this.extension.model[Y]||this.extension.model.$allModels)?this.previous?.getAllModelExtensions(X):{...this.previous?.getAllModelExtensions(X),...this.extension.model.$allModels,...this.extension.model[Y]}})}getAllQueryCallbacks(X,Y){return this.queryCallbacksCache.getOrCreate(`${X}:${Y}`,()=>{let $=this.previous?.getAllQueryCallbacks(X,Y)??[],Z=[],Q=this.extension.query;return!Q||!(Q[X]||Q.$allModels||Q[Y]||Q.$allOperations)?$:(Q[X]!==void 0&&(Q[X][Y]!==void 0&&Z.push(Q[X][Y]),Q[X].$allOperations!==void 0&&Z.push(Q[X].$allOperations)),X!=="$none"&&Q.$allModels!==void 0&&(Q.$allModels[Y]!==void 0&&Z.push(Q.$allModels[Y]),Q.$allModels.$allOperations!==void 0&&Z.push(Q.$allModels.$allOperations)),Q[Y]!==void 0&&Z.push(Q[Y]),Q.$allOperations!==void 0&&Z.push(Q.$allOperations),$.concat(Z))})}getAllBatchQueryCallbacks(){return this.batchCallbacks.get()}},$J=class X{constructor(Y){this.head=Y}static empty(){return new X}static single(Y){return new X(new bQ(Y))}isEmpty(){return this.head===void 0}append(Y){return new X(new bQ(Y,this.head))}getAllComputedFields(Y){return this.head?.getAllComputedFields(Y)}getAllClientExtensions(){return this.head?.getAllClientExtensions()}getAllModelExtensions(Y){return this.head?.getAllModelExtensions(Y)}getAllQueryCallbacks(Y,$){return this.head?.getAllQueryCallbacks(Y,$)??[]}getAllBatchQueryCallbacks(){return this.head?.getAllBatchQueryCallbacks()??[]}},ZJ=Symbol(),QJ=class{constructor(X){if(X!==ZJ)throw new Error("Skip instance can not be constructed directly")}ifUndefined(X){return X===void 0?WJ:X}},WJ=new QJ(ZJ);function G2(X){return X instanceof QJ}var uP={findUnique:"findUnique",findUniqueOrThrow:"findUniqueOrThrow",findFirst:"findFirst",findFirstOrThrow:"findFirstOrThrow",findMany:"findMany",count:"aggregate",create:"createOne",createMany:"createMany",createManyAndReturn:"createManyAndReturn",update:"updateOne",updateMany:"updateMany",upsert:"upsertOne",delete:"deleteOne",deleteMany:"deleteMany",executeRaw:"executeRaw",queryRaw:"queryRaw",aggregate:"aggregate",groupBy:"groupBy",runCommandRaw:"runCommandRaw",findRaw:"findRaw",aggregateRaw:"aggregateRaw"},JJ="explicitly `undefined` values are not allowed";function zJ({modelName:X,action:Y,args:$,runtimeDataModel:Z,extensions:Q=$J.empty(),callsite:W,clientMethod:J,errorFormat:z,clientVersion:M,previewFeatures:B,globalOmit:U}){let A=new eP({runtimeDataModel:Z,modelName:X,action:Y,rootArgs:$,callsite:W,extensions:Q,selectionPath:[],argumentPath:[],originalMethod:J,errorFormat:z,clientVersion:M,previewFeatures:B,globalOmit:U});return{modelName:X,action:uP[Y],query:i4($,A)}}function i4({select:X,include:Y,...$}={},Z){let Q;return Z.isPreviewFeatureOn("omitApi")&&(Q=$.omit,delete $.omit),{arguments:BJ($,Z),selection:iP(X,Y,Q,Z)}}function iP(X,Y,$,Z){return X?(Y?Z.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"include",secondField:"select",selectionPath:Z.getSelectionPath()}):$&&Z.isPreviewFeatureOn("omitApi")&&Z.throwValidationError({kind:"MutuallyExclusiveFields",firstField:"omit",secondField:"select",selectionPath:Z.getSelectionPath()}),sP(X,Z)):lP(Z,Y,$)}function lP(X,Y,$){let Z={};return X.modelOrType&&!X.isRawAction()&&(Z.$composites=!0,Z.$scalars=!0),Y&&oP(Z,Y,X),X.isPreviewFeatureOn("omitApi")&&nP(Z,$,X),Z}function oP(X,Y,$){for(let[Z,Q]of Object.entries(Y)){if(G2(Q))continue;let W=$.nestSelection(Z);if(iX(Q,W),Q===!1||Q===void 0){X[Z]=!1;continue}let J=$.findField(Z);if(J&&J.kind!=="object"&&$.throwValidationError({kind:"IncludeOnScalar",selectionPath:$.getSelectionPath().concat(Z),outputType:$.getOutputTypeDescription()}),J){X[Z]=i4(Q===!0?{}:Q,W);continue}if(Q===!0){X[Z]=!0;continue}X[Z]=i4(Q,W)}}function nP(X,Y,$){let Z=$.getComputedFields(),Q={...$.getGlobalOmit(),...Y},W=cP(Q,Z);for(let[J,z]of Object.entries(W)){if(G2(z))continue;iX(z,$.nestSelection(J));let M=$.findField(J);Z?.[J]&&!M||(X[J]=!z)}}function sP(X,Y){let $={},Z=Y.getComputedFields(),Q=mP(X,Z);for(let[W,J]of Object.entries(Q)){if(G2(J))continue;let z=Y.nestSelection(W);iX(J,z);let M=Y.findField(W);if(!(Z?.[W]&&!M)){if(J===!1||J===void 0||G2(J)){$[W]=!1;continue}if(J===!0){M?.kind==="object"?$[W]=i4({},z):$[W]=!0;continue}$[W]=i4(J,z)}}return $}function MJ(X,Y){if(X===null)return null;if(typeof X=="string"||typeof X=="number"||typeof X=="boolean")return X;if(typeof X=="bigint")return{$type:"BigInt",value:String(X)};if(fX(X)){if(yW(X))return{$type:"DateTime",value:X.toISOString()};Y.throwValidationError({kind:"InvalidArgumentValue",selectionPath:Y.getSelectionPath(),argumentPath:Y.getArgumentPath(),argument:{name:Y.getArgumentName(),typeNames:["Date"]},underlyingError:"Provided Date object is invalid"})}if(hX(X))return{$type:"FieldRef",value:{_ref:X.name,_container:X.modelName}};if(Array.isArray(X))return tP(X,Y);if(ArrayBuffer.isView(X))return{$type:"Bytes",value:Buffer.from(X).toString("base64")};if(rP(X))return X.values;if(yX(X))return{$type:"Decimal",value:X.toFixed()};if(X instanceof B9){if(X!==rW.instances[X._getName()])throw new Error("Invalid ObjectEnumValue");return{$type:"Enum",value:X._getName()}}if(aP(X))return X.toJSON();if(typeof X=="object")return BJ(X,Y);Y.throwValidationError({kind:"InvalidArgumentValue",selectionPath:Y.getSelectionPath(),argumentPath:Y.getArgumentPath(),argument:{name:Y.getArgumentName(),typeNames:[]},underlyingError:`We could not serialize ${Object.prototype.toString.call(X)} value. Serialize the object to JSON or implement a ".toJSON()" method on it`})}function BJ(X,Y){if(X.$type)return{$type:"Raw",value:X};let $={};for(let Z in X){let Q=X[Z],W=Y.nestArgument(Z);G2(Q)||(Q!==void 0?$[Z]=MJ(Q,W):Y.isPreviewFeatureOn("strictUndefinedChecks")&&Y.throwValidationError({kind:"InvalidArgumentValue",argumentPath:W.getArgumentPath(),selectionPath:Y.getSelectionPath(),argument:{name:Y.getArgumentName(),typeNames:[]},underlyingError:JJ}))}return $}function tP(X,Y){let $=[];for(let Z=0;Z<X.length;Z++){let Q=Y.nestArgument(String(Z)),W=X[Z];if(W===void 0||G2(W)){let J=W===void 0?"undefined":"Prisma.skip";Y.throwValidationError({kind:"InvalidArgumentValue",selectionPath:Q.getSelectionPath(),argumentPath:Q.getArgumentPath(),argument:{name:`${Y.getArgumentName()}[${Z}]`,typeNames:[]},underlyingError:`Can not use \`${J}\` value within array. Use \`null\` or filter out \`${J}\` values`})}$.push(MJ(W,Q))}return $}function rP(X){return typeof X=="object"&&X!==null&&X.__prismaRawParameters__===!0}function aP(X){return typeof X=="object"&&X!==null&&typeof X.toJSON=="function"}function iX(X,Y){X===void 0&&Y.isPreviewFeatureOn("strictUndefinedChecks")&&Y.throwValidationError({kind:"InvalidSelectionValue",selectionPath:Y.getSelectionPath(),underlyingError:JJ})}var eP=class X{constructor(Y){this.params=Y,this.params.modelName&&(this.modelOrType=this.params.runtimeDataModel.models[this.params.modelName]??this.params.runtimeDataModel.types[this.params.modelName])}throwValidationError(Y){YJ({errors:[Y],originalMethod:this.params.originalMethod,args:this.params.rootArgs??{},callsite:this.params.callsite,errorFormat:this.params.errorFormat,clientVersion:this.params.clientVersion,globalOmit:this.params.globalOmit})}getSelectionPath(){return this.params.selectionPath}getArgumentPath(){return this.params.argumentPath}getArgumentName(){return this.params.argumentPath[this.params.argumentPath.length-1]}getOutputTypeDescription(){if(!(!this.params.modelName||!this.modelOrType))return{name:this.params.modelName,fields:this.modelOrType.fields.map((Y)=>({name:Y.name,typeName:"boolean",isRelation:Y.kind==="object"}))}}isRawAction(){return["executeRaw","queryRaw","runCommandRaw","findRaw","aggregateRaw"].includes(this.params.action)}isPreviewFeatureOn(Y){return this.params.previewFeatures.includes(Y)}getComputedFields(){if(this.params.modelName)return this.params.extensions.getAllComputedFields(this.params.modelName)}findField(Y){return this.modelOrType?.fields.find(($)=>$.name===Y)}nestSelection(Y){let $=this.findField(Y),Z=$?.kind==="object"?$.type:void 0;return new X({...this.params,modelName:Z,selectionPath:this.params.selectionPath.concat(Y)})}getGlobalOmit(){return this.params.modelName&&this.shouldApplyGlobalOmit()?this.params.globalOmit?.[gX(this.params.modelName)]??{}:{}}shouldApplyGlobalOmit(){switch(this.params.action){case"findFirst":case"findFirstOrThrow":case"findUniqueOrThrow":case"findMany":case"upsert":case"findUnique":case"createManyAndReturn":case"create":case"update":case"delete":return!0;case"executeRaw":case"aggregateRaw":case"runCommandRaw":case"findRaw":case"createMany":case"deleteMany":case"groupBy":case"updateMany":case"count":case"aggregate":case"queryRaw":return!1;default:$9(this.params.action,"Unknown action")}}nestArgument(Y){return new X({...this.params,argumentPath:this.params.argumentPath.concat(Y)})}},UJ=class{constructor(X){this._engine=X}prometheus(X){return this._engine.metrics({format:"prometheus",...X})}json(X){return this._engine.metrics({format:"json",...X})}};function XS(X){return{models:r5(X.models),enums:r5(X.enums),types:r5(X.types)}}function r5(X){let Y={};for(let{name:$,...Z}of X)Y[$]=Z;return Y}function YS(X,Y){let $=SX(()=>$S(Y));Object.defineProperty(X,"dmmf",{get:()=>$.get()})}function $S(X){return{datamodel:{models:a5(X.models),enums:a5(X.enums),types:a5(X.types)}}}function a5(X){return Object.entries(X).map(([Y,$])=>({name:Y,...$}))}var e5=new WeakMap,t7="$$PrismaTypedSql",ZS=class{constructor(X,Y){e5.set(this,{sql:X,values:Y}),Object.defineProperty(this,t7,{value:t7})}get sql(){return e5.get(this).sql}get values(){return e5.get(this).values}};function QS(X){return(...Y)=>new ZS(X,Y)}function WS(X){return X!=null&&X[t7]===t7}function r7(X){return{ok:!1,error:X,map(){return r7(X)},flatMap(){return r7(X)}}}var JS=class{constructor(){this.registeredErrors=[]}consumeError(X){return this.registeredErrors[X]}registerNewError(X){let Y=0;for(;this.registeredErrors[Y]!==void 0;)Y++;return this.registeredErrors[Y]={error:X},Y}},zS=(X)=>{let Y=new JS,$=t8(Y,X.transactionContext.bind(X)),Z={adapterName:X.adapterName,errorRegistry:Y,queryRaw:t8(Y,X.queryRaw.bind(X)),executeRaw:t8(Y,X.executeRaw.bind(X)),provider:X.provider,transactionContext:async(...Q)=>(await $(...Q)).map((W)=>MS(Y,W))};return X.getConnectionInfo&&(Z.getConnectionInfo=US(Y,X.getConnectionInfo.bind(X))),Z},MS=(X,Y)=>{let $=t8(X,Y.startTransaction.bind(Y));return{adapterName:Y.adapterName,provider:Y.provider,queryRaw:t8(X,Y.queryRaw.bind(Y)),executeRaw:t8(X,Y.executeRaw.bind(Y)),startTransaction:async(...Z)=>(await $(...Z)).map((Q)=>BS(X,Q))}},BS=(X,Y)=>({adapterName:Y.adapterName,provider:Y.provider,options:Y.options,queryRaw:t8(X,Y.queryRaw.bind(Y)),executeRaw:t8(X,Y.executeRaw.bind(Y)),commit:t8(X,Y.commit.bind(Y)),rollback:t8(X,Y.rollback.bind(Y))});function t8(X,Y){return async(...$)=>{try{return await Y(...$)}catch(Z){let Q=X.registerNewError(Z);return r7({kind:"GenericJs",id:Q})}}}function US(X,Y){return(...$)=>{try{return Y(...$)}catch(Z){let Q=X.registerNewError(Z);return r7({kind:"GenericJs",id:Q})}}}var GS=F0(YW()),AS=import.meta.require("async_hooks"),wS=import.meta.require("events"),HS=F0(import.meta.require("fs")),y7=F0(import.meta.require("path")),v6=class X{constructor(Y,$){if(Y.length-1!==$.length)throw Y.length===0?new TypeError("Expected at least 1 string"):new TypeError(`Expected ${Y.length} strings to have ${Y.length-1} values`);let Z=$.reduce((J,z)=>J+(z instanceof X?z.values.length:1),0);this.values=new Array(Z),this.strings=new Array(Z+1),this.strings[0]=Y[0];let Q=0,W=0;for(;Q<$.length;){let J=$[Q++],z=Y[Q];if(J instanceof X){this.strings[W]+=J.strings[0];let M=0;for(;M<J.values.length;)this.values[W++]=J.values[M++],this.strings[W]=J.strings[M];this.strings[W]+=z}else this.values[W++]=J,this.strings[W]=z}}get sql(){let Y=this.strings.length,$=1,Z=this.strings[0];for(;$<Y;)Z+=`?${this.strings[$++]}`;return Z}get statement(){let Y=this.strings.length,$=1,Z=this.strings[0];for(;$<Y;)Z+=`:${$}${this.strings[$++]}`;return Z}get text(){let Y=this.strings.length,$=1,Z=this.strings[0];for(;$<Y;)Z+=`\$${$}${this.strings[$++]}`;return Z}inspect(){return{sql:this.sql,statement:this.statement,text:this.text,values:this.values}}};function qS(X,Y=",",$="",Z=""){if(X.length===0)throw new TypeError("Expected `join([])` to be called with an array of multiple elements, but got an empty array");return new v6([$,...Array(X.length-1).fill(Y),Z],X)}function GJ(X){return new v6([X],[])}var NS=GJ("");function DS(X,...Y){return new v6(X,Y)}function AJ(X){return{getKeys(){return Object.keys(X)},getPropertyValue(Y){return X[Y]}}}function r8(X,Y){return{getKeys(){return[X]},getPropertyValue(){return Y()}}}function lX(X){let Y=new y4;return{getKeys(){return X.getKeys()},getPropertyValue($){return Y.getOrCreate($,()=>X.getPropertyValue($))},getPropertyDescriptor($){return X.getPropertyDescriptor?.($)}}}var _X={enumerable:!0,configurable:!0,writable:!0};function wJ(X){let Y=new Set(X);return{getOwnPropertyDescriptor:()=>_X,has:($,Z)=>Y.has(Z),set:($,Z,Q)=>Y.add(Z)&&Reflect.set($,Z,Q),ownKeys:()=>[...Y]}}var VQ=Symbol.for("nodejs.util.inspect.custom");function l4(X,Y){let $=OS(Y),Z=new Set,Q=new Proxy(X,{get(W,J){if(Z.has(J))return W[J];let z=$.get(J);return z?z.getPropertyValue(J):W[J]},has(W,J){if(Z.has(J))return!0;let z=$.get(J);return z?z.has?.(J)??!0:Reflect.has(W,J)},ownKeys(W){let J=EQ(Reflect.ownKeys(W),$),z=EQ(Array.from($.keys()),$);return[...new Set([...J,...z,...Z])]},set(W,J,z){return $.get(J)?.getPropertyDescriptor?.(J)?.writable===!1?!1:(Z.add(J),Reflect.set(W,J,z))},getOwnPropertyDescriptor(W,J){let z=Reflect.getOwnPropertyDescriptor(W,J);if(z&&!z.configurable)return z;let M=$.get(J);return M?M.getPropertyDescriptor?{..._X,...M?.getPropertyDescriptor(J)}:_X:z},defineProperty(W,J,z){return Z.add(J),Reflect.defineProperty(W,J,z)}});return Q[VQ]=function(){let W={...this};return delete W[VQ],W},Q}function OS(X){let Y=new Map;for(let $ of X){let Z=$.getKeys();for(let Q of Z)Y.set(Q,$)}return Y}function EQ(X,Y){return X.filter(($)=>Y.get($)?.has?.($)??!0)}function FX(X){return{getKeys(){return X},has(){return!1},getPropertyValue(){}}}function oX(X,Y){return{batch:X,transaction:Y?.kind==="batch"?{isolationLevel:Y.options.isolationLevel}:void 0}}function LS(X){if(X===void 0)return"";let Y=uX(X);return new vW(0,{colors:pW}).write(Y).toString()}var PS="P2037";function a7({error:X,user_facing_error:Y},$,Z){return Y.error_code?new a8(SS(Y,Z),{code:Y.error_code,clientVersion:$,meta:Y.meta,batchRequestIdx:Y.batch_request_idx}):new A8(X,{clientVersion:$,batchRequestIdx:Y.batch_request_idx})}function SS(X,Y){let $=X.message;return(Y==="postgresql"||Y==="postgres"||Y==="mysql")&&X.error_code===PS&&($+=`
Prisma Accelerate has built-in connection pooling to prevent such errors: https://pris.ly/client/error-accelerate`),$}var Y7="<unknown>";function _S(X){var Y=X.split(`
`);return Y.reduce(function($,Z){var Q=RS(Z)||jS(Z)||ES(Z)||TS(Z)||xS(Z);return Q&&$.push(Q),$},[])}var FS=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|webpack|<anonymous>|\/|[a-z]:\\|\\\\).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,CS=/\((\S*)(?::(\d+))(?::(\d+))\)/;function RS(X){var Y=FS.exec(X);if(!Y)return null;var $=Y[2]&&Y[2].indexOf("native")===0,Z=Y[2]&&Y[2].indexOf("eval")===0,Q=CS.exec(Y[2]);return Z&&Q!=null&&(Y[2]=Q[1],Y[3]=Q[2],Y[4]=Q[3]),{file:$?null:Y[2],methodName:Y[1]||Y7,arguments:$?[Y[2]]:[],lineNumber:Y[3]?+Y[3]:null,column:Y[4]?+Y[4]:null}}var KS=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|webpack|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i;function jS(X){var Y=KS.exec(X);return Y?{file:Y[2],methodName:Y[1]||Y7,arguments:[],lineNumber:+Y[3],column:Y[4]?+Y[4]:null}:null}var bS=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|webpack|resource|\[native).*?|[^@]*bundle)(?::(\d+))?(?::(\d+))?\s*$/i,VS=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i;function ES(X){var Y=bS.exec(X);if(!Y)return null;var $=Y[3]&&Y[3].indexOf(" > eval")>-1,Z=VS.exec(Y[3]);return $&&Z!=null&&(Y[3]=Z[1],Y[4]=Z[2],Y[5]=null),{file:Y[3],methodName:Y[1]||Y7,arguments:Y[2]?Y[2].split(","):[],lineNumber:Y[4]?+Y[4]:null,column:Y[5]?+Y[5]:null}}var IS=/^\s*(?:([^@]*)(?:\((.*?)\))?@)?(\S.*?):(\d+)(?::(\d+))?\s*$/i;function xS(X){var Y=IS.exec(X);return Y?{file:Y[3],methodName:Y[1]||Y7,arguments:[],lineNumber:+Y[4],column:Y[5]?+Y[5]:null}:null}var kS=/^\s*at (?:((?:\[object object\])?[^\\/]+(?: \[as \S+\])?) )?\(?(.*?):(\d+)(?::(\d+))?\)?\s*$/i;function TS(X){var Y=kS.exec(X);return Y?{file:Y[2],methodName:Y[1]||Y7,arguments:[],lineNumber:+Y[3],column:Y[4]?+Y[4]:null}:null}var gS=class{getLocation(){return null}},fS=class{constructor(){this._error=new Error}getLocation(){let X=this._error.stack;if(!X)return null;let Y=_S(X).find(($)=>{if(!$.file)return!1;let Z=kO($.file);return Z!=="<anonymous>"&&!Z.includes("@prisma")&&!Z.includes("/packages/client/src/runtime/")&&!Z.endsWith("/runtime/binary.js")&&!Z.endsWith("/runtime/library.js")&&!Z.endsWith("/runtime/edge.js")&&!Z.endsWith("/runtime/edge-esm.js")&&!Z.startsWith("internal/")&&!$.methodName.includes("new ")&&!$.methodName.includes("getCallSite")&&!$.methodName.includes("Proxy.")&&$.methodName.split(".").length<4});return!Y||!Y.file?null:{fileName:Y.file,lineNumber:Y.lineNumber,columnNumber:Y.column}}};function d4(X){return X==="minimal"?typeof $EnabledCallSite=="function"&&X!=="minimal"?new $EnabledCallSite:new gS:new fS}var yS={_avg:!0,_count:!0,_sum:!0,_min:!0,_max:!0};function e7(X={}){let Y=dS(X);return Object.entries(Y).reduce(($,[Z,Q])=>(yS[Z]!==void 0?$.select[Z]={select:Q}:$[Z]=Q,$),{select:{}})}function dS(X={}){return typeof X._count=="boolean"?{...X,_count:{_all:X._count}}:X}function CX(X={}){return(Y)=>(typeof X._count=="boolean"&&(Y._count=Y._count._all),Y)}function vS(X,Y){let $=CX(X);return Y({action:"aggregate",unpacker:$,argsMapper:e7})(X)}function pS(X={}){let{select:Y,...$}=X;return typeof Y=="object"?e7({...$,_count:Y}):e7({...$,_count:{_all:!0}})}function hS(X={}){return typeof X.select=="object"?(Y)=>CX(X)(Y)._count:(Y)=>CX(X)(Y)._count._all}function mS(X,Y){return Y({action:"count",unpacker:hS(X),argsMapper:pS})(X)}function cS(X={}){let Y=e7(X);if(Array.isArray(Y.by))for(let $ of Y.by)typeof $=="string"&&(Y.select[$]=!0);else typeof Y.by=="string"&&(Y.select[Y.by]=!0);return Y}function uS(X={}){return(Y)=>(typeof X?._count=="boolean"&&Y.forEach(($)=>{$._count=$._count._all}),Y)}function iS(X,Y){return Y({action:"groupBy",unpacker:uS(X),argsMapper:cS})(X)}function lS(X,Y,$){if(Y==="aggregate")return(Z)=>vS(Z,$);if(Y==="count")return(Z)=>mS(Z,$);if(Y==="groupBy")return(Z)=>iS(Z,$)}function oS(X,Y){let $=Y.fields.filter((Q)=>!Q.relationName),Z=iO($,(Q)=>Q.name);return new Proxy({},{get(Q,W){if(W in Q||typeof W=="symbol")return Q[W];let J=Z[W];if(J)return new tW(X,W,J.type,J.isList,J.kind==="enum")},...wJ(Object.keys(Z))})}var HJ=(X)=>Array.isArray(X)?X:X.split("."),qJ=(X,Y)=>HJ(Y).reduce(($,Z)=>$&&$[Z],X),nS=(X,Y,$)=>HJ(Y).reduceRight((Z,Q,W,J)=>Object.assign({},qJ(X,J.slice(0,W)),{[Q]:Z}),$);function sS(X,Y){return X===void 0||Y===void 0?[]:[...Y,"select",X]}function tS(X,Y,$){return Y===void 0?X??{}:nS(Y,$,X||!0)}function NJ(X,Y,$,Z,Q,W){let J=X._runtimeDataModel.models[Y].fields.reduce((z,M)=>({...z,[M.name]:M}),{});return(z)=>{let M=d4(X._errorFormat),B=sS(Z,Q),U=tS(z,W,B),A=$({dataPath:B,callsite:M})(U),w=rS(X,Y);return new Proxy(A,{get(G,H){if(!w.includes(H))return G[H];let q=[J[H].type,$,H],_=[B,U];return NJ(X,...q,..._)},...wJ([...w,...Object.getOwnPropertyNames(A)])})}}function rS(X,Y){return X._runtimeDataModel.models[Y].fields.filter(($)=>$.kind==="object").map(($)=>$.name)}function aS(X,Y,$,Z){return X===c4.ModelAction.findFirstOrThrow||X===c4.ModelAction.findUniqueOrThrow?eS(Y,$,Z):Z}function eS(X,Y,$){return async(Z)=>{if("rejectOnNotFound"in Z.args){let Q=dX({originalMethod:Z.clientMethod,callsite:Z.callsite,message:"'rejectOnNotFound' option is not supported"});throw new K8(Q,{clientVersion:Y})}return await $(Z).catch((Q)=>{throw Q instanceof a8&&Q.code==="P2025"?new Z9(`No ${X} found`,Y):Q})}}var X_=["findUnique","findUniqueOrThrow","findFirst","findFirstOrThrow","create","update","upsert","delete"],Y_=["aggregate","count","groupBy"];function IQ(X,Y){let $=X._extensions.getAllModelExtensions(Y)??{},Z=[$_(X,Y),Q_(X,Y),AJ($),r8("name",()=>Y),r8("$name",()=>Y),r8("$parent",()=>X._appliedParent)];return l4({},Z)}function $_(X,Y){let $=X7(Y),Z=Object.keys(c4.ModelAction).concat("count");return{getKeys(){return Z},getPropertyValue(Q){let W=Q,J=(M)=>X._request(M);J=aS(W,Y,X._clientVersion,J);let z=(M)=>(B)=>{let U=d4(X._errorFormat);return X._createPrismaPromise((A)=>{let w={args:B,dataPath:[],action:W,model:Y,clientMethod:`${$}.${Q}`,jsModelName:$,transaction:A,callsite:U};return J({...w,...M})})};return X_.includes(W)?NJ(X,Y,z):Z_(Q)?lS(X,Q,z):z({})}}}function Z_(X){return Y_.includes(X)}function Q_(X,Y){return lX(r8("fields",()=>{let $=X._runtimeDataModel.models[Y];return oS(Y,$)}))}function W_(X){return X.replace(/^./,(Y)=>Y.toUpperCase())}var RX=Symbol();function KX(X){let Y=[J_(X),r8(RX,()=>X),r8("$parent",()=>X._appliedParent)],$=X._extensions.getAllClientExtensions();return $&&Y.push(AJ($)),l4(X,Y)}function J_(X){let Y=Object.keys(X._runtimeDataModel.models),$=Y.map(X7),Z=[...new Set(Y.concat($))];return lX({getKeys(){return Z},getPropertyValue(Q){let W=W_(Q);if(X._runtimeDataModel.models[W]!==void 0)return IQ(X,W);if(X._runtimeDataModel.models[Q]!==void 0)return IQ(X,Q)},getPropertyDescriptor(Q){if(!$.includes(Q))return{enumerable:!1}}})}function z_(X){return X[RX]?X[RX]:X}function M_(X){if(typeof X=="function")return X(this);if(X.client?.__AccelerateEngine){let $=X.client.__AccelerateEngine;this._originalClient._engine=new $(this._originalClient._accelerateEngineConfig)}let Y=Object.create(this._originalClient,{_extensions:{value:this._extensions.append(X)},_appliedParent:{value:this,configurable:!0},$use:{value:void 0},$on:{value:void 0}});return KX(Y)}function B_({result:X,modelName:Y,select:$,omit:Z,extensions:Q}){let W=Q.getAllComputedFields(Y);if(!W)return X;let J=[],z=[];for(let M of Object.values(W)){if(Z){if(Z[M.name])continue;let B=M.needs.filter((U)=>Z[U]);B.length>0&&z.push(FX(B))}else if($){if(!$[M.name])continue;let B=M.needs.filter((U)=>!$[U]);B.length>0&&z.push(FX(B))}U_(X,M.needs)&&J.push(G_(M,l4(X,J)))}return J.length>0||z.length>0?l4(X,[...J,...z]):X}function U_(X,Y){return Y.every(($)=>uO(X,$))}function G_(X,Y){return lX(r8(X.name,()=>X.compute(Y)))}function nX({visitor:X,result:Y,args:$,runtimeDataModel:Z,modelName:Q}){if(Array.isArray(Y)){for(let J=0;J<Y.length;J++)Y[J]=nX({result:Y[J],args:$,modelName:Q,runtimeDataModel:Z,visitor:X});return Y}let W=X(Y,Q,$)??Y;return $.include&&xQ({includeOrSelect:$.include,result:W,parentModelName:Q,runtimeDataModel:Z,visitor:X}),$.select&&xQ({includeOrSelect:$.select,result:W,parentModelName:Q,runtimeDataModel:Z,visitor:X}),W}function xQ({includeOrSelect:X,result:Y,parentModelName:$,runtimeDataModel:Z,visitor:Q}){for(let[W,J]of Object.entries(X)){if(!J||Y[W]==null||G2(J))continue;let z=Z.models[$].fields.find((B)=>B.name===W);if(!z||z.kind!=="object"||!z.relationName)continue;let M=typeof J=="object"?J:{};Y[W]=nX({visitor:Q,result:Y[W],args:M,modelName:z.type,runtimeDataModel:Z})}}function A_({result:X,modelName:Y,args:$,extensions:Z,runtimeDataModel:Q,globalOmit:W}){return Z.isEmpty()||X==null||typeof X!="object"||!Q.models[Y]?X:nX({result:X,args:$??{},modelName:Y,runtimeDataModel:Q,visitor:(J,z,M)=>{let B=X7(z);return B_({result:J,modelName:B,select:M.select,omit:M.select?void 0:{...W?.[B],...M.omit},extensions:Z})}})}function w_(X){if(X instanceof v6)return H_(X);if(Array.isArray(X)){let $=[X[0]];for(let Z=1;Z<X.length;Z++)$[Z]=v4(X[Z]);return $}let Y={};for(let $ in X)Y[$]=v4(X[$]);return Y}function H_(X){return new v6(X.strings,X.values)}function v4(X){if(typeof X!="object"||X==null||X instanceof B9||hX(X))return X;if(yX(X))return new r4(X.toFixed());if(fX(X))return new Date(+X);if(ArrayBuffer.isView(X))return X.slice(0);if(Array.isArray(X)){let Y=X.length,$;for($=Array(Y);Y--;)$[Y]=v4(X[Y]);return $}if(typeof X=="object"){let Y={};for(let $ in X)$==="__proto__"?Object.defineProperty(Y,$,{value:v4(X[$]),configurable:!0,enumerable:!0,writable:!0}):Y[$]=v4(X[$]);return Y}$9(X,"Unknown value")}function DJ(X,Y,$,Z=0){return X._createPrismaPromise((Q)=>{let W=Y.customDataProxyFetch;return"transaction"in Y&&Q!==void 0&&(Y.transaction?.kind==="batch"&&Y.transaction.lock.then(),Y.transaction=Q),Z===$.length?X._executeRequest(Y):$[Z]({model:Y.model,operation:Y.model?Y.action:Y.clientMethod,args:w_(Y.args??{}),__internalParams:Y,query:(J,z=Y)=>{let M=z.customDataProxyFetch;return z.customDataProxyFetch=LJ(W,M),z.args=J,DJ(X,z,$,Z+1)}})})}function q_(X,Y){let{jsModelName:$,action:Z,clientMethod:Q}=Y,W=$?Z:Q;if(X._extensions.isEmpty())return X._executeRequest(Y);let J=X._extensions.getAllQueryCallbacks($??"$none",W);return DJ(X,Y,J)}function N_(X){return(Y)=>{let $={requests:Y},Z=Y[0].extensions.getAllBatchQueryCallbacks();return Z.length?OJ($,Z,0,X):X($)}}function OJ(X,Y,$,Z){if($===Y.length)return Z(X);let Q=X.customDataProxyFetch,W=X.requests[0].transaction;return Y[$]({args:{queries:X.requests.map((J)=>({model:J.modelName,operation:J.action,args:J.args})),transaction:W?{isolationLevel:W.kind==="batch"?W.isolationLevel:void 0}:void 0},__internalParams:X,query(J,z=X){let M=z.customDataProxyFetch;return z.customDataProxyFetch=LJ(Q,M),OJ(z,Y,$+1,Z)}})}var kQ=(X)=>X;function LJ(X=kQ,Y=kQ){return($)=>X(Y($))}var TQ=b1("prisma:client"),gQ={Vercel:"vercel","Netlify CI":"netlify"};function D_({postinstall:X,ciName:Y,clientVersion:$}){if(TQ("checkPlatformCaching:postinstall",X),TQ("checkPlatformCaching:ciName",Y),X===!0&&Y&&Y in gQ){let Z=`Prisma has detected that this project was built on ${Y}, which caches dependencies. This leads to an outdated Prisma Client because Prisma's auto-generation isn't triggered. To fix this, make sure to run the \`prisma generate\` command during the build process.

Learn how: https://pris.ly/d/${gQ[Y]}-build`;throw console.error(Z),new r0(Z,$)}}function O_(X,Y){return X?X.datasources?X.datasources:X.datasourceUrl?{[Y[0]]:{url:X.datasourceUrl}}:{}:{}}var L_="Cloudflare-Workers",P_="node";function S_(){return typeof Netlify=="object"?"netlify":typeof EdgeRuntime=="string"?"edge-light":globalThis.navigator?.userAgent===L_?"workerd":globalThis.Deno?"deno":globalThis.__lagon__?"lagon":globalThis.process?.release?.name===P_?"node":globalThis.Bun?"bun":globalThis.fastly?"fastly":"unknown"}var __={node:"Node.js",workerd:"Cloudflare Workers",deno:"Deno and Deno Deploy",netlify:"Netlify Edge Functions","edge-light":"Edge Runtime (Vercel Edge Functions, Vercel Edge Middleware, Next.js (Pages Router) Edge API Routes, Next.js (App Router) Edge Route Handlers or Next.js Middleware)"};function PJ(){let X=S_();return{id:X,prettyName:__[X]||X,isEdge:["workerd","deno","netlify","edge-light"].includes(X)}}var F_=F0(import.meta.require("fs")),m7=F0(import.meta.require("path"));function SJ(X){let{runtimeBinaryTarget:Y}=X;return`Add "${Y}" to \`binaryTargets\` in the "schema.prisma" file and run \`prisma generate\` after saving it:

${C_(X)}`}function C_(X){let{generator:Y,generatorBinaryTargets:$,runtimeBinaryTarget:Z}=X,Q={fromEnvVar:null,value:Z},W=[...$,Q];return gO({...Y,binaryTargets:W})}function U9(X){let{runtimeBinaryTarget:Y}=X;return`Prisma Client could not locate the Query Engine for runtime "${Y}".`}function G9(X){let{searchedLocations:Y}=X;return`The following locations have been searched:
${[...new Set(Y)].map(($)=>`  ${$}`).join(`
`)}`}function R_(X){let{runtimeBinaryTarget:Y}=X;return`${U9(X)}

This happened because \`binaryTargets\` have been pinned, but the actual deployment also required "${Y}".
${SJ(X)}

${G9(X)}`}function _J(X){return`We would appreciate if you could take the time to share some information with us.
Please help us by answering a few questions: https://pris.ly/${X}`}function FJ(X){let{errorStack:Y}=X;return Y?.match(/\/\.next|\/next@|\/next\//)?`

We detected that you are using Next.js, learn how to fix this: https://pris.ly/d/engine-not-found-nextjs.`:""}function K_(X){let{queryEngineName:Y}=X;return`${U9(X)}${FJ(X)}

This is likely caused by a bundler that has not copied "${Y}" next to the resulting bundle.
Ensure that "${Y}" has been copied next to the bundle or in "${X.expectedLocation}".

${_J("engine-not-found-bundler-investigation")}

${G9(X)}`}function j_(X){let{runtimeBinaryTarget:Y,generatorBinaryTargets:$}=X,Z=$.find((Q)=>Q.native);return`${U9(X)}

This happened because Prisma Client was generated for "${Z?.value??"unknown"}", but the actual deployment required "${Y}".
${SJ(X)}

${G9(X)}`}function b_(X){let{queryEngineName:Y}=X;return`${U9(X)}${FJ(X)}

This is likely caused by tooling that has not copied "${Y}" to the deployment folder.
Ensure that you ran \`prisma generate\` and that "${Y}" has been copied to "${X.expectedLocation}".

${_J("engine-not-found-tooling-investigation")}

${G9(X)}`}var V_=b1("prisma:client:engines:resolveEnginePath"),E_=()=>new RegExp("runtime[\\\\/]library\\.m?js$");async function I_(X,Y){let $={binary:process.env.PRISMA_QUERY_ENGINE_BINARY,library:process.env.PRISMA_QUERY_ENGINE_LIBRARY}[X]??Y.prismaPath;if($!==void 0)return $;let{enginePath:Z,searchedLocations:Q}=await x_(X,Y);if(V_("enginePath",Z),Z!==void 0&&X==="binary"&&KO(Z),Z!==void 0)return Y.prismaPath=Z;let W=await xX(),J=Y.generator?.binaryTargets??[],z=J.some((w)=>w.native),M=!J.some((w)=>w.value===W),B=__filename.match(E_())===null,U={searchedLocations:Q,generatorBinaryTargets:J,generator:Y.generator,runtimeBinaryTarget:W,queryEngineName:CJ(X,W),expectedLocation:m7.default.relative(process.cwd(),Y.dirname),errorStack:new Error().stack},A;throw z&&M?A=j_(U):M?A=R_(U):B?A=K_(U):A=b_(U),new r0(A,Y.clientVersion)}async function x_(engineType,config){let binaryTarget=await xX(),searchedLocations=[],dirname=eval("__dirname"),searchLocations=[config.dirname,m7.default.resolve(dirname,".."),config.generator?.output?.value??dirname,m7.default.resolve(dirname,"../../../.prisma/client"),"/tmp/prisma-engines",config.cwd];__filename.includes("resolveEnginePath")&&searchLocations.push(RO());for(let X of searchLocations){let Y=CJ(engineType,binaryTarget),$=m7.default.join(X,Y);if(searchedLocations.push(X),F_.default.existsSync($))return{enginePath:$,searchedLocations}}return{enginePath:void 0,searchedLocations}}function CJ(X,Y){return X==="library"?XO(Y,"fs"):`query-engine-${Y}${Y==="windows"?".exe":""}`}var fQ=F0(QW());function k_(X){return X?X.replace(/".*"/g,'"X"').replace(/[\s:\[]([+-]?([0-9]*[.])?[0-9]+)/g,(Y)=>`${Y[0]}5`):""}function T_(X){return X.split(`
`).map((Y)=>Y.replace(/^\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)\s*/,"").replace(/\+\d+\s*ms$/,"")).join(`
`)}var g_=F0(CD());function f_({title:X,user:Y="prisma",repo:$="prisma",template:Z="bug_report.yml",body:Q}){return g_.default({user:Y,repo:$,template:Z,title:X,body:Q})}function y_({version:X,binaryTarget:Y,title:$,description:Z,engineVersion:Q,database:W,query:J}){let z=sD(6000-(J?.length??0)),M=T_(fQ.default(z)),B=Z?`# Description
\`\`\`
${Z}
\`\`\``:"",U=fQ.default(`Hi Prisma Team! My Prisma Client just crashed. This is the report:
## Versions

| Name            | Version            |
|-----------------|--------------------|
| Node            | ${process.version?.padEnd(19)}| 
| OS              | ${Y?.padEnd(19)}|
| Prisma Client   | ${X?.padEnd(19)}|
| Query Engine    | ${Q?.padEnd(19)}|
| Database        | ${W?.padEnd(19)}|

${B}

## Logs
\`\`\`
${M}
\`\`\`

## Client Snippet
\`\`\`ts
// PLEASE FILL YOUR CODE SNIPPET HERE
\`\`\`

## Schema
\`\`\`prisma
// PLEASE ADD YOUR SCHEMA HERE IF POSSIBLE
\`\`\`

## Prisma Engine Query
\`\`\`
${J?k_(J):""}
\`\`\`
`),A=f_({title:$,body:U});return`${$}

This is a non-recoverable error which probably happens when the Prisma Query Engine has a panic.

${G8(A)}

If you want the Prisma team to look into it, please open the link above \uD83D\uDE4F
To increase the chance of success, please post your schema and a snippet of
how you used Prisma Client in the issue. 
`}function sX({inlineDatasources:X,overrideDatasources:Y,env:$,clientVersion:Z}){let Q,W=Object.keys(X)[0],J=X[W]?.url,z=Y[W]?.url;if(W===void 0?Q=void 0:z?Q=z:J?.value?Q=J.value:J?.fromEnvVar&&(Q=$[J.fromEnvVar]),J?.fromEnvVar!==void 0&&Q===void 0)throw new r0(`error: Environment variable not found: ${J.fromEnvVar}.`,Z);if(Q===void 0)throw new r0("error: Missing URL environment variable, value, or override.",Z);return Q}var d_=class extends Error{constructor(X,Y){super(X),this.clientVersion=Y.clientVersion,this.cause=Y.cause}get[Symbol.toStringTag](){return this.name}},x2=class extends d_{constructor(X,Y){super(X,Y),this.isRetryable=Y.isRetryable??!0}};function C1(X,Y){return{...X,isRetryable:Y}}var jX=class extends x2{constructor(X){super("This request must be retried",C1(X,!0));this.name="ForcedRetryError",this.code="P5001"}};i0(jX,"ForcedRetryError");var c7=class extends x2{constructor(X,Y){super(X,C1(Y,!1));this.name="InvalidDatasourceError",this.code="P6001"}};i0(c7,"InvalidDatasourceError");var tX=class extends x2{constructor(X,Y){super(X,C1(Y,!1));this.name="NotImplementedYetError",this.code="P5004"}};i0(tX,"NotImplementedYetError");var H8=class extends x2{constructor(X,Y){super(X,Y),this.response=Y.response;let $=this.response.headers.get("prisma-request-id");if($){let Z=`(The request id was: ${$})`;this.message=this.message+" "+Z}}},rX=class extends H8{constructor(X){super("Schema needs to be uploaded",C1(X,!0));this.name="SchemaMissingError",this.code="P5005"}};i0(rX,"SchemaMissingError");var RJ="This request could not be understood by the server",KJ=class extends H8{constructor(X,Y,$){super(Y||RJ,C1(X,!1));this.name="BadRequestError",this.code="P5000",$&&(this.code=$)}};i0(KJ,"BadRequestError");var jJ=class extends H8{constructor(X,Y){super("Engine not started: healthcheck timeout",C1(X,!0));this.name="HealthcheckTimeoutError",this.code="P5013",this.logs=Y}};i0(jJ,"HealthcheckTimeoutError");var bJ=class extends H8{constructor(X,Y,$){super(Y,C1(X,!0));this.name="EngineStartupError",this.code="P5014",this.logs=$}};i0(bJ,"EngineStartupError");var VJ=class extends H8{constructor(X){super("Engine version is not supported",C1(X,!1));this.name="EngineVersionNotSupportedError",this.code="P5012"}};i0(VJ,"EngineVersionNotSupportedError");var EJ="Request timed out",IJ=class extends H8{constructor(X,Y=EJ){super(Y,C1(X,!1));this.name="GatewayTimeoutError",this.code="P5009"}};i0(IJ,"GatewayTimeoutError");var v_="Interactive transaction error",xJ=class extends H8{constructor(X,Y=v_){super(Y,C1(X,!1));this.name="InteractiveTransactionError",this.code="P5015"}};i0(xJ,"InteractiveTransactionError");var p_="Request parameters are invalid",kJ=class extends H8{constructor(X,Y=p_){super(Y,C1(X,!1));this.name="InvalidRequestError",this.code="P5011"}};i0(kJ,"InvalidRequestError");var TJ="Requested resource does not exist",gJ=class extends H8{constructor(X,Y=TJ){super(Y,C1(X,!1));this.name="NotFoundError",this.code="P5003"}};i0(gJ,"NotFoundError");var fJ="Unknown server error",bX=class extends H8{constructor(X,Y,$){super(Y||fJ,C1(X,!0));this.name="ServerError",this.code="P5006",this.logs=$}};i0(bX,"ServerError");var yJ="Unauthorized, check your connection string",dJ=class extends H8{constructor(X,Y=yJ){super(Y,C1(X,!1));this.name="UnauthorizedError",this.code="P5007"}};i0(dJ,"UnauthorizedError");var vJ="Usage exceeded, retry again later",pJ=class extends H8{constructor(X,Y=vJ){super(Y,C1(X,!0));this.name="UsageExceededError",this.code="P5008"}};i0(pJ,"UsageExceededError");async function h_(X){let Y;try{Y=await X.text()}catch{return{type:"EmptyError"}}try{let $=JSON.parse(Y);if(typeof $=="string")switch($){case"InternalDataProxyError":return{type:"DataProxyError",body:$};default:return{type:"UnknownTextError",body:$}}if(typeof $=="object"&&$!==null){if("is_panic"in $&&"message"in $&&"error_code"in $)return{type:"QueryEngineError",body:$};if("EngineNotStarted"in $||"InteractiveTransactionMisrouted"in $||"InvalidRequestError"in $){let Z=Object.values($)[0].reason;return typeof Z=="string"&&!["SchemaMissing","EngineVersionNotSupported"].includes(Z)?{type:"UnknownJsonError",body:$}:{type:"DataProxyError",body:$}}}return{type:"UnknownJsonError",body:$}}catch{return Y===""?{type:"EmptyError"}:{type:"UnknownTextError",body:Y}}}async function d7(X,Y){if(X.ok)return;let $={clientVersion:Y,response:X},Z=await h_(X);if(Z.type==="QueryEngineError")throw new a8(Z.body.message,{code:Z.body.error_code,clientVersion:Y});if(Z.type==="DataProxyError"){if(Z.body==="InternalDataProxyError")throw new bX($,"Internal Data Proxy error");if("EngineNotStarted"in Z.body){if(Z.body.EngineNotStarted.reason==="SchemaMissing")return new rX($);if(Z.body.EngineNotStarted.reason==="EngineVersionNotSupported")throw new VJ($);if("EngineStartupError"in Z.body.EngineNotStarted.reason){let{msg:Q,logs:W}=Z.body.EngineNotStarted.reason.EngineStartupError;throw new bJ($,Q,W)}if("KnownEngineStartupError"in Z.body.EngineNotStarted.reason){let{msg:Q,error_code:W}=Z.body.EngineNotStarted.reason.KnownEngineStartupError;throw new r0(Q,Y,W)}if("HealthcheckTimeout"in Z.body.EngineNotStarted.reason){let{logs:Q}=Z.body.EngineNotStarted.reason.HealthcheckTimeout;throw new jJ($,Q)}}if("InteractiveTransactionMisrouted"in Z.body)throw new xJ($,{IDParseError:"Could not parse interactive transaction ID",NoQueryEngineFoundError:"Could not find Query Engine for the specified host and transaction ID",TransactionStartError:"Could not start interactive transaction"}[Z.body.InteractiveTransactionMisrouted.reason]);if("InvalidRequestError"in Z.body)throw new kJ($,Z.body.InvalidRequestError.reason)}if(X.status===401||X.status===403)throw new dJ($,j2(yJ,Z));if(X.status===404)return new gJ($,j2(TJ,Z));if(X.status===429)throw new pJ($,j2(vJ,Z));if(X.status===504)throw new IJ($,j2(EJ,Z));if(X.status>=500)throw new bX($,j2(fJ,Z));if(X.status>=400)throw new KJ($,j2(RJ,Z))}function j2(X,Y){return Y.type==="EmptyError"?X:`${X}: ${JSON.stringify(Y)}`}function m_(X){let Y=Math.pow(2,X)*50,$=Math.ceil(Math.random()*Y)-Math.ceil(Y/2),Z=Y+$;return new Promise((Q)=>setTimeout(()=>Q(Z),Z))}var D6="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function c_(X){let Y=new TextEncoder().encode(X),$="",Z=Y.byteLength,Q=Z%3,W=Z-Q,J,z,M,B,U;for(let A=0;A<W;A=A+3)U=Y[A]<<16|Y[A+1]<<8|Y[A+2],J=(U&16515072)>>18,z=(U&258048)>>12,M=(U&4032)>>6,B=U&63,$+=D6[J]+D6[z]+D6[M]+D6[B];return Q==1?(U=Y[W],J=(U&252)>>2,z=(U&3)<<4,$+=D6[J]+D6[z]+"=="):Q==2&&(U=Y[W]<<8|Y[W+1],J=(U&64512)>>10,z=(U&1008)>>4,M=(U&15)<<2,$+=D6[J]+D6[z]+D6[M]+"="),$}function u_(X){if(X.generator?.previewFeatures.some((Y)=>Y.toLowerCase().includes("metrics")))throw new r0("The `metrics` preview feature is not yet available with Accelerate.\nPlease remove `metrics` from the `previewFeatures` in your schema.\n\nMore information about Accelerate: https://pris.ly/d/accelerate",X.clientVersion)}function i_(X){return X[0]*1000+X[1]/1e6}function l_(X){return new Date(i_(X))}var o_={"@prisma/debug":"workspace:*","@prisma/engines-version":"5.22.0-44.605197351a3c8bdd595af2d2a9bc3025bca48ea2","@prisma/fetch-engine":"workspace:*","@prisma/get-platform":"workspace:*"},hJ=class extends x2{constructor(X,Y){super(`Cannot fetch data from service:
${X}`,C1(Y,!0));this.name="RequestError",this.code="P5010"}};i0(hJ,"RequestError");async function k4(X,Y,$=(Z)=>Z){let Z=Y.clientVersion;try{return typeof fetch=="function"?await $(fetch)(X,Y):await $(VX)(X,Y)}catch(Q){let W=Q.message??"Unknown error";throw new hJ(W,{clientVersion:Z})}}function n_(X){return{...X.headers,"Content-Type":"application/json"}}function s_(X){return{method:X.method,headers:n_(X)}}function t_(X,Y){return{text:()=>Promise.resolve(Buffer.concat(X).toString()),json:()=>Promise.resolve().then(()=>JSON.parse(Buffer.concat(X).toString())),ok:Y.statusCode>=200&&Y.statusCode<=299,status:Y.statusCode,url:Y.url,headers:new a_(Y.headers)}}async function VX(X,Y={}){let $=r_("https"),Z=s_(Y),Q=[],{origin:W}=new URL(X);return new Promise((J,z)=>{let M=$.request(X,Z,(B)=>{let{statusCode:U,headers:{location:A}}=B;U>=301&&U<=399&&A&&(A.startsWith("http")===!1?J(VX(`${W}${A}`,Y)):J(VX(A,Y))),B.on("data",(w)=>Q.push(w)),B.on("end",()=>J(t_(Q,B))),B.on("error",z)});M.on("error",z),M.end(Y.body??"")})}var r_="function"<"u"?import.meta.require:()=>{},a_=class{constructor(X={}){this.headers=new Map;for(let[Y,$]of Object.entries(X))if(typeof $=="string")this.headers.set(Y,$);else if(Array.isArray($))for(let Z of $)this.headers.set(Y,Z)}append(X,Y){this.headers.set(X,Y)}delete(X){this.headers.delete(X)}get(X){return this.headers.get(X)??null}has(X){return this.headers.has(X)}set(X,Y){this.headers.set(X,Y)}forEach(X,Y){for(let[$,Z]of this.headers)X.call(Y,Z,$,this)}},e_=/^[1-9][0-9]*\.[0-9]+\.[0-9]+$/,mJ=b1("prisma:client:dataproxyEngine");async function XF(X,Y){let $=o_["@prisma/engines-version"],Z=Y.clientVersion??"unknown";if(process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION)return process.env.PRISMA_CLIENT_DATA_PROXY_CLIENT_VERSION;if(X.includes("accelerate")&&Z!=="0.0.0"&&Z!=="in-memory")return Z;let[Q,W]=Z?.split("-")??[];if(W===void 0&&e_.test(Q))return Q;if(W!==void 0||Z==="0.0.0"||Z==="in-memory"){if(X.startsWith("localhost")||X.startsWith("127.0.0.1"))return"0.0.0";let[J]=$.split("-")??[],[z,M,B]=J.split("."),U=$F(`<=${z}.${M}.${B}`),A=await k4(U,{clientVersion:Z});if(!A.ok)throw new Error(`Failed to fetch stable Prisma version, unpkg.com status ${A.status} ${A.statusText}, response body: ${await A.text()||"<empty body>"}`);let w=await A.text();mJ("length of body fetched from unpkg.com",w.length);let G;try{G=JSON.parse(w)}catch(H){throw console.error("JSON.parse error: body fetched from unpkg.com: ",w),H}return G.version}throw new tX("Only `major.minor.patch` versions are supported by Accelerate.",{clientVersion:Z})}async function YF(X,Y){let $=await XF(X,Y);return mJ("version",$),$}function $F(X){return encodeURI(`https://unpkg.com/prisma@${X}/package.json`)}var yQ=3,XX=b1("prisma:client:dataproxyEngine"),ZF=class{constructor({apiKey:X,tracingHelper:Y,logLevel:$,logQueries:Z,engineHash:Q}){this.apiKey=X,this.tracingHelper=Y,this.logLevel=$,this.logQueries=Z,this.engineHash=Q}build({traceparent:X,interactiveTransaction:Y}={}){let $={Authorization:`Bearer ${this.apiKey}`,"Prisma-Engine-Hash":this.engineHash};this.tracingHelper.isEnabled()&&($.traceparent=X??this.tracingHelper.getTraceParent()),Y&&($["X-transaction-id"]=Y.id);let Z=this.buildCaptureSettings();return Z.length>0&&($["X-capture-telemetry"]=Z.join(", ")),$}buildCaptureSettings(){let X=[];return this.tracingHelper.isEnabled()&&X.push("tracing"),this.logLevel&&X.push(this.logLevel),this.logQueries&&X.push("query"),X}},QF=class{constructor(X){this.name="DataProxyEngine",u_(X),this.config=X,this.env={...X.env,...typeof process<"u"?process.env:{}},this.inlineSchema=c_(X.inlineSchema),this.inlineDatasources=X.inlineDatasources,this.inlineSchemaHash=X.inlineSchemaHash,this.clientVersion=X.clientVersion,this.engineHash=X.engineVersion,this.logEmitter=X.logEmitter,this.tracingHelper=X.tracingHelper}apiKey(){return this.headerBuilder.apiKey}version(){return this.engineHash}async start(){this.startPromise!==void 0&&await this.startPromise,this.startPromise=(async()=>{let[X,Y]=this.extractHostAndApiKey();this.host=X,this.headerBuilder=new ZF({apiKey:Y,tracingHelper:this.tracingHelper,logLevel:this.config.logLevel,logQueries:this.config.logQueries,engineHash:this.engineHash}),this.remoteClientVersion=await YF(X,this.config),XX("host",this.host)})(),await this.startPromise}async stop(){}propagateResponseExtensions(X){X?.logs?.length&&X.logs.forEach((Y)=>{switch(Y.level){case"debug":case"error":case"trace":case"warn":case"info":break;case"query":{let $=typeof Y.attributes.query=="string"?Y.attributes.query:"";if(!this.tracingHelper.isEnabled()){let[Z]=$.split("/* traceparent");$=Z}this.logEmitter.emit("query",{query:$,timestamp:l_(Y.timestamp),duration:Number(Y.attributes.duration_ms),params:Y.attributes.params,target:Y.attributes.target})}}}),X?.traces?.length&&this.tracingHelper.createEngineSpan({span:!0,spans:X.traces})}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the remote query engine')}async url(X){return await this.start(),`https://${this.host}/${this.remoteClientVersion}/${this.inlineSchemaHash}/${X}`}async uploadSchema(){let X={name:"schemaUpload",internal:!0};return this.tracingHelper.runInChildSpan(X,async()=>{let Y=await k4(await this.url("schema"),{method:"PUT",headers:this.headerBuilder.build(),body:this.inlineSchema,clientVersion:this.clientVersion});Y.ok||XX("schema response status",Y.status);let $=await d7(Y,this.clientVersion);if($)throw this.logEmitter.emit("warn",{message:`Error while uploading schema: ${$.message}`,timestamp:new Date,target:""}),$;this.logEmitter.emit("info",{message:`Schema (re)uploaded (hash: ${this.inlineSchemaHash})`,timestamp:new Date,target:""})})}request(X,{traceparent:Y,interactiveTransaction:$,customDataProxyFetch:Z}){return this.requestInternal({body:X,traceparent:Y,interactiveTransaction:$,customDataProxyFetch:Z})}async requestBatch(X,{traceparent:Y,transaction:$,customDataProxyFetch:Z}){let Q=$?.kind==="itx"?$.options:void 0,W=oX(X,$),{batchResult:J,elapsed:z}=await this.requestInternal({body:W,customDataProxyFetch:Z,interactiveTransaction:Q,traceparent:Y});return J.map((M)=>("errors"in M)&&M.errors.length>0?a7(M.errors[0],this.clientVersion,this.config.activeProvider):{data:M,elapsed:z})}requestInternal({body:X,traceparent:Y,customDataProxyFetch:$,interactiveTransaction:Z}){return this.withRetry({actionGerund:"querying",callback:async({logHttpCall:Q})=>{let W=Z?`${Z.payload.endpoint}/graphql`:await this.url("graphql");Q(W);let J=await k4(W,{method:"POST",headers:this.headerBuilder.build({traceparent:Y,interactiveTransaction:Z}),body:JSON.stringify(X),clientVersion:this.clientVersion},$);J.ok||XX("graphql response status",J.status),await this.handleError(await d7(J,this.clientVersion));let z=await J.json(),M=z.extensions;if(M&&this.propagateResponseExtensions(M),z.errors)throw z.errors.length===1?a7(z.errors[0],this.config.clientVersion,this.config.activeProvider):new A8(z.errors,{clientVersion:this.config.clientVersion});return z}})}async transaction(X,Y,$){let Z={start:"starting",commit:"committing",rollback:"rolling back"};return this.withRetry({actionGerund:`${Z[X]} transaction`,callback:async({logHttpCall:Q})=>{if(X==="start"){let W=JSON.stringify({max_wait:$.maxWait,timeout:$.timeout,isolation_level:$.isolationLevel}),J=await this.url("transaction/start");Q(J);let z=await k4(J,{method:"POST",headers:this.headerBuilder.build({traceparent:Y.traceparent}),body:W,clientVersion:this.clientVersion});await this.handleError(await d7(z,this.clientVersion));let M=await z.json(),B=M.extensions;B&&this.propagateResponseExtensions(B);let U=M.id,A=M["data-proxy"].endpoint;return{id:U,payload:{endpoint:A}}}else{let W=`${$.payload.endpoint}/${X}`;Q(W);let J=await k4(W,{method:"POST",headers:this.headerBuilder.build({traceparent:Y.traceparent}),clientVersion:this.clientVersion});await this.handleError(await d7(J,this.clientVersion));let z=(await J.json()).extensions;z&&this.propagateResponseExtensions(z);return}}})}extractHostAndApiKey(){let X={clientVersion:this.clientVersion},Y=Object.keys(this.inlineDatasources)[0],$=sX({inlineDatasources:this.inlineDatasources,overrideDatasources:this.config.overrideDatasources,clientVersion:this.clientVersion,env:this.env}),Z;try{Z=new URL($)}catch{throw new c7(`Error validating datasource \`${Y}\`: the URL must start with the protocol \`prisma://\``,X)}let{protocol:Q,host:W,searchParams:J}=Z;if(Q!=="prisma:"&&Q!=="prisma+postgres:")throw new c7(`Error validating datasource \`${Y}\`: the URL must start with the protocol \`prisma://\``,X);let z=J.get("api_key");if(z===null||z.length<1)throw new c7(`Error validating datasource \`${Y}\`: the URL must contain a valid API key`,X);return[W,z]}metrics(){throw new tX("Metrics are not yet supported for Accelerate",{clientVersion:this.clientVersion})}async withRetry(X){for(let Y=0;;Y++){let $=(Z)=>{this.logEmitter.emit("info",{message:`Calling ${Z} (n=${Y})`,timestamp:new Date,target:""})};try{return await X.callback({logHttpCall:$})}catch(Z){if(!(Z instanceof x2)||!Z.isRetryable)throw Z;if(Y>=yQ)throw Z instanceof jX?Z.cause:Z;this.logEmitter.emit("warn",{message:`Attempt ${Y+1}/${yQ} failed for ${X.actionGerund}: ${Z.message??"(unknown)"}`,timestamp:new Date,target:""});let Q=await m_(Y);this.logEmitter.emit("warn",{message:`Retrying after ${Q}ms`,timestamp:new Date,target:""})}}}async handleError(X){if(X instanceof rX)throw await this.uploadSchema(),new jX({clientVersion:this.clientVersion,cause:X});if(X)throw X}applyPendingMigrations(){throw new Error("Method not implemented.")}};function WF(X){if(X?.kind==="itx")return X.options.id}var dQ=F0(import.meta.require("os")),JF=F0(import.meta.require("path")),YX=Symbol("PrismaLibraryEngineCache");function zF(){let X=globalThis;return X[YX]===void 0&&(X[YX]={}),X[YX]}function MF(X){let Y=zF();if(Y[X]!==void 0)return Y[X];let $=JF.default.toNamespacedPath(X),Z={exports:{}},Q=0;return process.platform!=="win32"&&(Q=dQ.default.constants.dlopen.RTLD_LAZY|dQ.default.constants.dlopen.RTLD_DEEPBIND),process.dlopen(Z,$,Q),Y[X]=Z.exports,Z.exports}var BF={async loadLibrary(X){let Y=await LO(),$=await I_("library",X);try{return X.tracingHelper.runInChildSpan({name:"loadLibrary",internal:!0},()=>MF($))}catch(Z){let Q=jO({e:Z,platformInfo:Y,id:$});throw new r0(Q,X.clientVersion)}}},$X,UF={async loadLibrary(X){let{clientVersion:Y,adapter:$,engineWasm:Z}=X;if($===void 0)throw new r0(`The \`adapter\` option for \`PrismaClient\` is required in this context (${PJ().prettyName})`,Y);if(Z===void 0)throw new r0("WASM engine was unexpectedly `undefined`",Y);$X===void 0&&($X=(async()=>{let W=Z.getRuntime(),J=await Z.getQueryEngineWasmModule();if(J==null)throw new r0("The loaded wasm module was unexpectedly `undefined` or `null` once loaded",Y);let z={"./query_engine_bg.js":W},M=new WebAssembly.Instance(J,z);return W.__wbg_set_wasm(M.exports),W.QueryEngine})());let Q=await $X;return{debugPanic(){return Promise.reject("{}")},dmmf(){return Promise.resolve("{}")},version(){return{commit:"unknown",version:"unknown"}},QueryEngine:Q}}},GF="P2036",i8=b1("prisma:client:libraryEngine");function AF(X){return X.item_type==="query"&&"query"in X}function wF(X){return"level"in X?X.level==="error"&&X.message==="PANIC":!1}var vQ=[...eD,"native"],HF=class{constructor(X,Y){this.name="LibraryEngine",this.libraryLoader=Y??BF,X.engineWasm!==void 0&&(this.libraryLoader=Y??UF),this.config=X,this.libraryStarted=!1,this.logQueries=X.logQueries??!1,this.logLevel=X.logLevel??"error",this.logEmitter=X.logEmitter,this.datamodel=X.inlineSchema,X.enableDebugLogs&&(this.logLevel="debug");let $=Object.keys(X.overrideDatasources)[0],Z=X.overrideDatasources[$]?.url;$!==void 0&&Z!==void 0&&(this.datasourceOverrides={[$]:Z}),this.libraryInstantiationPromise=this.instantiateLibrary()}async applyPendingMigrations(){throw new Error("Cannot call this method from this type of engine instance")}async transaction(X,Y,$){await this.start();let Z=JSON.stringify(Y),Q;if(X==="start"){let J=JSON.stringify({max_wait:$.maxWait,timeout:$.timeout,isolation_level:$.isolationLevel});Q=await this.engine?.startTransaction(J,Z)}else X==="commit"?Q=await this.engine?.commitTransaction($.id,Z):X==="rollback"&&(Q=await this.engine?.rollbackTransaction($.id,Z));let W=this.parseEngineResponse(Q);if(qF(W)){let J=this.getExternalAdapterError(W);throw J?J.error:new a8(W.message,{code:W.error_code,clientVersion:this.config.clientVersion,meta:W.meta})}return W}async instantiateLibrary(){if(i8("internalSetup"),this.libraryInstantiationPromise)return this.libraryInstantiationPromise;aD(),this.binaryTarget=await this.getCurrentBinaryTarget(),await this.loadEngine(),this.version()}async getCurrentBinaryTarget(){{if(this.binaryTarget)return this.binaryTarget;let X=await xX();if(!vQ.includes(X))throw new r0(`Unknown ${U2("PRISMA_QUERY_ENGINE_LIBRARY")} ${U2(b8(X))}. Possible binaryTargets: ${p4(vQ.join(", "))} or a path to the query engine library.
You may have to run ${p4("prisma generate")} for your changes to take effect.`,this.config.clientVersion);return X}}parseEngineResponse(X){if(!X)throw new A8("Response from the Engine was empty",{clientVersion:this.config.clientVersion});try{return JSON.parse(X)}catch{throw new A8("Unable to JSON.parse response from engine",{clientVersion:this.config.clientVersion})}}async loadEngine(){if(!this.engine){this.QueryEngineConstructor||(this.library=await this.libraryLoader.loadLibrary(this.config),this.QueryEngineConstructor=this.library.QueryEngine);try{let X=new WeakRef(this),{adapter:Y}=this.config;Y&&i8("Using driver adapter: %O",Y),this.engine=new this.QueryEngineConstructor({datamodel:this.datamodel,env:process.env,logQueries:this.config.logQueries??!1,ignoreEnvVarErrors:!0,datasourceOverrides:this.datasourceOverrides??{},logLevel:this.logLevel,configDir:this.config.cwd,engineProtocol:"json"},($)=>{X.deref()?.logger($)},Y)}catch(X){let Y=X,$=this.parseInitError(Y.message);throw typeof $=="string"?Y:new r0($.message,this.config.clientVersion,$.error_code)}}}logger(X){let Y=this.parseEngineResponse(X);if(Y){if("span"in Y){this.config.tracingHelper.createEngineSpan(Y);return}Y.level=Y?.level.toLowerCase()??"unknown",AF(Y)?this.logEmitter.emit("query",{timestamp:new Date,query:Y.query,params:Y.params,duration:Number(Y.duration_ms),target:Y.module_path}):wF(Y)?this.loggerRustPanic=new g6(ZX(this,`${Y.message}: ${Y.reason} in ${Y.file}:${Y.line}:${Y.column}`),this.config.clientVersion):this.logEmitter.emit(Y.level,{timestamp:new Date,message:Y.message,target:Y.module_path})}}parseInitError(X){try{return JSON.parse(X)}catch{}return X}parseRequestError(X){try{return JSON.parse(X)}catch{}return X}onBeforeExit(){throw new Error('"beforeExit" hook is not applicable to the library engine since Prisma 5.0.0, it is only relevant and implemented for the binary engine. Please add your event listener to the `process` object directly instead.')}async start(){if(await this.libraryInstantiationPromise,await this.libraryStoppingPromise,this.libraryStartingPromise)return i8(`library already starting, this.libraryStarted: ${this.libraryStarted}`),this.libraryStartingPromise;if(this.libraryStarted)return;let X=async()=>{i8("library starting");try{let Y={traceparent:this.config.tracingHelper.getTraceParent()};await this.engine?.connect(JSON.stringify(Y)),this.libraryStarted=!0,i8("library started")}catch(Y){let $=this.parseInitError(Y.message);throw typeof $=="string"?Y:new r0($.message,this.config.clientVersion,$.error_code)}finally{this.libraryStartingPromise=void 0}};return this.libraryStartingPromise=this.config.tracingHelper.runInChildSpan("connect",X),this.libraryStartingPromise}async stop(){if(await this.libraryStartingPromise,await this.executingQueryPromise,this.libraryStoppingPromise)return i8("library is already stopping"),this.libraryStoppingPromise;if(!this.libraryStarted)return;let X=async()=>{await new Promise(($)=>setTimeout($,5)),i8("library stopping");let Y={traceparent:this.config.tracingHelper.getTraceParent()};await this.engine?.disconnect(JSON.stringify(Y)),this.libraryStarted=!1,this.libraryStoppingPromise=void 0,i8("library stopped")};return this.libraryStoppingPromise=this.config.tracingHelper.runInChildSpan("disconnect",X),this.libraryStoppingPromise}version(){return this.versionInfo=this.library?.version(),this.versionInfo?.version??"unknown"}debugPanic(X){return this.library?.debugPanic(X)}async request(X,{traceparent:Y,interactiveTransaction:$}){i8(`sending request, this.libraryStarted: ${this.libraryStarted}`);let Z=JSON.stringify({traceparent:Y}),Q=JSON.stringify(X);try{await this.start(),this.executingQueryPromise=this.engine?.query(Q,Z,$?.id),this.lastQuery=Q;let W=this.parseEngineResponse(await this.executingQueryPromise);if(W.errors)throw W.errors.length===1?this.buildQueryError(W.errors[0]):new A8(JSON.stringify(W.errors),{clientVersion:this.config.clientVersion});if(this.loggerRustPanic)throw this.loggerRustPanic;return{data:W,elapsed:0}}catch(W){if(W instanceof r0)throw W;if(W.code==="GenericFailure"&&W.message?.startsWith("PANIC:"))throw new g6(ZX(this,W.message),this.config.clientVersion);let J=this.parseRequestError(W.message);throw typeof J=="string"?W:new A8(`${J.message}
${J.backtrace}`,{clientVersion:this.config.clientVersion})}}async requestBatch(X,{transaction:Y,traceparent:$}){i8("requestBatch");let Z=oX(X,Y);await this.start(),this.lastQuery=JSON.stringify(Z),this.executingQueryPromise=this.engine.query(this.lastQuery,JSON.stringify({traceparent:$}),WF(Y));let Q=await this.executingQueryPromise,W=this.parseEngineResponse(Q);if(W.errors)throw W.errors.length===1?this.buildQueryError(W.errors[0]):new A8(JSON.stringify(W.errors),{clientVersion:this.config.clientVersion});let{batchResult:J,errors:z}=W;if(Array.isArray(J))return J.map((M)=>M.errors&&M.errors.length>0?this.loggerRustPanic??this.buildQueryError(M.errors[0]):{data:M,elapsed:0});throw z&&z.length===1?new Error(z[0].error):new Error(JSON.stringify(W))}buildQueryError(X){if(X.user_facing_error.is_panic)return new g6(ZX(this,X.user_facing_error.message),this.config.clientVersion);let Y=this.getExternalAdapterError(X.user_facing_error);return Y?Y.error:a7(X,this.config.clientVersion,this.config.activeProvider)}getExternalAdapterError(X){if(X.error_code===GF&&this.config.adapter){let Y=X.meta?.id;LQ(typeof Y=="number","Malformed external JS error received from the engine");let $=this.config.adapter.errorRegistry.consumeError(Y);return LQ($,"External error with reported id was not registered"),$}}async metrics(X){await this.start();let Y=await this.engine.metrics(JSON.stringify(X));return X.format==="prometheus"?Y:this.parseEngineResponse(Y)}};function qF(X){return typeof X=="object"&&X!==null&&X.error_code!==void 0}function ZX(X,Y){return y_({binaryTarget:X.binaryTarget,title:Y,version:X.config.clientVersion,engineVersion:X.versionInfo?.commit,database:X.config.activeProvider,query:X.lastQuery})}function NF({copyEngine:X=!0},Y){let $;try{$=sX({inlineDatasources:Y.inlineDatasources,overrideDatasources:Y.overrideDatasources,env:{...Y.env,...process.env},clientVersion:Y.clientVersion})}catch{}let Z=!!($?.startsWith("prisma://")||$?.startsWith("prisma+postgres://"));X&&Z&&RW("recommend--no-engine","In production, we recommend using `prisma generate --no-engine` (See: `prisma generate --help`)");let Q=_W(Y.generator),W=Z||!X,J=!!Y.adapter,z=Q==="library",M=Q==="binary";if(W&&J||J&&!1){let B;throw X?$?.startsWith("prisma://")?B=["Prisma Client was configured to use the `adapter` option but the URL was a `prisma://` URL.","Please either use the `prisma://` URL or remove the `adapter` from the Prisma Client constructor."]:B=["Prisma Client was configured to use both the `adapter` and Accelerate, please chose one."]:B=["Prisma Client was configured to use the `adapter` option but `prisma generate` was run with `--no-engine`.","Please run `prisma generate` without `--no-engine` to be able to use Prisma Client with the adapter."],new K8(B.join(`
`),{clientVersion:Y.clientVersion})}if(W)return new QF(Y);if(z)return new HF(Y);throw new K8("Invalid client engine type, please use `library` or `binary`",{clientVersion:Y.clientVersion})}function cJ({generator:X}){return X?.previewFeatures??[]}var DF=(X)=>({command:X}),OF=(X)=>X.strings.reduce((Y,$,Z)=>`${Y}@P${Z}${$}`);function x4(X){try{return pQ(X,"fast")}catch{return pQ(X,"slow")}}function pQ(X,Y){return JSON.stringify(X.map(($)=>uJ($,Y)))}function uJ(X,Y){return Array.isArray(X)?X.map(($)=>uJ($,Y)):typeof X=="bigint"?{prisma__type:"bigint",prisma__value:X.toString()}:fX(X)?{prisma__type:"date",prisma__value:X.toJSON()}:r4.isDecimal(X)?{prisma__type:"decimal",prisma__value:X.toJSON()}:Buffer.isBuffer(X)?{prisma__type:"bytes",prisma__value:X.toString("base64")}:LF(X)||ArrayBuffer.isView(X)?{prisma__type:"bytes",prisma__value:Buffer.from(X).toString("base64")}:typeof X=="object"&&Y==="slow"?iJ(X):X}function LF(X){return X instanceof ArrayBuffer||X instanceof SharedArrayBuffer?!0:typeof X=="object"&&X!==null?X[Symbol.toStringTag]==="ArrayBuffer"||X[Symbol.toStringTag]==="SharedArrayBuffer":!1}function iJ(X){if(typeof X!="object"||X===null)return X;if(typeof X.toJSON=="function")return X.toJSON();if(Array.isArray(X))return X.map(hQ);let Y={};for(let $ of Object.keys(X))Y[$]=hQ(X[$]);return Y}function hQ(X){return typeof X=="bigint"?X.toString():iJ(X)}var PF=["$connect","$disconnect","$on","$transaction","$use","$extends"],SF=PF,_F=/^(\s*alter\s)/i,mQ=b1("prisma:client");function cQ(X,Y,$,Z){if(!(X!=="postgresql"&&X!=="cockroachdb")&&$.length>0&&_F.exec(Y))throw new Error(`Running ALTER using ${Z} is not supported
Using the example below you can still execute your query with Prisma, but please note that it is vulnerable to SQL injection attacks and requires you to take care of input sanitization.

Example:
  await prisma.$executeRawUnsafe(\`ALTER USER prisma WITH PASSWORD '\${password}'\`)

More Information: https://pris.ly/d/execute-raw
`)}var uQ=({clientMethod:X,activeProvider:Y})=>($)=>{let Z="",Q;if(WS($))Z=$.sql,Q={values:x4($.values),__prismaRawParameters__:!0};else if(Array.isArray($)){let[W,...J]=$;Z=W,Q={values:x4(J||[]),__prismaRawParameters__:!0}}else switch(Y){case"sqlite":case"mysql":{Z=$.sql,Q={values:x4($.values),__prismaRawParameters__:!0};break}case"cockroachdb":case"postgresql":case"postgres":{Z=$.text,Q={values:x4($.values),__prismaRawParameters__:!0};break}case"sqlserver":{Z=OF($),Q={values:x4($.values),__prismaRawParameters__:!0};break}default:throw new Error(`The ${Y} provider does not support ${X}`)}return Q?.values?mQ(`prisma.${X}(${Z}, ${Q.values})`):mQ(`prisma.${X}(${Z})`),{query:Z,parameters:Q}},FF={requestArgsToMiddlewareArgs(X){return[X.strings,...X.values]},middlewareArgsToRequestArgs(X){let[Y,...$]=X;return new v6(Y,$)}},CF={requestArgsToMiddlewareArgs(X){return[X]},middlewareArgsToRequestArgs(X){return X[0]}};function iQ(X){return function(Y){let $,Z=(Q=X)=>{try{return Q===void 0||Q?.kind==="itx"?$??=lQ(Y(Q)):lQ(Y(Q))}catch(W){return Promise.reject(W)}};return{then(Q,W){return Z().then(Q,W)},catch(Q){return Z().catch(Q)},finally(Q){return Z().finally(Q)},requestTransaction(Q){let W=Z(Q);return W.requestTransaction?W.requestTransaction(Q):W},[Symbol.toStringTag]:"PrismaPromise"}}}function lQ(X){return typeof X.then=="function"?X:Promise.resolve(X)}var lJ={isEnabled(){return!1},getTraceParent(){return"00-10-10-00"},async createEngineSpan(){},getActiveContext(){},runInChildSpan(X,Y){return Y()}},RF=class{isEnabled(){return this.getGlobalTracingHelper().isEnabled()}getTraceParent(X){return this.getGlobalTracingHelper().getTraceParent(X)}createEngineSpan(X){return this.getGlobalTracingHelper().createEngineSpan(X)}getActiveContext(){return this.getGlobalTracingHelper().getActiveContext()}runInChildSpan(X,Y){return this.getGlobalTracingHelper().runInChildSpan(X,Y)}getGlobalTracingHelper(){return globalThis.PRISMA_INSTRUMENTATION?.helper??lJ}};function KF(X){return X.includes("tracing")?new RF:lJ}function jF(X,Y=()=>{}){let $,Z=new Promise((Q)=>$=Q);return{then(Q){return--X===0&&$(Y()),Q?.(Z)}}}function bF(X){return typeof X=="string"?X:X.reduce((Y,$)=>{let Z=typeof $=="string"?$:$.level;return Z==="query"?Y:Y&&($==="info"||Y==="info")?"info":Z},void 0)}var VF=class{constructor(){this._middlewares=[]}use(X){this._middlewares.push(X)}get(X){return this._middlewares[X]}has(X){return!!this._middlewares[X]}length(){return this._middlewares.length}},EF=F0(QW());function oJ(X){return typeof X.batchRequestIdx=="number"}function IF(X){if(X.action!=="findUnique"&&X.action!=="findUniqueOrThrow")return;let Y=[];return X.modelName&&Y.push(X.modelName),X.query.arguments&&Y.push(EX(X.query.arguments)),Y.push(EX(X.query.selection)),Y.join("")}function EX(X){return`(${Object.keys(X).sort().map((Y)=>{let $=X[Y];return typeof $=="object"&&$!==null?`(${Y} ${EX($)})`:Y}).join(" ")})`}var xF={aggregate:!1,aggregateRaw:!1,createMany:!0,createManyAndReturn:!0,createOne:!0,deleteMany:!0,deleteOne:!0,executeRaw:!0,findFirst:!1,findFirstOrThrow:!1,findMany:!1,findRaw:!1,findUnique:!1,findUniqueOrThrow:!1,groupBy:!1,queryRaw:!1,runCommandRaw:!0,updateMany:!0,updateOne:!0,upsertOne:!0};function oQ(X){return xF[X]}var kF=class{constructor(X){this.options=X,this.tickActive=!1,this.batches={}}request(X){let Y=this.options.batchBy(X);return Y?(this.batches[Y]||(this.batches[Y]=[],this.tickActive||(this.tickActive=!0,process.nextTick(()=>{this.dispatchBatches(),this.tickActive=!1}))),new Promise(($,Z)=>{this.batches[Y].push({request:X,resolve:$,reject:Z})})):this.options.singleLoader(X)}dispatchBatches(){for(let X in this.batches){let Y=this.batches[X];delete this.batches[X],Y.length===1?this.options.singleLoader(Y[0].request).then(($)=>{$ instanceof Error?Y[0].reject($):Y[0].resolve($)}).catch(($)=>{Y[0].reject($)}):(Y.sort(($,Z)=>this.options.batchOrder($.request,Z.request)),this.options.batchLoader(Y.map(($)=>$.request)).then(($)=>{if($ instanceof Error)for(let Z=0;Z<Y.length;Z++)Y[Z].reject($);else for(let Z=0;Z<Y.length;Z++){let Q=$[Z];Q instanceof Error?Y[Z].reject(Q):Y[Z].resolve(Q)}}).catch(($)=>{for(let Z=0;Z<Y.length;Z++)Y[Z].reject($)}))}}get[Symbol.toStringTag](){return"DataLoader"}};function M2(X,Y){if(Y===null)return Y;switch(X){case"bigint":return BigInt(Y);case"bytes":return Buffer.from(Y,"base64");case"decimal":return new r4(Y);case"datetime":case"date":return new Date(Y);case"time":return new Date(`1970-01-01T${Y}Z`);case"bigint-array":return Y.map(($)=>M2("bigint",$));case"bytes-array":return Y.map(($)=>M2("bytes",$));case"decimal-array":return Y.map(($)=>M2("decimal",$));case"datetime-array":return Y.map(($)=>M2("datetime",$));case"date-array":return Y.map(($)=>M2("date",$));case"time-array":return Y.map(($)=>M2("time",$));default:return Y}}function TF(X){let Y=[],$=gF(X);for(let Z=0;Z<X.rows.length;Z++){let Q=X.rows[Z],W={...$};for(let J=0;J<Q.length;J++)W[X.columns[J]]=M2(X.types[J],Q[J]);Y.push(W)}return Y}function gF(X){let Y={};for(let $=0;$<X.columns.length;$++)Y[X.columns[$]]=null;return Y}var fF=b1("prisma:client:request_handler"),yF=class{constructor(X,Y){this.logEmitter=Y,this.client=X,this.dataloader=new kF({batchLoader:N_(async({requests:$,customDataProxyFetch:Z})=>{let{transaction:Q,otelParentCtx:W}=$[0],J=$.map((B)=>B.protocolQuery),z=this.client._tracingHelper.getTraceParent(W),M=$.some((B)=>oQ(B.protocolQuery.action));return(await this.client._engine.requestBatch(J,{traceparent:z,transaction:dF(Q),containsWrite:M,customDataProxyFetch:Z})).map((B,U)=>{if(B instanceof Error)return B;try{return this.mapQueryEngineResult($[U],B)}catch(A){return A}})}),singleLoader:async($)=>{let Z=$.transaction?.kind==="itx"?nJ($.transaction):void 0,Q=await this.client._engine.request($.protocolQuery,{traceparent:this.client._tracingHelper.getTraceParent(),interactiveTransaction:Z,isWrite:oQ($.protocolQuery.action),customDataProxyFetch:$.customDataProxyFetch});return this.mapQueryEngineResult($,Q)},batchBy:($)=>$.transaction?.id?`transaction-${$.transaction.id}`:IF($.protocolQuery),batchOrder($,Z){return $.transaction?.kind==="batch"&&Z.transaction?.kind==="batch"?$.transaction.index-Z.transaction.index:0}})}async request(X){try{return await this.dataloader.request(X)}catch(Y){let{clientMethod:$,callsite:Z,transaction:Q,args:W,modelName:J}=X;this.handleAndLogRequestError({error:Y,clientMethod:$,callsite:Z,transaction:Q,args:W,modelName:J,globalOmit:X.globalOmit})}}mapQueryEngineResult({dataPath:X,unpacker:Y},$){let Z=$?.data,Q=$?.elapsed,W=this.unpack(Z,X,Y);return process.env.PRISMA_CLIENT_GET_TIME?{data:W,elapsed:Q}:W}handleAndLogRequestError(X){try{this.handleRequestError(X)}catch(Y){throw this.logEmitter&&this.logEmitter.emit("error",{message:Y.message,target:X.clientMethod,timestamp:new Date}),Y}}handleRequestError({error:X,clientMethod:Y,callsite:$,transaction:Z,args:Q,modelName:W,globalOmit:J}){if(fF(X),vF(X,Z)||X instanceof Z9)throw X;if(X instanceof a8&&pF(X)){let M=sJ(X.meta);YJ({args:Q,errors:[M],callsite:$,errorFormat:this.client._errorFormat,originalMethod:Y,clientVersion:this.client._clientVersion,globalOmit:J})}let z=X.message;if($&&(z=dX({callsite:$,originalMethod:Y,isPanic:X.isPanic,showColors:this.client._errorFormat==="pretty",message:z})),z=this.sanitizeMessage(z),X.code){let M=W?{modelName:W,...X.meta}:X.meta;throw new a8(z,{code:X.code,clientVersion:this.client._clientVersion,meta:M,batchRequestIdx:X.batchRequestIdx})}else{if(X.isPanic)throw new g6(z,this.client._clientVersion);if(X instanceof A8)throw new A8(z,{clientVersion:this.client._clientVersion,batchRequestIdx:X.batchRequestIdx});if(X instanceof r0)throw new r0(z,this.client._clientVersion);if(X instanceof g6)throw new g6(z,this.client._clientVersion)}throw X.clientVersion=this.client._clientVersion,X}sanitizeMessage(X){return this.client._errorFormat&&this.client._errorFormat!=="pretty"?EF.default(X):X}unpack(X,Y,$){if(!X||(X.data&&(X=X.data),!X))return X;let Z=Object.keys(X)[0],Q=Object.values(X)[0],W=Y.filter((M)=>M!=="select"&&M!=="include"),J=qJ(Q,W),z=Z==="queryRaw"?TF(J):s7(J);return $?$(z):z}get[Symbol.toStringTag](){return"RequestHandler"}};function dF(X){if(X){if(X.kind==="batch")return{kind:"batch",options:{isolationLevel:X.isolationLevel}};if(X.kind==="itx")return{kind:"itx",options:nJ(X)};$9(X,"Unknown transaction kind")}}function nJ(X){return{id:X.id,payload:X.payload}}function vF(X,Y){return oJ(X)&&Y?.kind==="batch"&&X.batchRequestIdx!==Y.index}function pF(X){return X.code==="P2009"||X.code==="P2012"}function sJ(X){if(X.kind==="Union")return{kind:"Union",errors:X.errors.map(sJ)};if(Array.isArray(X.selectionPath)){let[,...Y]=X.selectionPath;return{...X,selectionPath:Y}}return X}var hF="5.22.0",mF=hF,cF=F0(WW()),g0=class extends Error{constructor(X){super(X+`
Read more at https://pris.ly/d/client-constructor`),this.name="PrismaClientConstructorValidationError"}get[Symbol.toStringTag](){return"PrismaClientConstructorValidationError"}};i0(g0,"PrismaClientConstructorValidationError");var nQ=["datasources","datasourceUrl","errorFormat","adapter","log","transactionOptions","omit","__internal"],sQ=["pretty","colorless","minimal"],tQ=["info","query","warn","error"],uF={datasources:(X,{datasourceNames:Y})=>{if(X){if(typeof X!="object"||Array.isArray(X))throw new g0(`Invalid value ${JSON.stringify(X)} for "datasources" provided to PrismaClient constructor`);for(let[$,Z]of Object.entries(X)){if(!Y.includes($)){let Q=b2($,Y)||` Available datasources: ${Y.join(", ")}`;throw new g0(`Unknown datasource ${$} provided to PrismaClient constructor.${Q}`)}if(typeof Z!="object"||Array.isArray(Z))throw new g0(`Invalid value ${JSON.stringify(X)} for datasource "${$}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(Z&&typeof Z=="object")for(let[Q,W]of Object.entries(Z)){if(Q!=="url")throw new g0(`Invalid value ${JSON.stringify(X)} for datasource "${$}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`);if(typeof W!="string")throw new g0(`Invalid value ${JSON.stringify(W)} for datasource "${$}" provided to PrismaClient constructor.
It should have this form: { url: "CONNECTION_STRING" }`)}}}},adapter:(X,Y)=>{if(X===null)return;if(X===void 0)throw new g0('"adapter" property must not be undefined, use null to conditionally disable driver adapters.');if(!cJ(Y).includes("driverAdapters"))throw new g0('"adapter" property can only be provided to PrismaClient constructor when "driverAdapters" preview feature is enabled.');if(_W()==="binary")throw new g0('Cannot use a driver adapter with the "binary" Query Engine. Please use the "library" Query Engine.')},datasourceUrl:(X)=>{if(typeof X<"u"&&typeof X!="string")throw new g0(`Invalid value ${JSON.stringify(X)} for "datasourceUrl" provided to PrismaClient constructor.
Expected string or undefined.`)},errorFormat:(X)=>{if(X){if(typeof X!="string")throw new g0(`Invalid value ${JSON.stringify(X)} for "errorFormat" provided to PrismaClient constructor.`);if(!sQ.includes(X)){let Y=b2(X,sQ);throw new g0(`Invalid errorFormat ${X} provided to PrismaClient constructor.${Y}`)}}},log:(X)=>{if(!X)return;if(!Array.isArray(X))throw new g0(`Invalid value ${JSON.stringify(X)} for "log" provided to PrismaClient constructor.`);function Y($){if(typeof $=="string"&&!tQ.includes($)){let Z=b2($,tQ);throw new g0(`Invalid log level "${$}" provided to PrismaClient constructor.${Z}`)}}for(let $ of X){Y($);let Z={level:Y,emit:(Q)=>{let W=["stdout","event"];if(!W.includes(Q)){let J=b2(Q,W);throw new g0(`Invalid value ${JSON.stringify(Q)} for "emit" in logLevel provided to PrismaClient constructor.${J}`)}}};if($&&typeof $=="object")for(let[Q,W]of Object.entries($))if(Z[Q])Z[Q](W);else throw new g0(`Invalid property ${Q} for "log" provided to PrismaClient constructor`)}},transactionOptions:(X)=>{if(!X)return;let Y=X.maxWait;if(Y!=null&&Y<=0)throw new g0(`Invalid value ${Y} for maxWait in "transactionOptions" provided to PrismaClient constructor. maxWait needs to be greater than 0`);let $=X.timeout;if($!=null&&$<=0)throw new g0(`Invalid value ${$} for timeout in "transactionOptions" provided to PrismaClient constructor. timeout needs to be greater than 0`)},omit:(X,Y)=>{if(typeof X!="object")throw new g0('"omit" option is expected to be an object.');if(X===null)throw new g0('"omit" option can not be `null`');let $=[];for(let[Z,Q]of Object.entries(X)){let W=oF(Z,Y.runtimeDataModel);if(!W){$.push({kind:"UnknownModel",modelKey:Z});continue}for(let[J,z]of Object.entries(Q)){let M=W.fields.find((B)=>B.name===J);if(!M){$.push({kind:"UnknownField",modelKey:Z,fieldName:J});continue}if(M.relationName){$.push({kind:"RelationInOmit",modelKey:Z,fieldName:J});continue}typeof z!="boolean"&&$.push({kind:"InvalidFieldValue",modelKey:Z,fieldName:J})}}if($.length>0)throw new g0(nF(X,$))},__internal:(X)=>{if(!X)return;let Y=["debug","engine","configOverride"];if(typeof X!="object")throw new g0(`Invalid value ${JSON.stringify(X)} for "__internal" to PrismaClient constructor`);for(let[$]of Object.entries(X))if(!Y.includes($)){let Z=b2($,Y);throw new g0(`Invalid property ${JSON.stringify($)} for "__internal" provided to PrismaClient constructor.${Z}`)}}};function iF(X,Y){for(let[$,Z]of Object.entries(X)){if(!nQ.includes($)){let Q=b2($,nQ);throw new g0(`Unknown property ${$} provided to PrismaClient constructor.${Q}`)}uF[$](Z,Y)}if(X.datasourceUrl&&X.datasources)throw new g0('Can not use "datasourceUrl" and "datasources" options at the same time. Pick one of them')}function b2(X,Y){if(Y.length===0||typeof X!="string")return"";let $=lF(X,Y);return $?` Did you mean "${$}"?`:""}function lF(X,Y){if(Y.length===0)return null;let $=Y.map((Q)=>({value:Q,distance:cF.default(X,Q)}));$.sort((Q,W)=>Q.distance<W.distance?-1:1);let Z=$[0];return Z.distance<3?Z.value:null}function oF(X,Y){return rQ(Y.models,X)??rQ(Y.types,X)}function rQ(X,Y){let $=Object.keys(X).find((Z)=>gX(Z)===Y);if($)return X[$]}function nF(X,Y){let $=uX(X);for(let W of Y)switch(W.kind){case"UnknownModel":$.arguments.getField(W.modelKey)?.markAsError(),$.addErrorMessage(()=>`Unknown model name: ${W.modelKey}.`);break;case"UnknownField":$.arguments.getDeepField([W.modelKey,W.fieldName])?.markAsError(),$.addErrorMessage(()=>`Model "${W.modelKey}" does not have a field named "${W.fieldName}".`);break;case"RelationInOmit":$.arguments.getDeepField([W.modelKey,W.fieldName])?.markAsError(),$.addErrorMessage(()=>'Relations are already excluded by default and can not be specified in "omit".');break;case"InvalidFieldValue":$.arguments.getDeepFieldValue([W.modelKey,W.fieldName])?.markAsError(),$.addErrorMessage(()=>"Omit field option value must be a boolean.");break}let{message:Z,args:Q}=XJ($,"colorless");return`Error validating "omit" option:

${Q}

${Z}`}function sF(X){return X.length===0?Promise.resolve([]):new Promise((Y,$)=>{let Z=new Array(X.length),Q=null,W=!1,J=0,z=()=>{W||(J++,J===X.length&&(W=!0,Q?$(Q):Y(Z)))},M=(B)=>{W||(W=!0,$(B))};for(let B=0;B<X.length;B++)X[B].then((U)=>{Z[B]=U,z()},(U)=>{if(!oJ(U)){M(U);return}U.batchRequestIdx===B?M(U):(Q||(Q=U),z())})})}var b6=b1("prisma:client");typeof globalThis=="object"&&(globalThis.NODE_CLIENT=!0);var tF={requestArgsToMiddlewareArgs:(X)=>X,middlewareArgsToRequestArgs:(X)=>X},rF=Symbol.for("prisma.client.transaction.id"),aF={id:0,nextId(){return++this.id}};function eF(X){class Y{constructor($){this._originalClient=this,this._middlewares=new VF,this._createPrismaPromise=iQ(),this.$extends=M_,X=$?.__internal?.configOverride?.(X)??X,D_(X),$&&iF($,X);let Z=new wS.EventEmitter().on("error",()=>{});this._extensions=$J.empty(),this._previewFeatures=cJ(X),this._clientVersion=X.clientVersion??mF,this._activeProvider=X.activeProvider,this._globalOmit=$?.omit,this._tracingHelper=KF(this._previewFeatures);let Q={rootEnvPath:X.relativeEnvPaths.rootEnvPath&&y7.default.resolve(X.dirname,X.relativeEnvPaths.rootEnvPath),schemaEnvPath:X.relativeEnvPaths.schemaEnvPath&&y7.default.resolve(X.dirname,X.relativeEnvPaths.schemaEnvPath)},W;if($?.adapter){W=zS($.adapter);let z=X.activeProvider==="postgresql"?"postgres":X.activeProvider;if(W.provider!==z)throw new r0(`The Driver Adapter \`${W.adapterName}\`, based on \`${W.provider}\`, is not compatible with the provider \`${z}\` specified in the Prisma schema.`,this._clientVersion);if($.datasources||$.datasourceUrl!==void 0)throw new r0("Custom datasource configuration is not compatible with Prisma Driver Adapters. Please define the database connection string directly in the Driver Adapter configuration.",this._clientVersion)}let J=!W&&PW(Q,{conflictCheck:"none"})||X.injectableEdgeEnv?.();try{let z=$??{},M=z.__internal??{},B=M.debug===!0;B&&b1.enable("prisma:client");let U=y7.default.resolve(X.dirname,X.relativePath);HS.default.existsSync(U)||(U=X.dirname),b6("dirname",X.dirname),b6("relativePath",X.relativePath),b6("cwd",U);let A=M.engine||{};if(z.errorFormat?this._errorFormat=z.errorFormat:process.env.NO_COLOR?this._errorFormat="colorless":this._errorFormat="colorless",this._runtimeDataModel=X.runtimeDataModel,this._engineConfig={cwd:U,dirname:X.dirname,enableDebugLogs:B,allowTriggerPanic:A.allowTriggerPanic,datamodelPath:y7.default.join(X.dirname,X.filename??"schema.prisma"),prismaPath:A.binaryPath??void 0,engineEndpoint:A.endpoint,generator:X.generator,showColors:this._errorFormat==="pretty",logLevel:z.log&&bF(z.log),logQueries:z.log&&!!(typeof z.log=="string"?z.log==="query":z.log.find((w)=>typeof w=="string"?w==="query":w.level==="query")),env:J?.parsed??{},flags:[],engineWasm:X.engineWasm,clientVersion:X.clientVersion,engineVersion:X.engineVersion,previewFeatures:this._previewFeatures,activeProvider:X.activeProvider,inlineSchema:X.inlineSchema,overrideDatasources:O_(z,X.datasourceNames),inlineDatasources:X.inlineDatasources,inlineSchemaHash:X.inlineSchemaHash,tracingHelper:this._tracingHelper,transactionOptions:{maxWait:z.transactionOptions?.maxWait??2000,timeout:z.transactionOptions?.timeout??5000,isolationLevel:z.transactionOptions?.isolationLevel},logEmitter:Z,isBundled:X.isBundled,adapter:W},this._accelerateEngineConfig={...this._engineConfig,accelerateUtils:{resolveDatasourceUrl:sX,getBatchRequestPayload:oX,prismaGraphQLToJSError:a7,PrismaClientUnknownRequestError:A8,PrismaClientInitializationError:r0,PrismaClientKnownRequestError:a8,debug:b1("prisma:client:accelerateEngine"),engineVersion:GS.version,clientVersion:X.clientVersion}},b6("clientVersion",X.clientVersion),this._engine=NF(X,this._engineConfig),this._requestHandler=new yF(this,Z),z.log)for(let w of z.log){let G=typeof w=="string"?w:w.emit==="stdout"?w.level:null;G&&this.$on(G,(H)=>{AX.log(`${AX.tags[G]??""}`,H.message||H.query)})}this._metrics=new UJ(this._engine)}catch(z){throw z.clientVersion=this._clientVersion,z}return this._appliedParent=KX(this)}get[Symbol.toStringTag](){return"PrismaClient"}$use($){this._middlewares.use($)}$on($,Z){$==="beforeExit"?this._engine.onBeforeExit(Z):$&&this._engineConfig.logEmitter.on($,Z)}$connect(){try{return this._engine.start()}catch($){throw $.clientVersion=this._clientVersion,$}}async $disconnect(){try{await this._engine.stop()}catch($){throw $.clientVersion=this._clientVersion,$}finally{tD()}}$executeRawInternal($,Z,Q,W){let J=this._activeProvider;return this._request({action:"executeRaw",args:Q,transaction:$,clientMethod:Z,argsMapper:uQ({clientMethod:Z,activeProvider:J}),callsite:d4(this._errorFormat),dataPath:[],middlewareArgsMapper:W})}$executeRaw($,...Z){return this._createPrismaPromise((Q)=>{if($.raw!==void 0||$.sql!==void 0){let[W,J]=aQ($,Z);return cQ(this._activeProvider,W.text,W.values,Array.isArray($)?"prisma.$executeRaw`<SQL>`":"prisma.$executeRaw(sql`<SQL>`)"),this.$executeRawInternal(Q,"$executeRaw",W,J)}throw new K8("`$executeRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$executeRaw`UPDATE User SET cool = ${true} WHERE email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#executeraw\n",{clientVersion:this._clientVersion})})}$executeRawUnsafe($,...Z){return this._createPrismaPromise((Q)=>(cQ(this._activeProvider,$,Z,"prisma.$executeRawUnsafe(<SQL>, [...values])"),this.$executeRawInternal(Q,"$executeRawUnsafe",[$,...Z])))}$runCommandRaw($){if(X.activeProvider!=="mongodb")throw new K8(`The ${X.activeProvider} provider does not support \$runCommandRaw. Use the mongodb provider.`,{clientVersion:this._clientVersion});return this._createPrismaPromise((Z)=>this._request({args:$,clientMethod:"$runCommandRaw",dataPath:[],action:"runCommandRaw",argsMapper:DF,callsite:d4(this._errorFormat),transaction:Z}))}async $queryRawInternal($,Z,Q,W){let J=this._activeProvider;return this._request({action:"queryRaw",args:Q,transaction:$,clientMethod:Z,argsMapper:uQ({clientMethod:Z,activeProvider:J}),callsite:d4(this._errorFormat),dataPath:[],middlewareArgsMapper:W})}$queryRaw($,...Z){return this._createPrismaPromise((Q)=>{if($.raw!==void 0||$.sql!==void 0)return this.$queryRawInternal(Q,"$queryRaw",...aQ($,Z));throw new K8("`$queryRaw` is a tag function, please use it like the following:\n```\nconst result = await prisma.$queryRaw`SELECT * FROM User WHERE id = ${1} OR email = ${'user@email.com'};`\n```\n\nOr read our docs at https://www.prisma.io/docs/concepts/components/prisma-client/raw-database-access#queryraw\n",{clientVersion:this._clientVersion})})}$queryRawTyped($){return this._createPrismaPromise((Z)=>{if(!this._hasPreviewFlag("typedSql"))throw new K8("`typedSql` preview feature must be enabled in order to access $queryRawTyped API",{clientVersion:this._clientVersion});return this.$queryRawInternal(Z,"$queryRawTyped",$)})}$queryRawUnsafe($,...Z){return this._createPrismaPromise((Q)=>this.$queryRawInternal(Q,"$queryRawUnsafe",[$,...Z]))}_transactionWithArray({promises:$,options:Z}){let Q=aF.nextId(),W=jF($.length),J=$.map((z,M)=>{if(z?.[Symbol.toStringTag]!=="PrismaPromise")throw new Error("All elements of the array need to be Prisma Client promises. Hint: Please make sure you are not awaiting the Prisma client calls you intended to pass in the $transaction function.");let B=Z?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel,U={kind:"batch",id:Q,index:M,isolationLevel:B,lock:W};return z.requestTransaction?.(U)??z});return sF(J)}async _transactionWithCallback({callback:$,options:Z}){let Q={traceparent:this._tracingHelper.getTraceParent()},W={maxWait:Z?.maxWait??this._engineConfig.transactionOptions.maxWait,timeout:Z?.timeout??this._engineConfig.transactionOptions.timeout,isolationLevel:Z?.isolationLevel??this._engineConfig.transactionOptions.isolationLevel},J=await this._engine.transaction("start",Q,W),z;try{let M={kind:"itx",...J};z=await $(this._createItxClient(M)),await this._engine.transaction("commit",Q,J)}catch(M){throw await this._engine.transaction("rollback",Q,J).catch(()=>{}),M}return z}_createItxClient($){return KX(l4(z_(this),[r8("_appliedParent",()=>this._appliedParent._createItxClient($)),r8("_createPrismaPromise",()=>iQ($)),r8(rF,()=>$.id),FX(SF)]))}$transaction($,Z){let Q;typeof $=="function"?this._engineConfig.adapter?.adapterName==="@prisma/adapter-d1"?Q=()=>{throw new Error("Cloudflare D1 does not support interactive transactions. We recommend you to refactor your queries with that limitation in mind, and use batch transactions with `prisma.$transactions([])` where applicable.")}:Q=()=>this._transactionWithCallback({callback:$,options:Z}):Q=()=>this._transactionWithArray({promises:$,options:Z});let W={name:"transaction",attributes:{method:"$transaction"}};return this._tracingHelper.runInChildSpan(W,Q)}_request($){$.otelParentCtx=this._tracingHelper.getActiveContext();let Z=$.middlewareArgsMapper??tF,Q={args:Z.requestArgsToMiddlewareArgs($.args),dataPath:$.dataPath,runInTransaction:!!$.transaction,action:$.action,model:$.model},W={middleware:{name:"middleware",middleware:!0,attributes:{method:"$use"},active:!1},operation:{name:"operation",attributes:{method:Q.action,model:Q.model,name:Q.model?`${Q.model}.${Q.action}`:Q.action}}},J=-1,z=async(M)=>{let B=this._middlewares.get(++J);if(B)return this._tracingHelper.runInChildSpan(W.middleware,(q)=>B(M,(_)=>(q?.end(),z(_))));let{runInTransaction:U,args:A,...w}=M,G={...$,...w};A&&(G.args=Z.middlewareArgsToRequestArgs(A)),$.transaction!==void 0&&U===!1&&delete G.transaction;let H=await q_(this,G);return G.model?A_({result:H,modelName:G.model,args:G.args,extensions:this._extensions,runtimeDataModel:this._runtimeDataModel,globalOmit:this._globalOmit}):H};return this._tracingHelper.runInChildSpan(W.operation,()=>new AS.AsyncResource("prisma-client-request").runInAsyncScope(()=>z(Q)))}async _executeRequest({args:$,clientMethod:Z,dataPath:Q,callsite:W,action:J,model:z,argsMapper:M,transaction:B,unpacker:U,otelParentCtx:A,customDataProxyFetch:w}){try{$=M?M($):$;let G={name:"serialize"},H=this._tracingHelper.runInChildSpan(G,()=>zJ({modelName:z,runtimeDataModel:this._runtimeDataModel,action:J,args:$,clientMethod:Z,callsite:W,extensions:this._extensions,errorFormat:this._errorFormat,clientVersion:this._clientVersion,previewFeatures:this._previewFeatures,globalOmit:this._globalOmit}));return b1.enabled("prisma:client")&&(b6("Prisma Client call:"),b6(`prisma.${Z}(${LS($)})`),b6("Generated request:"),b6(JSON.stringify(H,null,2)+`
`)),B?.kind==="batch"&&await B.lock,this._requestHandler.request({protocolQuery:H,modelName:z,action:J,clientMethod:Z,dataPath:Q,callsite:W,args:$,extensions:this._extensions,transaction:B,unpacker:U,otelParentCtx:A,otelChildCtx:this._tracingHelper.getActiveContext(),globalOmit:this._globalOmit,customDataProxyFetch:w})}catch(G){throw G.clientVersion=this._clientVersion,G}}get $metrics(){if(!this._hasPreviewFlag("metrics"))throw new K8("`metrics` preview feature must be enabled in order to access metrics API",{clientVersion:this._clientVersion});return this._metrics}_hasPreviewFlag($){return!!this._engineConfig.previewFeatures?.includes($)}$applyPendingMigrations(){return this._engine.applyPendingMigrations()}}return Y}function aQ(X,Y){return XC(X)?[new v6(X,Y),FF]:[X,CF]}function XC(X){return Array.isArray(X)&&Array.isArray(X.raw)}var YC=new Set(["toJSON","$$typeof","asymmetricMatch",Symbol.iterator,Symbol.toStringTag,Symbol.isConcatSpreadable,Symbol.toPrimitive]);function $C(X){return new Proxy(X,{get(Y,$){if($ in Y)return Y[$];if(!YC.has($))throw new TypeError(`Invalid enum value: ${String($)}`)}})}function ZC(X){PW(X,{conflictCheck:"warn"})}/*! Bundled license information:

decimal.js/decimal.mjs:
  (*!
   *  decimal.js v10.4.3
   *  An arbitrary-precision Decimal type for JavaScript.
   *  https://github.com/MikeMcl/decimal.js
   *  Copyright (c) 2022 Michael Mclaughlin <M8ch88l@gmail.com>
   *  MIT Licence
   *)
*/});var YY=ZY((XY)=>{var __dirname="/Users/alexzhang/code/github.com/zhangchi0104/kuma-space/apps/kuma-elysia/src/@prisma/client";Object.defineProperty(XY,"__esModule",{value:!0});var{PrismaClientKnownRequestError:QC,PrismaClientUnknownRequestError:WC,PrismaClientRustPanicError:JC,PrismaClientInitializationError:zC,PrismaClientValidationError:MC,NotFoundError:BC,getPrismaClient:UC,sqltag:GC,empty:AC,join:wC,raw:HC,skip:cc,Decimal:qC,Debug:uc,objectEnumValues:k2,makeStrictEnum:NC,Extensions:aJ,warnOnce:ic,defineDmmfProperty:DC,Public:OC,getRuntime:lc}=eX(),a0={};XY.Prisma=a0;XY.$Enums={};a0.prismaVersion={client:"5.22.0",engine:"605197351a3c8bdd595af2d2a9bc3025bca48ea2"};a0.PrismaClientKnownRequestError=QC;a0.PrismaClientUnknownRequestError=WC;a0.PrismaClientRustPanicError=JC;a0.PrismaClientInitializationError=zC;a0.PrismaClientValidationError=MC;a0.NotFoundError=BC;a0.Decimal=qC;a0.sql=GC;a0.empty=AC;a0.join=wC;a0.raw=HC;a0.validator=OC.validator;a0.getExtensionContext=aJ.getExtensionContext;a0.defineExtension=aJ.defineExtension;a0.DbNull=k2.instances.DbNull;a0.JsonNull=k2.instances.JsonNull;a0.AnyNull=k2.instances.AnyNull;a0.NullTypes={DbNull:k2.classes.DbNull,JsonNull:k2.classes.JsonNull,AnyNull:k2.classes.AnyNull};var P6=import.meta.require("path");XY.Prisma.TransactionIsolationLevel=NC({ReadUncommitted:"ReadUncommitted",ReadCommitted:"ReadCommitted",RepeatableRead:"RepeatableRead",Serializable:"Serializable"});XY.Prisma.PostScalarFieldEnum={postId:"postId",createdAt:"createdAt",updatedAt:"updatedAt"};XY.Prisma.PostLanguagesScalarFieldEnum={languageCode:"languageCode",postId:"postId",title:"title"};XY.Prisma.TagScalarFieldEnum={id:"id",category:"category",name:"name"};XY.Prisma.TagsOnPostsScalarFieldEnum={postId:"postId",tagId:"tagId"};XY.Prisma.SortOrder={asc:"asc",desc:"desc"};XY.Prisma.NullsOrder={first:"first",last:"last"};XY.Prisma.QueryMode={default:"default",insensitive:"insensitive"};XY.LanguageCodes=XY.$Enums.LanguageCodes={EN_US:"EN_US",ZH_CN:"ZH_CN"};XY.Prisma.ModelName={Post:"Post",PostLanguages:"PostLanguages",Tag:"Tag",TagsOnPosts:"TagsOnPosts"};var e1={generator:{name:"client",provider:{fromEnvVar:null,value:"prisma-client-js"},output:{value:"/Users/alexzhang/code/github.com/zhangchi0104/kuma-space/apps/kuma-elysia/src/@prisma/client",fromEnvVar:null},config:{engineType:"library"},binaryTargets:[{fromEnvVar:null,value:"darwin-arm64",native:!0}],previewFeatures:[],sourceFilePath:"/Users/alexzhang/code/github.com/zhangchi0104/kuma-space/apps/kuma-elysia/prisma/schema.prisma",isCustomOutput:!0},relativeEnvPaths:{rootEnvPath:null},relativePath:"../../../prisma",clientVersion:"5.22.0",engineVersion:"605197351a3c8bdd595af2d2a9bc3025bca48ea2",datasourceNames:["db"],activeProvider:"postgresql",postinstall:!1,inlineDatasources:{db:{url:{fromEnvVar:"DATABASE_TRANSACTION_URL",value:null}}},inlineSchema:"// This is your Prisma schema file,\n// learn more about it in the docs: https://pris.ly/d/prisma-schema\n\n// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?\n// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init\n\ngenerator client {\n  provider = \"prisma-client-js\"\n  output   = \"../src/@prisma/client\"\n}\n\ndatasource db {\n  provider  = \"postgresql\"\n  url       = env(\"DATABASE_TRANSACTION_URL\")\n  directUrl = env(\"DATABASE_DIRECT_URL\")\n}\n\nmodel Post {\n  postId    Int             @id @default(autoincrement())\n  languages PostLanguages[]\n  createdAt DateTime        @default(now())\n  updatedAt DateTime?       @updatedAt\n  tags      TagsOnPosts[]\n}\n\nmodel PostLanguages {\n  languageCode LanguageCodes\n  postId       Int\n  title        String        @default(\"\")\n  post         Post          @relation(fields: [postId], references: [postId])\n\n  @@id([languageCode, postId])\n}\n\nmodel Tag {\n  id       Int           @id @default(autoincrement())\n  category String?\n  name     String\n  posts    TagsOnPosts[]\n}\n\nmodel TagsOnPosts {\n  post   Post @relation(fields: [postId], references: [postId])\n  postId Int\n  tag    Tag  @relation(fields: [tagId], references: [id])\n  tagId  Int\n\n  @@id([postId, tagId])\n}\n\nenum LanguageCodes {\n  EN_US\n  ZH_CN\n}\n",inlineSchemaHash:"2bf4fd6178484cdedec38d8f409a5754df52405e32e63500432e0c50996d69ff",copyEngine:!0},rJ=import.meta.require("fs");e1.dirname=__dirname;if(!rJ.existsSync(P6.join(__dirname,"schema.prisma"))){let X=["apps/kuma-elysia/src/@prisma/client","kuma-elysia/src/@prisma/client"],Y=X.find(($)=>{return rJ.existsSync(P6.join(process.cwd(),$,"schema.prisma"))})??X[0];e1.dirname=P6.join(process.cwd(),Y),e1.isBundled=!0}e1.runtimeDataModel=JSON.parse("{\"models\":{\"Post\":{\"dbName\":null,\"fields\":[{\"name\":\"postId\",\"kind\":\"scalar\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":true,\"isReadOnly\":false,\"hasDefaultValue\":true,\"type\":\"Int\",\"default\":{\"name\":\"autoincrement\",\"args\":[]},\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"languages\",\"kind\":\"object\",\"isList\":true,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":false,\"type\":\"PostLanguages\",\"relationName\":\"PostToPostLanguages\",\"relationFromFields\":[],\"relationToFields\":[],\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"createdAt\",\"kind\":\"scalar\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":true,\"type\":\"DateTime\",\"default\":{\"name\":\"now\",\"args\":[]},\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"updatedAt\",\"kind\":\"scalar\",\"isList\":false,\"isRequired\":false,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":false,\"type\":\"DateTime\",\"isGenerated\":false,\"isUpdatedAt\":true},{\"name\":\"tags\",\"kind\":\"object\",\"isList\":true,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":false,\"type\":\"TagsOnPosts\",\"relationName\":\"PostToTagsOnPosts\",\"relationFromFields\":[],\"relationToFields\":[],\"isGenerated\":false,\"isUpdatedAt\":false}],\"primaryKey\":null,\"uniqueFields\":[],\"uniqueIndexes\":[],\"isGenerated\":false},\"PostLanguages\":{\"dbName\":null,\"fields\":[{\"name\":\"languageCode\",\"kind\":\"enum\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":false,\"type\":\"LanguageCodes\",\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"postId\",\"kind\":\"scalar\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":true,\"hasDefaultValue\":false,\"type\":\"Int\",\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"title\",\"kind\":\"scalar\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":true,\"type\":\"String\",\"default\":\"\",\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"post\",\"kind\":\"object\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":false,\"type\":\"Post\",\"relationName\":\"PostToPostLanguages\",\"relationFromFields\":[\"postId\"],\"relationToFields\":[\"postId\"],\"isGenerated\":false,\"isUpdatedAt\":false}],\"primaryKey\":{\"name\":null,\"fields\":[\"languageCode\",\"postId\"]},\"uniqueFields\":[],\"uniqueIndexes\":[],\"isGenerated\":false},\"Tag\":{\"dbName\":null,\"fields\":[{\"name\":\"id\",\"kind\":\"scalar\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":true,\"isReadOnly\":false,\"hasDefaultValue\":true,\"type\":\"Int\",\"default\":{\"name\":\"autoincrement\",\"args\":[]},\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"category\",\"kind\":\"scalar\",\"isList\":false,\"isRequired\":false,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":false,\"type\":\"String\",\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"name\",\"kind\":\"scalar\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":false,\"type\":\"String\",\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"posts\",\"kind\":\"object\",\"isList\":true,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":false,\"type\":\"TagsOnPosts\",\"relationName\":\"TagToTagsOnPosts\",\"relationFromFields\":[],\"relationToFields\":[],\"isGenerated\":false,\"isUpdatedAt\":false}],\"primaryKey\":null,\"uniqueFields\":[],\"uniqueIndexes\":[],\"isGenerated\":false},\"TagsOnPosts\":{\"dbName\":null,\"fields\":[{\"name\":\"post\",\"kind\":\"object\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":false,\"type\":\"Post\",\"relationName\":\"PostToTagsOnPosts\",\"relationFromFields\":[\"postId\"],\"relationToFields\":[\"postId\"],\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"postId\",\"kind\":\"scalar\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":true,\"hasDefaultValue\":false,\"type\":\"Int\",\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"tag\",\"kind\":\"object\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":false,\"hasDefaultValue\":false,\"type\":\"Tag\",\"relationName\":\"TagToTagsOnPosts\",\"relationFromFields\":[\"tagId\"],\"relationToFields\":[\"id\"],\"isGenerated\":false,\"isUpdatedAt\":false},{\"name\":\"tagId\",\"kind\":\"scalar\",\"isList\":false,\"isRequired\":true,\"isUnique\":false,\"isId\":false,\"isReadOnly\":true,\"hasDefaultValue\":false,\"type\":\"Int\",\"isGenerated\":false,\"isUpdatedAt\":false}],\"primaryKey\":{\"name\":null,\"fields\":[\"postId\",\"tagId\"]},\"uniqueFields\":[],\"uniqueIndexes\":[],\"isGenerated\":false}},\"enums\":{\"LanguageCodes\":{\"values\":[{\"name\":\"EN_US\",\"dbName\":null},{\"name\":\"ZH_CN\",\"dbName\":null}],\"dbName\":null}},\"types\":{}}");DC(XY.Prisma,e1.runtimeDataModel);e1.engineWasm=void 0;var{warnEnvConflicts:LC}=eX();LC({rootEnvPath:e1.relativeEnvPaths.rootEnvPath&&P6.resolve(e1.dirname,e1.relativeEnvPaths.rootEnvPath),schemaEnvPath:e1.relativeEnvPaths.schemaEnvPath&&P6.resolve(e1.dirname,e1.relativeEnvPaths.schemaEnvPath)});var PC=UC(e1);XY.PrismaClient=PC;Object.assign(XY,a0);P6.join(__dirname,"libquery_engine-darwin-arm64.dylib.node");P6.join(process.cwd(),"apps/kuma-elysia/src/@prisma/client/libquery_engine-darwin-arm64.dylib.node");P6.join(__dirname,"schema.prisma");P6.join(process.cwd(),"apps/kuma-elysia/src/@prisma/client/schema.prisma")});function Z7(X){return G1(X)&&Symbol.asyncIterator in X}function Q7(X){return G1(X)&&Symbol.iterator in X}function j0(X){return G1(X)&&(Object.getPrototypeOf(X)===Object.prototype||Object.getPrototypeOf(X)===null)}function W7(X){return X instanceof Promise}function p1(X){return X instanceof Date&&Number.isFinite(X.getTime())}function Y8(X){return ArrayBuffer.isView(X)}function A2(X){return X instanceof globalThis.Uint8Array}function Z0(X,Y){return Y in X}function G1(X){return X!==null&&typeof X==="object"}function i(X){return Array.isArray(X)&&!ArrayBuffer.isView(X)}function p0(X){return X===void 0}function Z6(X){return X===null}function x8(X){return typeof X==="boolean"}function p(X){return typeof X==="number"}function J7(X){return Number.isInteger(X)}function A1(X){return typeof X==="bigint"}function X0(X){return typeof X==="string"}function z7(X){return typeof X==="function"}function E1(X){return typeof X==="symbol"}function h1(X){return A1(X)||x8(X)||Z6(X)||p(X)||X0(X)||E1(X)||p0(X)}var o0;(function(X){X.ExactOptionalPropertyTypes=!1,X.AllowArrayObject=!1,X.AllowNaN=!1,X.AllowNullVoid=!1;function Y(J,z){return X.ExactOptionalPropertyTypes?z in J:J[z]!==void 0}X.IsExactOptionalProperty=Y;function $(J){let z=G1(J);return X.AllowArrayObject?z:z&&!i(J)}X.IsObjectLike=$;function Z(J){return $(J)&&!(J instanceof Date)&&!(J instanceof Uint8Array)}X.IsRecordLike=Z;function Q(J){return X.AllowNaN?p(J):Number.isFinite(J)}X.IsNumberLike=Q;function W(J){let z=p0(J);return X.AllowNullVoid?z||J===null:z}X.IsVoidLike=W})(o0||(o0={}));var C0={};h6(C0,{Set:()=>Pz,Has:()=>Lz,Get:()=>Sz,Entries:()=>Nz,Delete:()=>Oz,Clear:()=>Dz});var w2=new Map;function Nz(){return new Map(w2)}function Dz(){return w2.clear()}function Oz(X){return w2.delete(X)}function Lz(X){return w2.has(X)}function Pz(X,Y){w2.set(X,Y)}function Sz(X){return w2.get(X)}var h0={};h6(h0,{Set:()=>Kz,Has:()=>Rz,Get:()=>jz,Entries:()=>_z,Delete:()=>Cz,Clear:()=>Fz});var H2=new Map;function _z(){return new Map(H2)}function Fz(){return H2.clear()}function Cz(X){return H2.delete(X)}function Rz(X){return H2.has(X)}function Kz(X,Y){H2.set(X,Y)}function jz(X){return H2.get(X)}var y0=Symbol.for("TypeBox.Transform"),k8=Symbol.for("TypeBox.Readonly"),D1=Symbol.for("TypeBox.Optional"),m1=Symbol.for("TypeBox.Hint"),L=Symbol.for("TypeBox.Kind");function T2(X={}){return{...X,[L]:X[L]??"Unsafe"}}class l extends Error{constructor(X){super(X)}}class H9 extends l{constructor(X){super(`Duplicate type kind '${X}' detected`)}}class q9 extends l{constructor(X){super(`Duplicate string format '${X}' detected`)}}var T8;(function(X){function Y(Z,Q){if(h0.Has(Z))throw new H9(Z);return h0.Set(Z,Q),(W={})=>T2({...W,[L]:Z})}X.Type=Y;function $(Z,Q){if(C0.Has(Z))throw new q9(Z);return C0.Set(Z,Q),Z}X.Format=$})(T8||(T8={}));function z0(X){return{[L]:"MappedResult",properties:X}}var x1={};h6(x1,{IsUndefined:()=>m0,IsUint8Array:()=>m6,IsSymbol:()=>S9,IsString:()=>V0,IsRegExp:()=>P9,IsObject:()=>b0,IsNumber:()=>N8,IsNull:()=>L9,IsIterator:()=>O9,IsFunction:()=>D9,IsDate:()=>f2,IsBoolean:()=>_6,IsBigInt:()=>g2,IsAsyncIterator:()=>N9,IsArray:()=>I1});function N9(X){return b0(X)&&!I1(X)&&!m6(X)&&Symbol.asyncIterator in X}function I1(X){return Array.isArray(X)}function g2(X){return typeof X==="bigint"}function _6(X){return typeof X==="boolean"}function f2(X){return X instanceof globalThis.Date}function D9(X){return typeof X==="function"}function O9(X){return b0(X)&&!I1(X)&&!m6(X)&&Symbol.iterator in X}function L9(X){return X===null}function N8(X){return typeof X==="number"}function b0(X){return typeof X==="object"&&X!==null}function P9(X){return X instanceof globalThis.RegExp}function V0(X){return typeof X==="string"}function S9(X){return typeof X==="symbol"}function m6(X){return X instanceof globalThis.Uint8Array}function m0(X){return X===void 0}function bz(X){return X.map((Y)=>M7(Y))}function Vz(X){return new Date(X.getTime())}function Ez(X){return new Uint8Array(X)}function Iz(X){return new RegExp(X.source,X.flags)}function xz(X){let Y={};for(let $ of Object.getOwnPropertyNames(X))Y[$]=M7(X[$]);for(let $ of Object.getOwnPropertySymbols(X))Y[$]=M7(X[$]);return Y}function M7(X){return I1(X)?bz(X):f2(X)?Vz(X):m6(X)?Ez(X):P9(X)?Iz(X):b0(X)?xz(X):X}function QY(X){return M7(X)}function n0(X){return X.map((Y)=>V(Y))}function V(X,Y={}){return{...QY(X),...Y}}function kz(X,Y){let{[Y]:$,...Z}=X;return Z}function s0(X,Y){return Y.reduce(($,Z)=>kz($,Z),X)}function y2(X,Y={}){return{...Y,[L]:"Array",type:"array",items:V(X)}}function d2(X,Y={}){return{...Y,[L]:"AsyncIterator",type:"AsyncIterator",items:V(X)}}function v2(X,Y,$){return{...$,[L]:"Constructor",type:"Constructor",parameters:n0(X),returns:V(Y)}}function Q6(X,Y,$){return{...$,[L]:"Function",type:"Function",parameters:n0(X),returns:V(Y)}}function N0(X={}){return{...X,[L]:"Never",not:{}}}function WY(X){return b0(X)&&X[k8]==="Readonly"}function g8(X){return b0(X)&&X[D1]==="Optional"}function Tz(X){return M0(X,"Any")}function W6(X){return M0(X,"Array")}function p2(X){return M0(X,"AsyncIterator")}function _9(X){return M0(X,"BigInt")}function F9(X){return M0(X,"Boolean")}function h2(X){return M0(X,"Constructor")}function gz(X){return M0(X,"Date")}function m2(X){return M0(X,"Function")}function c6(X){return M0(X,"Integer")}function t0(X){return M0(X,"Intersect")}function c2(X){return M0(X,"Iterator")}function M0(X,Y){return b0(X)&&L in X&&X[L]===Y}function J6(X){return M0(X,"Literal")}function c1(X){return M0(X,"MappedKey")}function T0(X){return M0(X,"MappedResult")}function q2(X){return M0(X,"Never")}function fz(X){return M0(X,"Not")}function yz(X){return M0(X,"Null")}function u6(X){return M0(X,"Number")}function $1(X){return M0(X,"Object")}function i6(X){return M0(X,"Promise")}function C9(X){return M0(X,"Record")}function R9(X){return M0(X,"Ref")}function K9(X){return M0(X,"RegExp")}function u2(X){return M0(X,"String")}function dz(X){return M0(X,"Symbol")}function u1(X){return M0(X,"TemplateLiteral")}function vz(X){return M0(X,"This")}function N2(X){return b0(X)&&y0 in X}function D8(X){return M0(X,"Tuple")}function pz(X){return M0(X,"Undefined")}function G0(X){return M0(X,"Union")}function hz(X){return M0(X,"Uint8Array")}function mz(X){return M0(X,"Unknown")}function cz(X){return M0(X,"Unsafe")}function uz(X){return M0(X,"Void")}function iz(X){return b0(X)&&L in X&&V0(X[L])}function i1(X){return Tz(X)||W6(X)||F9(X)||_9(X)||p2(X)||h2(X)||gz(X)||m2(X)||c6(X)||t0(X)||c2(X)||J6(X)||c1(X)||T0(X)||q2(X)||fz(X)||yz(X)||u6(X)||$1(X)||i6(X)||C9(X)||R9(X)||K9(X)||u2(X)||dz(X)||u1(X)||vz(X)||D8(X)||pz(X)||G0(X)||hz(X)||mz(X)||cz(X)||uz(X)||iz(X)}function oz(X){return s0(V(X),[D1])}function nz(X){return{...V(X),[D1]:"Optional"}}function sz(X,Y){return Y===!1?oz(X):nz(X)}function R1(X,Y){let $=Y??!0;return T0(X)?JY(X,$):sz(X,$)}function tz(X,Y){let $={};for(let Z of globalThis.Object.getOwnPropertyNames(X))$[Z]=R1(X[Z],Y);return $}function rz(X,Y){return tz(X.properties,Y)}function JY(X,Y){let $=rz(X,Y);return z0($)}function i2(X,Y){let $=X.every((Q)=>$1(Q)),Z=i1(Y.unevaluatedProperties)?{unevaluatedProperties:V(Y.unevaluatedProperties)}:{};return Y.unevaluatedProperties===!1||i1(Y.unevaluatedProperties)||$?{...Y,...Z,[L]:"Intersect",type:"object",allOf:n0(X)}:{...Y,...Z,[L]:"Intersect",allOf:n0(X)}}function az(X){return X.every((Y)=>g8(Y))}function ez(X){return s0(X,[D1])}function zY(X){return X.map((Y)=>g8(Y)?ez(Y):Y)}function XM(X,Y){return az(X)?R1(i2(zY(X),Y)):i2(zY(X),Y)}function B7(X,Y={}){if(X.length===0)return N0(Y);if(X.length===1)return V(X[0],Y);if(X.some(($)=>N2($)))throw new Error("Cannot intersect transform types");return XM(X,Y)}function K1(X,Y={}){if(X.length===0)return N0(Y);if(X.length===1)return V(X[0],Y);if(X.some(($)=>N2($)))throw new Error("Cannot intersect transform types");return i2(X,Y)}function l2(X,Y){return{...Y,[L]:"Union",anyOf:n0(X)}}function YM(X){return X.some((Y)=>g8(Y))}function MY(X){return X.map((Y)=>g8(Y)?$M(Y):Y)}function $M(X){return s0(X,[D1])}function ZM(X,Y){return YM(X)?R1(l2(MY(X),Y)):l2(MY(X),Y)}function f8(X,Y={}){return X.length===0?N0(Y):X.length===1?V(X[0],Y):ZM(X,Y)}function D0(X,Y={}){return X.length===0?N0(Y):X.length===1?V(X[0],Y):l2(X,Y)}class j9 extends l{}function QM(X){return X.replace(/\\\$/g,"$").replace(/\\\*/g,"*").replace(/\\\^/g,"^").replace(/\\\|/g,"|").replace(/\\\(/g,"(").replace(/\\\)/g,")")}function b9(X,Y,$){return X[Y]===$&&X.charCodeAt(Y-1)!==92}function z6(X,Y){return b9(X,Y,"(")}function o2(X,Y){return b9(X,Y,")")}function BY(X,Y){return b9(X,Y,"|")}function WM(X){if(!(z6(X,0)&&o2(X,X.length-1)))return!1;let Y=0;for(let $=0;$<X.length;$++){if(z6(X,$))Y+=1;if(o2(X,$))Y-=1;if(Y===0&&$!==X.length-1)return!1}return!0}function JM(X){return X.slice(1,X.length-1)}function zM(X){let Y=0;for(let $=0;$<X.length;$++){if(z6(X,$))Y+=1;if(o2(X,$))Y-=1;if(BY(X,$)&&Y===0)return!0}return!1}function MM(X){for(let Y=0;Y<X.length;Y++)if(z6(X,Y))return!0;return!1}function BM(X){let[Y,$]=[0,0],Z=[];for(let W=0;W<X.length;W++){if(z6(X,W))Y+=1;if(o2(X,W))Y-=1;if(BY(X,W)&&Y===0){let J=X.slice($,W);if(J.length>0)Z.push(D2(J));$=W+1}}let Q=X.slice($);if(Q.length>0)Z.push(D2(Q));if(Z.length===0)return{type:"const",const:""};if(Z.length===1)return Z[0];return{type:"or",expr:Z}}function UM(X){function Y(Q,W){if(!z6(Q,W))throw new j9("TemplateLiteralParser: Index must point to open parens");let J=0;for(let z=W;z<Q.length;z++){if(z6(Q,z))J+=1;if(o2(Q,z))J-=1;if(J===0)return[W,z]}throw new j9("TemplateLiteralParser: Unclosed group parens in expression")}function $(Q,W){for(let J=W;J<Q.length;J++)if(z6(Q,J))return[W,J];return[W,Q.length]}let Z=[];for(let Q=0;Q<X.length;Q++)if(z6(X,Q)){let[W,J]=Y(X,Q),z=X.slice(W,J+1);Z.push(D2(z)),Q=J}else{let[W,J]=$(X,Q),z=X.slice(W,J);if(z.length>0)Z.push(D2(z));Q=J-1}return Z.length===0?{type:"const",const:""}:Z.length===1?Z[0]:{type:"and",expr:Z}}function D2(X){return WM(X)?D2(JM(X)):zM(X)?BM(X):MM(X)?UM(X):{type:"const",const:QM(X)}}function O2(X){return D2(X.slice(1,X.length-1))}class UY extends l{}function GM(X){return X.type==="or"&&X.expr.length===2&&X.expr[0].type==="const"&&X.expr[0].const==="0"&&X.expr[1].type==="const"&&X.expr[1].const==="[1-9][0-9]*"}function AM(X){return X.type==="or"&&X.expr.length===2&&X.expr[0].type==="const"&&X.expr[0].const==="true"&&X.expr[1].type==="const"&&X.expr[1].const==="false"}function wM(X){return X.type==="const"&&X.const===".*"}function l6(X){return GM(X)||wM(X)?!1:AM(X)?!0:X.type==="and"?X.expr.every((Y)=>l6(Y)):X.type==="or"?X.expr.every((Y)=>l6(Y)):X.type==="const"?!0:(()=>{throw new UY("Unknown expression type")})()}function U7(X){let Y=O2(X.pattern);return l6(Y)}class GY extends l{}function*AY(X){if(X.length===1)return yield*X[0];for(let Y of X[0])for(let $ of AY(X.slice(1)))yield`${Y}${$}`}function*HM(X){return yield*AY(X.expr.map((Y)=>[...n2(Y)]))}function*qM(X){for(let Y of X.expr)yield*n2(Y)}function*NM(X){return yield X.const}function*n2(X){return X.type==="and"?yield*HM(X):X.type==="or"?yield*qM(X):X.type==="const"?yield*NM(X):(()=>{throw new GY("Unknown expression")})()}function L2(X){let Y=O2(X.pattern);return l6(Y)?[...n2(Y)]:[]}function A0(X,Y={}){return{...Y,[L]:"Literal",const:X,type:typeof X}}function s2(X={}){return{...X,[L]:"Boolean",type:"boolean"}}function o6(X={}){return{...X,[L]:"BigInt",type:"bigint"}}function O8(X={}){return{...X,[L]:"Number",type:"number"}}function l1(X={}){return{...X,[L]:"String",type:"string"}}function*DM(X){let Y=X.trim().replace(/"|'/g,"");return Y==="boolean"?yield s2():Y==="number"?yield O8():Y==="bigint"?yield o6():Y==="string"?yield l1():yield(()=>{let $=Y.split("|").map((Z)=>A0(Z.trim()));return $.length===0?N0():$.length===1?$[0]:f8($)})()}function*OM(X){if(X[1]!=="{"){let Y=A0("$"),$=V9(X.slice(1));return yield*[Y,...$]}for(let Y=2;Y<X.length;Y++)if(X[Y]==="}"){let $=DM(X.slice(2,Y)),Z=V9(X.slice(Y+1));return yield*[...$,...Z]}yield A0(X)}function*V9(X){for(let Y=0;Y<X.length;Y++)if(X[Y]==="$"){let $=A0(X.slice(0,Y)),Z=OM(X.slice(Y));return yield*[$,...Z]}yield A0(X)}function wY(X){return[...V9(X)]}var HY="(true|false)",G7="(0|[1-9][0-9]*)",qY="(.*)";var M6="^(0|[1-9][0-9]*)$",F6="^(.*)$";class NY extends l{}function LM(X){return X.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function DY(X,Y){return u1(X)?X.pattern.slice(1,X.pattern.length-1):G0(X)?`(${X.anyOf.map(($)=>DY($,Y)).join("|")})`:u6(X)?`${Y}${G7}`:c6(X)?`${Y}${G7}`:_9(X)?`${Y}${G7}`:u2(X)?`${Y}${qY}`:J6(X)?`${Y}${LM(X.const.toString())}`:F9(X)?`${Y}${HY}`:(()=>{throw new NY(`Unexpected Kind '${X[L]}'`)})()}function E9(X){return`^${X.map((Y)=>DY(Y,"")).join("")}$`}function n6(X){let $=L2(X).map((Z)=>A0(Z));return f8($)}function t2(X,Y={}){let $=V0(X)?E9(wY(X)):E9(X);return{...Y,[L]:"TemplateLiteral",type:"string",pattern:$}}function PM(X){return L2(X).map(($)=>$.toString())}function SM(X){let Y=[];for(let $ of X)Y.push(...k1($));return Y}function _M(X){return[X.toString()]}function k1(X){return[...new Set(u1(X)?PM(X):G0(X)?SM(X.anyOf):J6(X)?_M(X.const):u6(X)?["[number]"]:c6(X)?["[number]"]:[])]}function FM(X,Y,$){let Z={};for(let Q of Object.getOwnPropertyNames(Y))Z[Q]=s6(X,k1(Y[Q]),$);return Z}function CM(X,Y,$){return FM(X,Y.properties,$)}function OY(X,Y,$){let Z=CM(X,Y,$);return z0(Z)}function PY(X,Y){return X.map(($)=>SY($,Y))}function RM(X){return X.filter((Y)=>!q2(Y))}function KM(X,Y){return B7(RM(PY(X,Y)))}function jM(X){return X.some((Y)=>q2(Y))?[]:X}function bM(X,Y){return f8(jM(PY(X,Y)))}function VM(X,Y){return Y in X?X[Y]:Y==="[number]"?f8(X):N0()}function EM(X,Y){return Y==="[number]"?X:N0()}function IM(X,Y){return Y in X?X[Y]:N0()}function SY(X,Y){return t0(X)?KM(X.allOf,Y):G0(X)?bM(X.anyOf,Y):D8(X)?VM(X.items??[],Y):W6(X)?EM(X.items,Y):$1(X)?IM(X.properties,Y):N0()}function r2(X,Y){return Y.map(($)=>SY(X,$))}function LY(X,Y){return f8(r2(X,Y))}function s6(X,Y,$={}){return T0(Y)?V(OY(X,Y,$)):c1(Y)?V(_Y(X,Y,$)):i1(Y)?V(LY(X,k1(Y)),$):V(LY(X,Y),$)}function xM(X,Y,$){return{[Y]:s6(X,[Y],$)}}function kM(X,Y,$){return Y.reduce((Z,Q)=>{return{...Z,...xM(X,Q,$)}},{})}function TM(X,Y,$){return kM(X,Y.keys,$)}function _Y(X,Y,$){let Z=TM(X,Y,$);return z0(Z)}function a2(X,Y={}){return{...Y,[L]:"Iterator",type:"Iterator",items:V(X)}}function gM(X,Y={}){let $=globalThis.Object.getOwnPropertyNames(X),Z=$.filter((z)=>g8(X[z])),Q=$.filter((z)=>!Z.includes(z)),W=i1(Y.additionalProperties)?{additionalProperties:V(Y.additionalProperties)}:{},J={};for(let z of $)J[z]=V(X[z]);return Q.length>0?{...Y,...W,[L]:"Object",type:"object",properties:J,required:Q}:{...Y,...W,[L]:"Object",type:"object",properties:J}}var L0=gM;function e2(X,Y={}){return{...Y,[L]:"Promise",type:"Promise",item:V(X)}}function fM(X){return s0(V(X),[k8])}function yM(X){return{...V(X),[k8]:"Readonly"}}function dM(X,Y){return Y===!1?fM(X):yM(X)}function o1(X,Y){let $=Y??!0;return T0(X)?FY(X,$):dM(X,$)}function vM(X,Y){let $={};for(let Z of globalThis.Object.getOwnPropertyNames(X))$[Z]=o1(X[Z],Y);return $}function pM(X,Y){return vM(X.properties,Y)}function FY(X,Y){let $=pM(X,Y);return z0($)}function L8(X,Y={}){let[$,Z,Q]=[!1,X.length,X.length];return X.length>0?{...Y,[L]:"Tuple",type:"array",items:n0(X),additionalItems:$,minItems:Z,maxItems:Q}:{...Y,[L]:"Tuple",type:"array",minItems:Z,maxItems:Q}}function CY(X,Y){return X.includes(Y)}function RY(X){return[...new Set(X)]}function hM(X,Y){return X.filter(($)=>Y.includes($))}function mM(X,Y){return X.reduce(($,Z)=>{return hM($,Z)},Y)}function KY(X){return X.length===1?X[0]:X.length>1?mM(X.slice(1),X[0]):[]}function jY(X){let Y=[];for(let $ of X)Y.push(...$);return Y}function bY(X,Y){return X in Y?$8(X,Y[X]):z0(Y)}function cM(X){return{[X]:A0(X)}}function uM(X){let Y={};for(let $ of X)Y[$]=A0($);return Y}function iM(X,Y){return CY(Y,X)?cM(X):uM(Y)}function lM(X,Y){let $=iM(X,Y);return bY(X,$)}function X4(X,Y){return Y.map(($)=>$8(X,$))}function oM(X,Y){let $={};for(let Z of globalThis.Object.getOwnPropertyNames(Y))$[Z]=$8(X,Y[Z]);return $}function $8(X,Y){return g8(Y)?R1($8(X,s0(Y,[D1]))):WY(Y)?o1($8(X,s0(Y,[k8]))):T0(Y)?bY(X,Y.properties):c1(Y)?lM(X,Y.keys):h2(Y)?v2(X4(X,Y.parameters),$8(X,Y.returns)):m2(Y)?Q6(X4(X,Y.parameters),$8(X,Y.returns)):p2(Y)?d2($8(X,Y.items)):c2(Y)?a2($8(X,Y.items)):t0(Y)?K1(X4(X,Y.allOf)):G0(Y)?D0(X4(X,Y.anyOf)):D8(Y)?L8(X4(X,Y.items??[])):$1(Y)?L0(oM(X,Y.properties)):W6(Y)?y2($8(X,Y.items)):i6(Y)?e2($8(X,Y.item)):Y}function nM(X,Y){let $={};for(let Z of X)$[Z]=$8(Z,Y);return $}function I9(X,Y,$={}){let Z=i1(X)?k1(X):X,Q=Y({[L]:"MappedKey",keys:Z}),W=nM(Z,Q);return V(L0(W),$)}function VY(X){let Y=[];for(let $ of X)Y.push(T1($));return Y}function sM(X){let Y=VY(X);return jY(Y)}function tM(X){let Y=VY(X);return KY(Y)}function rM(X){return X.map((Y,$)=>$.toString())}function aM(X){return["[number]"]}function eM(X){return globalThis.Object.getOwnPropertyNames(X)}function XB(X){if(!x9)return[];return globalThis.Object.getOwnPropertyNames(X).map(($)=>{return $[0]==="^"&&$[$.length-1]==="$"?$.slice(1,$.length-1):$})}function T1(X){return t0(X)?sM(X.allOf):G0(X)?tM(X.anyOf):D8(X)?rM(X.items??[]):W6(X)?aM(X.items):$1(X)?eM(X.properties):C9(X)?XB(X.patternProperties):[]}var x9=!1;function B6(X){x9=!0;let Y=T1(X);return x9=!1,`^(${Y.map((Z)=>`(${Z})`).join("|")})\$`}function YB(X){return X.map((Y)=>Y==="[number]"?O8():A0(Y))}function Y4(X,Y={}){if(T0(X))return EY(X,Y);else{let $=T1(X),Z=YB($),Q=f8(Z);return V(Q,Y)}}function $B(X,Y){let $={};for(let Z of globalThis.Object.getOwnPropertyNames(X))$[Z]=Y4(X[Z],Y);return $}function ZB(X,Y){return $B(X.properties,Y)}function EY(X,Y){let $=ZB(X,Y);return z0($)}function A7(X){let Y=T1(X),$=r2(X,Y);return Y.map((Z,Q)=>[Y[Q],$[Q]])}function QB(X){return X.allOf.every((Y)=>U6(Y))}function WB(X){return X.anyOf.some((Y)=>U6(Y))}function JB(X){return!U6(X.not)}function U6(X){return X[L]==="Intersect"?QB(X):X[L]==="Union"?WB(X):X[L]==="Not"?JB(X):X[L]==="Undefined"?!0:!1}function zB(X){switch(X.errorType){case P.ArrayContains:return"Expected array to contain at least one matching value";case P.ArrayMaxContains:return`Expected array to contain no more than ${X.schema.maxContains} matching values`;case P.ArrayMinContains:return`Expected array to contain at least ${X.schema.minContains} matching values`;case P.ArrayMaxItems:return`Expected array length to be less or equal to ${X.schema.maxItems}`;case P.ArrayMinItems:return`Expected array length to be greater or equal to ${X.schema.minItems}`;case P.ArrayUniqueItems:return"Expected array elements to be unique";case P.Array:return"Expected array";case P.AsyncIterator:return"Expected AsyncIterator";case P.BigIntExclusiveMaximum:return`Expected bigint to be less than ${X.schema.exclusiveMaximum}`;case P.BigIntExclusiveMinimum:return`Expected bigint to be greater than ${X.schema.exclusiveMinimum}`;case P.BigIntMaximum:return`Expected bigint to be less or equal to ${X.schema.maximum}`;case P.BigIntMinimum:return`Expected bigint to be greater or equal to ${X.schema.minimum}`;case P.BigIntMultipleOf:return`Expected bigint to be a multiple of ${X.schema.multipleOf}`;case P.BigInt:return"Expected bigint";case P.Boolean:return"Expected boolean";case P.DateExclusiveMinimumTimestamp:return`Expected Date timestamp to be greater than ${X.schema.exclusiveMinimumTimestamp}`;case P.DateExclusiveMaximumTimestamp:return`Expected Date timestamp to be less than ${X.schema.exclusiveMaximumTimestamp}`;case P.DateMinimumTimestamp:return`Expected Date timestamp to be greater or equal to ${X.schema.minimumTimestamp}`;case P.DateMaximumTimestamp:return`Expected Date timestamp to be less or equal to ${X.schema.maximumTimestamp}`;case P.DateMultipleOfTimestamp:return`Expected Date timestamp to be a multiple of ${X.schema.multipleOfTimestamp}`;case P.Date:return"Expected Date";case P.Function:return"Expected function";case P.IntegerExclusiveMaximum:return`Expected integer to be less than ${X.schema.exclusiveMaximum}`;case P.IntegerExclusiveMinimum:return`Expected integer to be greater than ${X.schema.exclusiveMinimum}`;case P.IntegerMaximum:return`Expected integer to be less or equal to ${X.schema.maximum}`;case P.IntegerMinimum:return`Expected integer to be greater or equal to ${X.schema.minimum}`;case P.IntegerMultipleOf:return`Expected integer to be a multiple of ${X.schema.multipleOf}`;case P.Integer:return"Expected integer";case P.IntersectUnevaluatedProperties:return"Unexpected property";case P.Intersect:return"Expected all values to match";case P.Iterator:return"Expected Iterator";case P.Literal:return`Expected ${typeof X.schema.const==="string"?`'${X.schema.const}'`:X.schema.const}`;case P.Never:return"Never";case P.Not:return"Value should not match";case P.Null:return"Expected null";case P.NumberExclusiveMaximum:return`Expected number to be less than ${X.schema.exclusiveMaximum}`;case P.NumberExclusiveMinimum:return`Expected number to be greater than ${X.schema.exclusiveMinimum}`;case P.NumberMaximum:return`Expected number to be less or equal to ${X.schema.maximum}`;case P.NumberMinimum:return`Expected number to be greater or equal to ${X.schema.minimum}`;case P.NumberMultipleOf:return`Expected number to be a multiple of ${X.schema.multipleOf}`;case P.Number:return"Expected number";case P.Object:return"Expected object";case P.ObjectAdditionalProperties:return"Unexpected property";case P.ObjectMaxProperties:return`Expected object to have no more than ${X.schema.maxProperties} properties`;case P.ObjectMinProperties:return`Expected object to have at least ${X.schema.minProperties} properties`;case P.ObjectRequiredProperty:return"Required property";case P.Promise:return"Expected Promise";case P.RegExp:return"Expected string to match regular expression";case P.StringFormatUnknown:return`Unknown format '${X.schema.format}'`;case P.StringFormat:return`Expected string to match '${X.schema.format}' format`;case P.StringMaxLength:return`Expected string length less or equal to ${X.schema.maxLength}`;case P.StringMinLength:return`Expected string length greater or equal to ${X.schema.minLength}`;case P.StringPattern:return`Expected string to match '${X.schema.pattern}'`;case P.String:return"Expected string";case P.Symbol:return"Expected symbol";case P.TupleLength:return`Expected tuple to have ${X.schema.maxItems||0} elements`;case P.Tuple:return"Expected tuple";case P.Uint8ArrayMaxByteLength:return`Expected byte length less or equal to ${X.schema.maxByteLength}`;case P.Uint8ArrayMinByteLength:return`Expected byte length greater or equal to ${X.schema.minByteLength}`;case P.Uint8Array:return"Expected Uint8Array";case P.Undefined:return"Expected undefined";case P.Union:return"Expected union value";case P.Void:return"Expected void";case P.Kind:return`Expected kind '${X.schema[L]}'`;default:return"Unknown error type"}}var MB=zB;function IY(){return MB}class xY extends l{constructor(X){super(`Unable to dereference schema with \$id '${X.$id}'`);this.schema=X}}function BB(X,Y){let $=Y.find((Z)=>Z.$id===X.$ref);if($===void 0)throw new xY(X);return B0($,Y)}function B0(X,Y){return X[L]==="This"||X[L]==="Ref"?BB(X,Y):X}class kY extends l{constructor(X){super("Unable to hash value");this.value=X}}var n1;(function(X){X[X.Undefined=0]="Undefined",X[X.Null=1]="Null",X[X.Boolean=2]="Boolean",X[X.Number=3]="Number",X[X.String=4]="String",X[X.Object=5]="Object",X[X.Array=6]="Array",X[X.Date=7]="Date",X[X.Uint8Array=8]="Uint8Array",X[X.Symbol=9]="Symbol",X[X.BigInt=10]="BigInt"})(n1||(n1={}));var P2=BigInt("14695981039346656037"),[UB,GB]=[BigInt("1099511628211"),BigInt("2")**BigInt("64")],AB=Array.from({length:256}).map((X,Y)=>BigInt(Y)),TY=new Float64Array(1),gY=new DataView(TY.buffer),fY=new Uint8Array(TY.buffer);function*wB(X){let Y=X===0?1:Math.ceil(Math.floor(Math.log2(X)+1)/8);for(let $=0;$<Y;$++)yield X>>8*(Y-1-$)&255}function HB(X){O1(n1.Array);for(let Y of X)S2(Y)}function qB(X){O1(n1.Boolean),O1(X?1:0)}function NB(X){O1(n1.BigInt),gY.setBigInt64(0,X);for(let Y of fY)O1(Y)}function DB(X){O1(n1.Date),S2(X.getTime())}function OB(X){O1(n1.Null)}function LB(X){O1(n1.Number),gY.setFloat64(0,X);for(let Y of fY)O1(Y)}function PB(X){O1(n1.Object);for(let Y of globalThis.Object.getOwnPropertyNames(X).sort())S2(Y),S2(X[Y])}function SB(X){O1(n1.String);for(let Y=0;Y<X.length;Y++)for(let $ of wB(X.charCodeAt(Y)))O1($)}function _B(X){O1(n1.Symbol),S2(X.description)}function FB(X){O1(n1.Uint8Array);for(let Y=0;Y<X.length;Y++)O1(X[Y])}function CB(X){return O1(n1.Undefined)}function S2(X){if(i(X))return HB(X);if(x8(X))return qB(X);if(A1(X))return NB(X);if(p1(X))return DB(X);if(Z6(X))return OB(X);if(p(X))return LB(X);if(j0(X))return PB(X);if(X0(X))return SB(X);if(E1(X))return _B(X);if(A2(X))return FB(X);if(p0(X))return CB(X);throw new kY(X)}function O1(X){P2=P2^AB[X],P2=P2*UB%GB}function C6(X){return P2=BigInt("14695981039346656037"),S2(X),P2}var P;(function(X){X[X.ArrayContains=0]="ArrayContains",X[X.ArrayMaxContains=1]="ArrayMaxContains",X[X.ArrayMaxItems=2]="ArrayMaxItems",X[X.ArrayMinContains=3]="ArrayMinContains",X[X.ArrayMinItems=4]="ArrayMinItems",X[X.ArrayUniqueItems=5]="ArrayUniqueItems",X[X.Array=6]="Array",X[X.AsyncIterator=7]="AsyncIterator",X[X.BigIntExclusiveMaximum=8]="BigIntExclusiveMaximum",X[X.BigIntExclusiveMinimum=9]="BigIntExclusiveMinimum",X[X.BigIntMaximum=10]="BigIntMaximum",X[X.BigIntMinimum=11]="BigIntMinimum",X[X.BigIntMultipleOf=12]="BigIntMultipleOf",X[X.BigInt=13]="BigInt",X[X.Boolean=14]="Boolean",X[X.DateExclusiveMaximumTimestamp=15]="DateExclusiveMaximumTimestamp",X[X.DateExclusiveMinimumTimestamp=16]="DateExclusiveMinimumTimestamp",X[X.DateMaximumTimestamp=17]="DateMaximumTimestamp",X[X.DateMinimumTimestamp=18]="DateMinimumTimestamp",X[X.DateMultipleOfTimestamp=19]="DateMultipleOfTimestamp",X[X.Date=20]="Date",X[X.Function=21]="Function",X[X.IntegerExclusiveMaximum=22]="IntegerExclusiveMaximum",X[X.IntegerExclusiveMinimum=23]="IntegerExclusiveMinimum",X[X.IntegerMaximum=24]="IntegerMaximum",X[X.IntegerMinimum=25]="IntegerMinimum",X[X.IntegerMultipleOf=26]="IntegerMultipleOf",X[X.Integer=27]="Integer",X[X.IntersectUnevaluatedProperties=28]="IntersectUnevaluatedProperties",X[X.Intersect=29]="Intersect",X[X.Iterator=30]="Iterator",X[X.Kind=31]="Kind",X[X.Literal=32]="Literal",X[X.Never=33]="Never",X[X.Not=34]="Not",X[X.Null=35]="Null",X[X.NumberExclusiveMaximum=36]="NumberExclusiveMaximum",X[X.NumberExclusiveMinimum=37]="NumberExclusiveMinimum",X[X.NumberMaximum=38]="NumberMaximum",X[X.NumberMinimum=39]="NumberMinimum",X[X.NumberMultipleOf=40]="NumberMultipleOf",X[X.Number=41]="Number",X[X.ObjectAdditionalProperties=42]="ObjectAdditionalProperties",X[X.ObjectMaxProperties=43]="ObjectMaxProperties",X[X.ObjectMinProperties=44]="ObjectMinProperties",X[X.ObjectRequiredProperty=45]="ObjectRequiredProperty",X[X.Object=46]="Object",X[X.Promise=47]="Promise",X[X.RegExp=48]="RegExp",X[X.StringFormatUnknown=49]="StringFormatUnknown",X[X.StringFormat=50]="StringFormat",X[X.StringMaxLength=51]="StringMaxLength",X[X.StringMinLength=52]="StringMinLength",X[X.StringPattern=53]="StringPattern",X[X.String=54]="String",X[X.Symbol=55]="Symbol",X[X.TupleLength=56]="TupleLength",X[X.Tuple=57]="Tuple",X[X.Uint8ArrayMaxByteLength=58]="Uint8ArrayMaxByteLength",X[X.Uint8ArrayMinByteLength=59]="Uint8ArrayMinByteLength",X[X.Uint8Array=60]="Uint8Array",X[X.Undefined=61]="Undefined",X[X.Union=62]="Union",X[X.Void=63]="Void"})(P||(P={}));class yY extends l{constructor(X){super("Unknown type");this.schema=X}}function G6(X){return X.replace(/~/g,"~0").replace(/\//g,"~1")}function Q0(X){return X!==void 0}class w7{constructor(X){this.iterator=X}[Symbol.iterator](){return this.iterator}First(){let X=this.iterator.next();return X.done?void 0:X.value}}function E(X,Y,$,Z){return{type:X,schema:Y,path:$,value:Z,message:IY()({errorType:X,path:$,schema:Y,value:Z})}}function*RB(X,Y,$,Z){}function*KB(X,Y,$,Z){if(!i(Z))return yield E(P.Array,X,$,Z);if(Q0(X.minItems)&&!(Z.length>=X.minItems))yield E(P.ArrayMinItems,X,$,Z);if(Q0(X.maxItems)&&!(Z.length<=X.maxItems))yield E(P.ArrayMaxItems,X,$,Z);for(let J=0;J<Z.length;J++)yield*w1(X.items,Y,`${$}/${J}`,Z[J]);if(X.uniqueItems===!0&&!function(){let J=new Set;for(let z of Z){let M=C6(z);if(J.has(M))return!1;else J.add(M)}return!0}())yield E(P.ArrayUniqueItems,X,$,Z);if(!(Q0(X.contains)||Q0(X.minContains)||Q0(X.maxContains)))return;let Q=Q0(X.contains)?X.contains:N0(),W=Z.reduce((J,z,M)=>w1(Q,Y,`${$}${M}`,z).next().done===!0?J+1:J,0);if(W===0)yield E(P.ArrayContains,X,$,Z);if(p(X.minContains)&&W<X.minContains)yield E(P.ArrayMinContains,X,$,Z);if(p(X.maxContains)&&W>X.maxContains)yield E(P.ArrayMaxContains,X,$,Z)}function*jB(X,Y,$,Z){if(!Z7(Z))yield E(P.AsyncIterator,X,$,Z)}function*bB(X,Y,$,Z){if(!A1(Z))return yield E(P.BigInt,X,$,Z);if(Q0(X.exclusiveMaximum)&&!(Z<X.exclusiveMaximum))yield E(P.BigIntExclusiveMaximum,X,$,Z);if(Q0(X.exclusiveMinimum)&&!(Z>X.exclusiveMinimum))yield E(P.BigIntExclusiveMinimum,X,$,Z);if(Q0(X.maximum)&&!(Z<=X.maximum))yield E(P.BigIntMaximum,X,$,Z);if(Q0(X.minimum)&&!(Z>=X.minimum))yield E(P.BigIntMinimum,X,$,Z);if(Q0(X.multipleOf)&&Z%X.multipleOf!==BigInt(0))yield E(P.BigIntMultipleOf,X,$,Z)}function*VB(X,Y,$,Z){if(!x8(Z))yield E(P.Boolean,X,$,Z)}function*EB(X,Y,$,Z){yield*w1(X.returns,Y,$,Z.prototype)}function*IB(X,Y,$,Z){if(!p1(Z))return yield E(P.Date,X,$,Z);if(Q0(X.exclusiveMaximumTimestamp)&&!(Z.getTime()<X.exclusiveMaximumTimestamp))yield E(P.DateExclusiveMaximumTimestamp,X,$,Z);if(Q0(X.exclusiveMinimumTimestamp)&&!(Z.getTime()>X.exclusiveMinimumTimestamp))yield E(P.DateExclusiveMinimumTimestamp,X,$,Z);if(Q0(X.maximumTimestamp)&&!(Z.getTime()<=X.maximumTimestamp))yield E(P.DateMaximumTimestamp,X,$,Z);if(Q0(X.minimumTimestamp)&&!(Z.getTime()>=X.minimumTimestamp))yield E(P.DateMinimumTimestamp,X,$,Z);if(Q0(X.multipleOfTimestamp)&&Z.getTime()%X.multipleOfTimestamp!==0)yield E(P.DateMultipleOfTimestamp,X,$,Z)}function*xB(X,Y,$,Z){if(!z7(Z))yield E(P.Function,X,$,Z)}function*kB(X,Y,$,Z){if(!J7(Z))return yield E(P.Integer,X,$,Z);if(Q0(X.exclusiveMaximum)&&!(Z<X.exclusiveMaximum))yield E(P.IntegerExclusiveMaximum,X,$,Z);if(Q0(X.exclusiveMinimum)&&!(Z>X.exclusiveMinimum))yield E(P.IntegerExclusiveMinimum,X,$,Z);if(Q0(X.maximum)&&!(Z<=X.maximum))yield E(P.IntegerMaximum,X,$,Z);if(Q0(X.minimum)&&!(Z>=X.minimum))yield E(P.IntegerMinimum,X,$,Z);if(Q0(X.multipleOf)&&Z%X.multipleOf!==0)yield E(P.IntegerMultipleOf,X,$,Z)}function*TB(X,Y,$,Z){for(let Q of X.allOf){let W=w1(Q,Y,$,Z).next();if(!W.done)yield E(P.Intersect,X,$,Z),yield W.value}if(X.unevaluatedProperties===!1){let Q=new RegExp(B6(X));for(let W of Object.getOwnPropertyNames(Z))if(!Q.test(W))yield E(P.IntersectUnevaluatedProperties,X,`${$}/${W}`,Z)}if(typeof X.unevaluatedProperties==="object"){let Q=new RegExp(B6(X));for(let W of Object.getOwnPropertyNames(Z))if(!Q.test(W)){let J=w1(X.unevaluatedProperties,Y,`${$}/${W}`,Z[W]).next();if(!J.done)yield J.value}}}function*gB(X,Y,$,Z){if(!Q7(Z))yield E(P.Iterator,X,$,Z)}function*fB(X,Y,$,Z){if(Z!==X.const)yield E(P.Literal,X,$,Z)}function*yB(X,Y,$,Z){yield E(P.Never,X,$,Z)}function*dB(X,Y,$,Z){if(w1(X.not,Y,$,Z).next().done===!0)yield E(P.Not,X,$,Z)}function*vB(X,Y,$,Z){if(!Z6(Z))yield E(P.Null,X,$,Z)}function*pB(X,Y,$,Z){if(!o0.IsNumberLike(Z))return yield E(P.Number,X,$,Z);if(Q0(X.exclusiveMaximum)&&!(Z<X.exclusiveMaximum))yield E(P.NumberExclusiveMaximum,X,$,Z);if(Q0(X.exclusiveMinimum)&&!(Z>X.exclusiveMinimum))yield E(P.NumberExclusiveMinimum,X,$,Z);if(Q0(X.maximum)&&!(Z<=X.maximum))yield E(P.NumberMaximum,X,$,Z);if(Q0(X.minimum)&&!(Z>=X.minimum))yield E(P.NumberMinimum,X,$,Z);if(Q0(X.multipleOf)&&Z%X.multipleOf!==0)yield E(P.NumberMultipleOf,X,$,Z)}function*hB(X,Y,$,Z){if(!o0.IsObjectLike(Z))return yield E(P.Object,X,$,Z);if(Q0(X.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=X.minProperties))yield E(P.ObjectMinProperties,X,$,Z);if(Q0(X.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=X.maxProperties))yield E(P.ObjectMaxProperties,X,$,Z);let Q=Array.isArray(X.required)?X.required:[],W=Object.getOwnPropertyNames(X.properties),J=Object.getOwnPropertyNames(Z);for(let z of Q){if(J.includes(z))continue;yield E(P.ObjectRequiredProperty,X.properties[z],`${$}/${G6(z)}`,void 0)}if(X.additionalProperties===!1){for(let z of J)if(!W.includes(z))yield E(P.ObjectAdditionalProperties,X,`${$}/${G6(z)}`,Z[z])}if(typeof X.additionalProperties==="object")for(let z of J){if(W.includes(z))continue;yield*w1(X.additionalProperties,Y,`${$}/${G6(z)}`,Z[z])}for(let z of W){let M=X.properties[z];if(X.required&&X.required.includes(z)){if(yield*w1(M,Y,`${$}/${G6(z)}`,Z[z]),U6(X)&&!(z in Z))yield E(P.ObjectRequiredProperty,M,`${$}/${G6(z)}`,void 0)}else if(o0.IsExactOptionalProperty(Z,z))yield*w1(M,Y,`${$}/${G6(z)}`,Z[z])}}function*mB(X,Y,$,Z){if(!W7(Z))yield E(P.Promise,X,$,Z)}function*cB(X,Y,$,Z){if(!o0.IsRecordLike(Z))return yield E(P.Object,X,$,Z);if(Q0(X.minProperties)&&!(Object.getOwnPropertyNames(Z).length>=X.minProperties))yield E(P.ObjectMinProperties,X,$,Z);if(Q0(X.maxProperties)&&!(Object.getOwnPropertyNames(Z).length<=X.maxProperties))yield E(P.ObjectMaxProperties,X,$,Z);let[Q,W]=Object.entries(X.patternProperties)[0],J=new RegExp(Q);for(let[z,M]of Object.entries(Z))if(J.test(z))yield*w1(W,Y,`${$}/${G6(z)}`,M);if(typeof X.additionalProperties==="object"){for(let[z,M]of Object.entries(Z))if(!J.test(z))yield*w1(X.additionalProperties,Y,`${$}/${G6(z)}`,M)}if(X.additionalProperties===!1)for(let[z,M]of Object.entries(Z)){if(J.test(z))continue;return yield E(P.ObjectAdditionalProperties,X,`${$}/${G6(z)}`,M)}}function*uB(X,Y,$,Z){yield*w1(B0(X,Y),Y,$,Z)}function*iB(X,Y,$,Z){if(!X0(Z))return yield E(P.String,X,$,Z);if(Q0(X.minLength)&&!(Z.length>=X.minLength))yield E(P.StringMinLength,X,$,Z);if(Q0(X.maxLength)&&!(Z.length<=X.maxLength))yield E(P.StringMaxLength,X,$,Z);if(!new RegExp(X.source,X.flags).test(Z))return yield E(P.RegExp,X,$,Z)}function*lB(X,Y,$,Z){if(!X0(Z))return yield E(P.String,X,$,Z);if(Q0(X.minLength)&&!(Z.length>=X.minLength))yield E(P.StringMinLength,X,$,Z);if(Q0(X.maxLength)&&!(Z.length<=X.maxLength))yield E(P.StringMaxLength,X,$,Z);if(X0(X.pattern)){if(!new RegExp(X.pattern).test(Z))yield E(P.StringPattern,X,$,Z)}if(X0(X.format)){if(!C0.Has(X.format))yield E(P.StringFormatUnknown,X,$,Z);else if(!C0.Get(X.format)(Z))yield E(P.StringFormat,X,$,Z)}}function*oB(X,Y,$,Z){if(!E1(Z))yield E(P.Symbol,X,$,Z)}function*nB(X,Y,$,Z){if(!X0(Z))return yield E(P.String,X,$,Z);if(!new RegExp(X.pattern).test(Z))yield E(P.StringPattern,X,$,Z)}function*sB(X,Y,$,Z){yield*w1(B0(X,Y),Y,$,Z)}function*tB(X,Y,$,Z){if(!i(Z))return yield E(P.Tuple,X,$,Z);if(X.items===void 0&&Z.length!==0)return yield E(P.TupleLength,X,$,Z);if(Z.length!==X.maxItems)return yield E(P.TupleLength,X,$,Z);if(!X.items)return;for(let Q=0;Q<X.items.length;Q++)yield*w1(X.items[Q],Y,`${$}/${Q}`,Z[Q])}function*rB(X,Y,$,Z){if(!p0(Z))yield E(P.Undefined,X,$,Z)}function*aB(X,Y,$,Z){let Q=0;for(let W of X.anyOf){let J=[...w1(W,Y,$,Z)];if(J.length===0)return;Q+=J.length}if(Q>0)yield E(P.Union,X,$,Z)}function*eB(X,Y,$,Z){if(!A2(Z))return yield E(P.Uint8Array,X,$,Z);if(Q0(X.maxByteLength)&&!(Z.length<=X.maxByteLength))yield E(P.Uint8ArrayMaxByteLength,X,$,Z);if(Q0(X.minByteLength)&&!(Z.length>=X.minByteLength))yield E(P.Uint8ArrayMinByteLength,X,$,Z)}function*XU(X,Y,$,Z){}function*YU(X,Y,$,Z){if(!o0.IsVoidLike(Z))yield E(P.Void,X,$,Z)}function*$U(X,Y,$,Z){if(!h0.Get(X[L])(X,Z))yield E(P.Kind,X,$,Z)}function*w1(X,Y,$,Z){let Q=Q0(X.$id)?[...Y,X]:Y,W=X;switch(W[L]){case"Any":return yield*RB(W,Q,$,Z);case"Array":return yield*KB(W,Q,$,Z);case"AsyncIterator":return yield*jB(W,Q,$,Z);case"BigInt":return yield*bB(W,Q,$,Z);case"Boolean":return yield*VB(W,Q,$,Z);case"Constructor":return yield*EB(W,Q,$,Z);case"Date":return yield*IB(W,Q,$,Z);case"Function":return yield*xB(W,Q,$,Z);case"Integer":return yield*kB(W,Q,$,Z);case"Intersect":return yield*TB(W,Q,$,Z);case"Iterator":return yield*gB(W,Q,$,Z);case"Literal":return yield*fB(W,Q,$,Z);case"Never":return yield*yB(W,Q,$,Z);case"Not":return yield*dB(W,Q,$,Z);case"Null":return yield*vB(W,Q,$,Z);case"Number":return yield*pB(W,Q,$,Z);case"Object":return yield*hB(W,Q,$,Z);case"Promise":return yield*mB(W,Q,$,Z);case"Record":return yield*cB(W,Q,$,Z);case"Ref":return yield*uB(W,Q,$,Z);case"RegExp":return yield*iB(W,Q,$,Z);case"String":return yield*lB(W,Q,$,Z);case"Symbol":return yield*oB(W,Q,$,Z);case"TemplateLiteral":return yield*nB(W,Q,$,Z);case"This":return yield*sB(W,Q,$,Z);case"Tuple":return yield*tB(W,Q,$,Z);case"Undefined":return yield*rB(W,Q,$,Z);case"Union":return yield*aB(W,Q,$,Z);case"Uint8Array":return yield*eB(W,Q,$,Z);case"Unknown":return yield*XU(W,Q,$,Z);case"Void":return yield*YU(W,Q,$,Z);default:if(!h0.Has(W[L]))throw new yY(X);return yield*$U(W,Q,$,Z)}}function $4(...X){let Y=X.length===3?w1(X[0],X[1],"",X[2]):w1(X[0],[],"",X[1]);return new w7(Y)}function A6(X={}){return{...X,[L]:"Any"}}function y8(X={}){return{...X,[L]:"Unknown"}}var D={};h6(D,{TypeGuardUnknownTypeError:()=>dY,IsVoid:()=>_$,IsUnsafe:()=>S$,IsUnknown:()=>P$,IsUnionLiteral:()=>UU,IsUnion:()=>f9,IsUndefined:()=>O$,IsUint8Array:()=>L$,IsTuple:()=>D$,IsTransform:()=>E0,IsThis:()=>N$,IsTemplateLiteral:()=>q$,IsSymbol:()=>H$,IsString:()=>w$,IsSchema:()=>r,IsRegExp:()=>A$,IsRef:()=>G$,IsRecursive:()=>BU,IsRecord:()=>U$,IsReadonly:()=>JU,IsProperties:()=>g9,IsPromise:()=>B$,IsOptional:()=>zU,IsObject:()=>M$,IsNumber:()=>z$,IsNull:()=>J$,IsNot:()=>W$,IsNever:()=>Q$,IsMappedResult:()=>Z$,IsMappedKey:()=>$$,IsLiteralValue:()=>Y$,IsLiteralString:()=>eY,IsLiteralNumber:()=>X$,IsLiteralBoolean:()=>MU,IsLiteral:()=>Q4,IsKindOf:()=>J0,IsKind:()=>F$,IsIterator:()=>aY,IsIntersect:()=>rY,IsInteger:()=>tY,IsFunction:()=>sY,IsDate:()=>nY,IsConstructor:()=>oY,IsBoolean:()=>lY,IsBigInt:()=>iY,IsAsyncIterator:()=>uY,IsArray:()=>cY,IsAny:()=>mY});class dY extends l{}var ZU=["Any","Array","AsyncIterator","BigInt","Boolean","Constructor","Date","Enum","Function","Integer","Intersect","Iterator","Literal","MappedKey","MappedResult","Not","Null","Number","Object","Promise","Record","Ref","RegExp","String","Symbol","TemplateLiteral","This","Tuple","Undefined","Union","Uint8Array","Unknown","Void"];function vY(X){try{return new RegExp(X),!0}catch{return!1}}function k9(X){if(!V0(X))return!1;for(let Y=0;Y<X.length;Y++){let $=X.charCodeAt(Y);if($>=7&&$<=13||$===27||$===127)return!1}return!0}function pY(X){return T9(X)||r(X)}function Z4(X){return m0(X)||g2(X)}function R0(X){return m0(X)||N8(X)}function T9(X){return m0(X)||_6(X)}function P0(X){return m0(X)||V0(X)}function QU(X){return m0(X)||V0(X)&&k9(X)&&vY(X)}function WU(X){return m0(X)||V0(X)&&k9(X)}function hY(X){return m0(X)||r(X)}function JU(X){return b0(X)&&X[k8]==="Readonly"}function zU(X){return b0(X)&&X[D1]==="Optional"}function mY(X){return J0(X,"Any")&&P0(X.$id)}function cY(X){return J0(X,"Array")&&X.type==="array"&&P0(X.$id)&&r(X.items)&&R0(X.minItems)&&R0(X.maxItems)&&T9(X.uniqueItems)&&hY(X.contains)&&R0(X.minContains)&&R0(X.maxContains)}function uY(X){return J0(X,"AsyncIterator")&&X.type==="AsyncIterator"&&P0(X.$id)&&r(X.items)}function iY(X){return J0(X,"BigInt")&&X.type==="bigint"&&P0(X.$id)&&Z4(X.exclusiveMaximum)&&Z4(X.exclusiveMinimum)&&Z4(X.maximum)&&Z4(X.minimum)&&Z4(X.multipleOf)}function lY(X){return J0(X,"Boolean")&&X.type==="boolean"&&P0(X.$id)}function oY(X){return J0(X,"Constructor")&&X.type==="Constructor"&&P0(X.$id)&&I1(X.parameters)&&X.parameters.every((Y)=>r(Y))&&r(X.returns)}function nY(X){return J0(X,"Date")&&X.type==="Date"&&P0(X.$id)&&R0(X.exclusiveMaximumTimestamp)&&R0(X.exclusiveMinimumTimestamp)&&R0(X.maximumTimestamp)&&R0(X.minimumTimestamp)&&R0(X.multipleOfTimestamp)}function sY(X){return J0(X,"Function")&&X.type==="Function"&&P0(X.$id)&&I1(X.parameters)&&X.parameters.every((Y)=>r(Y))&&r(X.returns)}function tY(X){return J0(X,"Integer")&&X.type==="integer"&&P0(X.$id)&&R0(X.exclusiveMaximum)&&R0(X.exclusiveMinimum)&&R0(X.maximum)&&R0(X.minimum)&&R0(X.multipleOf)}function g9(X){return b0(X)&&Object.entries(X).every(([Y,$])=>k9(Y)&&r($))}function rY(X){return J0(X,"Intersect")&&(V0(X.type)&&X.type!=="object"?!1:!0)&&I1(X.allOf)&&X.allOf.every((Y)=>r(Y)&&!E0(Y))&&P0(X.type)&&(T9(X.unevaluatedProperties)||hY(X.unevaluatedProperties))&&P0(X.$id)}function aY(X){return J0(X,"Iterator")&&X.type==="Iterator"&&P0(X.$id)&&r(X.items)}function J0(X,Y){return b0(X)&&L in X&&X[L]===Y}function eY(X){return Q4(X)&&V0(X.const)}function X$(X){return Q4(X)&&N8(X.const)}function MU(X){return Q4(X)&&_6(X.const)}function Q4(X){return J0(X,"Literal")&&P0(X.$id)&&Y$(X.const)}function Y$(X){return _6(X)||N8(X)||V0(X)}function $$(X){return J0(X,"MappedKey")&&I1(X.keys)&&X.keys.every((Y)=>N8(Y)||V0(Y))}function Z$(X){return J0(X,"MappedResult")&&g9(X.properties)}function Q$(X){return J0(X,"Never")&&b0(X.not)&&Object.getOwnPropertyNames(X.not).length===0}function W$(X){return J0(X,"Not")&&r(X.not)}function J$(X){return J0(X,"Null")&&X.type==="null"&&P0(X.$id)}function z$(X){return J0(X,"Number")&&X.type==="number"&&P0(X.$id)&&R0(X.exclusiveMaximum)&&R0(X.exclusiveMinimum)&&R0(X.maximum)&&R0(X.minimum)&&R0(X.multipleOf)}function M$(X){return J0(X,"Object")&&X.type==="object"&&P0(X.$id)&&g9(X.properties)&&pY(X.additionalProperties)&&R0(X.minProperties)&&R0(X.maxProperties)}function B$(X){return J0(X,"Promise")&&X.type==="Promise"&&P0(X.$id)&&r(X.item)}function U$(X){return J0(X,"Record")&&X.type==="object"&&P0(X.$id)&&pY(X.additionalProperties)&&b0(X.patternProperties)&&((Y)=>{let $=Object.getOwnPropertyNames(Y.patternProperties);return $.length===1&&vY($[0])&&b0(Y.patternProperties)&&r(Y.patternProperties[$[0]])})(X)}function BU(X){return b0(X)&&m1 in X&&X[m1]==="Recursive"}function G$(X){return J0(X,"Ref")&&P0(X.$id)&&V0(X.$ref)}function A$(X){return J0(X,"RegExp")&&P0(X.$id)&&V0(X.source)&&V0(X.flags)&&R0(X.maxLength)&&R0(X.minLength)}function w$(X){return J0(X,"String")&&X.type==="string"&&P0(X.$id)&&R0(X.minLength)&&R0(X.maxLength)&&QU(X.pattern)&&WU(X.format)}function H$(X){return J0(X,"Symbol")&&X.type==="symbol"&&P0(X.$id)}function q$(X){return J0(X,"TemplateLiteral")&&X.type==="string"&&V0(X.pattern)&&X.pattern[0]==="^"&&X.pattern[X.pattern.length-1]==="$"}function N$(X){return J0(X,"This")&&P0(X.$id)&&V0(X.$ref)}function E0(X){return b0(X)&&y0 in X}function D$(X){return J0(X,"Tuple")&&X.type==="array"&&P0(X.$id)&&N8(X.minItems)&&N8(X.maxItems)&&X.minItems===X.maxItems&&(m0(X.items)&&m0(X.additionalItems)&&X.minItems===0||I1(X.items)&&X.items.every((Y)=>r(Y)))}function O$(X){return J0(X,"Undefined")&&X.type==="undefined"&&P0(X.$id)}function UU(X){return f9(X)&&X.anyOf.every((Y)=>eY(Y)||X$(Y))}function f9(X){return J0(X,"Union")&&P0(X.$id)&&b0(X)&&I1(X.anyOf)&&X.anyOf.every((Y)=>r(Y))}function L$(X){return J0(X,"Uint8Array")&&X.type==="Uint8Array"&&P0(X.$id)&&R0(X.minByteLength)&&R0(X.maxByteLength)}function P$(X){return J0(X,"Unknown")&&P0(X.$id)}function S$(X){return J0(X,"Unsafe")}function _$(X){return J0(X,"Void")&&X.type==="void"&&P0(X.$id)}function F$(X){return b0(X)&&L in X&&V0(X[L])&&!ZU.includes(X[L])}function r(X){return b0(X)&&(mY(X)||cY(X)||lY(X)||iY(X)||uY(X)||oY(X)||nY(X)||sY(X)||tY(X)||rY(X)||aY(X)||Q4(X)||$$(X)||Z$(X)||Q$(X)||W$(X)||J$(X)||z$(X)||M$(X)||B$(X)||U$(X)||G$(X)||A$(X)||w$(X)||H$(X)||q$(X)||N$(X)||D$(X)||O$(X)||f9(X)||L$(X)||P$(X)||S$(X)||_$(X)||F$(X))}class b$ extends l{}var F;(function(X){X[X.Union=0]="Union",X[X.True=1]="True",X[X.False=2]="False"})(F||(F={}));function Z8(X){return X===F.False?X:F.True}function _2(X){throw new b$(X)}function X1(X){return D.IsNever(X)||D.IsIntersect(X)||D.IsUnion(X)||D.IsUnknown(X)||D.IsAny(X)}function Y1(X,Y){return D.IsNever(Y)?I$(X,Y):D.IsIntersect(Y)?H7(X,Y):D.IsUnion(Y)?h9(X,Y):D.IsUnknown(Y)?g$(X,Y):D.IsAny(Y)?p9(X,Y):_2("StructuralRight")}function p9(X,Y){return F.True}function GU(X,Y){return D.IsIntersect(Y)?H7(X,Y):D.IsUnion(Y)&&Y.anyOf.some(($)=>D.IsAny($)||D.IsUnknown($))?F.True:D.IsUnion(Y)?F.Union:D.IsUnknown(Y)?F.True:D.IsAny(Y)?F.True:F.Union}function AU(X,Y){return D.IsUnknown(X)?F.False:D.IsAny(X)?F.Union:D.IsNever(X)?F.True:F.False}function wU(X,Y){return D.IsObject(Y)&&q7(Y)?F.True:X1(Y)?Y1(X,Y):!D.IsArray(Y)?F.False:Z8(S0(X.items,Y.items))}function HU(X,Y){return X1(Y)?Y1(X,Y):!D.IsAsyncIterator(Y)?F.False:Z8(S0(X.items,Y.items))}function qU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):D.IsRecord(Y)?Q8(X,Y):D.IsBigInt(Y)?F.True:F.False}function V$(X,Y){return D.IsLiteralBoolean(X)?F.True:D.IsBoolean(X)?F.True:F.False}function NU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):D.IsRecord(Y)?Q8(X,Y):D.IsBoolean(Y)?F.True:F.False}function DU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):!D.IsConstructor(Y)?F.False:X.parameters.length>Y.parameters.length?F.False:!X.parameters.every(($,Z)=>Z8(S0(Y.parameters[Z],$))===F.True)?F.False:Z8(S0(X.returns,Y.returns))}function OU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):D.IsRecord(Y)?Q8(X,Y):D.IsDate(Y)?F.True:F.False}function LU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):!D.IsFunction(Y)?F.False:X.parameters.length>Y.parameters.length?F.False:!X.parameters.every(($,Z)=>Z8(S0(Y.parameters[Z],$))===F.True)?F.False:Z8(S0(X.returns,Y.returns))}function E$(X,Y){return D.IsLiteral(X)&&x1.IsNumber(X.const)?F.True:D.IsNumber(X)||D.IsInteger(X)?F.True:F.False}function PU(X,Y){return D.IsInteger(Y)||D.IsNumber(Y)?F.True:X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):D.IsRecord(Y)?Q8(X,Y):F.False}function H7(X,Y){return Y.allOf.every(($)=>S0(X,$)===F.True)?F.True:F.False}function SU(X,Y){return X.allOf.some(($)=>S0($,Y)===F.True)?F.True:F.False}function _U(X,Y){return X1(Y)?Y1(X,Y):!D.IsIterator(Y)?F.False:Z8(S0(X.items,Y.items))}function FU(X,Y){return D.IsLiteral(Y)&&Y.const===X.const?F.True:X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):D.IsRecord(Y)?Q8(X,Y):D.IsString(Y)?T$(X,Y):D.IsNumber(Y)?x$(X,Y):D.IsInteger(Y)?E$(X,Y):D.IsBoolean(Y)?V$(X,Y):F.False}function I$(X,Y){return F.False}function CU(X,Y){return F.True}function C$(X){let[Y,$]=[X,0];while(!0){if(!D.IsNot(Y))break;Y=Y.not,$+=1}return $%2===0?Y:y8()}function RU(X,Y){return D.IsNot(X)?S0(C$(X),Y):D.IsNot(Y)?S0(X,C$(Y)):_2("Invalid fallthrough for Not")}function KU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):D.IsRecord(Y)?Q8(X,Y):D.IsNull(Y)?F.True:F.False}function x$(X,Y){return D.IsLiteralNumber(X)?F.True:D.IsNumber(X)||D.IsInteger(X)?F.True:F.False}function jU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):D.IsRecord(Y)?Q8(X,Y):D.IsInteger(Y)||D.IsNumber(Y)?F.True:F.False}function g1(X,Y){return Object.getOwnPropertyNames(X.properties).length===Y}function R$(X){return q7(X)}function K$(X){return g1(X,0)||g1(X,1)&&"description"in X.properties&&D.IsUnion(X.properties.description)&&X.properties.description.anyOf.length===2&&(D.IsString(X.properties.description.anyOf[0])&&D.IsUndefined(X.properties.description.anyOf[1])||D.IsString(X.properties.description.anyOf[1])&&D.IsUndefined(X.properties.description.anyOf[0]))}function y9(X){return g1(X,0)}function j$(X){return g1(X,0)}function bU(X){return g1(X,0)}function VU(X){return g1(X,0)}function EU(X){return q7(X)}function IU(X){let Y=O8();return g1(X,0)||g1(X,1)&&"length"in X.properties&&Z8(S0(X.properties.length,Y))===F.True}function xU(X){return g1(X,0)}function q7(X){let Y=O8();return g1(X,0)||g1(X,1)&&"length"in X.properties&&Z8(S0(X.properties.length,Y))===F.True}function kU(X){let Y=Q6([A6()],A6());return g1(X,0)||g1(X,1)&&"then"in X.properties&&Z8(S0(X.properties.then,Y))===F.True}function k$(X,Y){return S0(X,Y)===F.False?F.False:D.IsOptional(X)&&!D.IsOptional(Y)?F.False:F.True}function L1(X,Y){return D.IsUnknown(X)?F.False:D.IsAny(X)?F.Union:D.IsNever(X)||D.IsLiteralString(X)&&R$(Y)||D.IsLiteralNumber(X)&&y9(Y)||D.IsLiteralBoolean(X)&&j$(Y)||D.IsSymbol(X)&&K$(Y)||D.IsBigInt(X)&&bU(Y)||D.IsString(X)&&R$(Y)||D.IsSymbol(X)&&K$(Y)||D.IsNumber(X)&&y9(Y)||D.IsInteger(X)&&y9(Y)||D.IsBoolean(X)&&j$(Y)||D.IsUint8Array(X)&&EU(Y)||D.IsDate(X)&&VU(Y)||D.IsConstructor(X)&&xU(Y)||D.IsFunction(X)&&IU(Y)?F.True:D.IsRecord(X)&&D.IsString(d9(X))?(()=>{return Y[m1]==="Record"?F.True:F.False})():D.IsRecord(X)&&D.IsNumber(d9(X))?(()=>{return g1(Y,0)?F.True:F.False})():F.False}function TU(X,Y){return X1(Y)?Y1(X,Y):D.IsRecord(Y)?Q8(X,Y):!D.IsObject(Y)?F.False:(()=>{for(let $ of Object.getOwnPropertyNames(Y.properties)){if(!($ in X.properties)&&!D.IsOptional(Y.properties[$]))return F.False;if(D.IsOptional(Y.properties[$]))return F.True;if(k$(X.properties[$],Y.properties[$])===F.False)return F.False}return F.True})()}function gU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)&&kU(Y)?F.True:!D.IsPromise(Y)?F.False:Z8(S0(X.item,Y.item))}function d9(X){return M6 in X.patternProperties?O8():(F6 in X.patternProperties)?l1():_2("Unknown record key pattern")}function v9(X){return M6 in X.patternProperties?X.patternProperties[M6]:(F6 in X.patternProperties)?X.patternProperties[F6]:_2("Unable to get record value schema")}function Q8(X,Y){let[$,Z]=[d9(Y),v9(Y)];return D.IsLiteralString(X)&&D.IsNumber($)&&Z8(S0(X,Z))===F.True?F.True:D.IsUint8Array(X)&&D.IsNumber($)?S0(X,Z):D.IsString(X)&&D.IsNumber($)?S0(X,Z):D.IsArray(X)&&D.IsNumber($)?S0(X,Z):D.IsObject(X)?(()=>{for(let Q of Object.getOwnPropertyNames(X.properties))if(k$(Z,X.properties[Q])===F.False)return F.False;return F.True})():F.False}function fU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):!D.IsRecord(Y)?F.False:S0(v9(X),v9(Y))}function yU(X,Y){let $=D.IsRegExp(X)?l1():X,Z=D.IsRegExp(Y)?l1():Y;return S0($,Z)}function T$(X,Y){return D.IsLiteral(X)&&x1.IsString(X.const)?F.True:D.IsString(X)?F.True:F.False}function dU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):D.IsRecord(Y)?Q8(X,Y):D.IsString(Y)?F.True:F.False}function vU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):D.IsRecord(Y)?Q8(X,Y):D.IsSymbol(Y)?F.True:F.False}function pU(X,Y){return D.IsTemplateLiteral(X)?S0(n6(X),Y):D.IsTemplateLiteral(Y)?S0(X,n6(Y)):_2("Invalid fallthrough for TemplateLiteral")}function hU(X,Y){return D.IsArray(Y)&&X.items!==void 0&&X.items.every(($)=>S0($,Y.items)===F.True)}function mU(X,Y){return D.IsNever(X)?F.True:D.IsUnknown(X)?F.False:D.IsAny(X)?F.Union:F.False}function cU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)&&q7(Y)?F.True:D.IsArray(Y)&&hU(X,Y)?F.True:!D.IsTuple(Y)?F.False:x1.IsUndefined(X.items)&&!x1.IsUndefined(Y.items)||!x1.IsUndefined(X.items)&&x1.IsUndefined(Y.items)?F.False:x1.IsUndefined(X.items)&&!x1.IsUndefined(Y.items)?F.True:X.items.every(($,Z)=>S0($,Y.items[Z])===F.True)?F.True:F.False}function uU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):D.IsRecord(Y)?Q8(X,Y):D.IsUint8Array(Y)?F.True:F.False}function iU(X,Y){return X1(Y)?Y1(X,Y):D.IsObject(Y)?L1(X,Y):D.IsRecord(Y)?Q8(X,Y):D.IsVoid(Y)?nU(X,Y):D.IsUndefined(Y)?F.True:F.False}function h9(X,Y){return Y.anyOf.some(($)=>S0(X,$)===F.True)?F.True:F.False}function lU(X,Y){return X.anyOf.every(($)=>S0($,Y)===F.True)?F.True:F.False}function g$(X,Y){return F.True}function oU(X,Y){return D.IsNever(Y)?I$(X,Y):D.IsIntersect(Y)?H7(X,Y):D.IsUnion(Y)?h9(X,Y):D.IsAny(Y)?p9(X,Y):D.IsString(Y)?T$(X,Y):D.IsNumber(Y)?x$(X,Y):D.IsInteger(Y)?E$(X,Y):D.IsBoolean(Y)?V$(X,Y):D.IsArray(Y)?AU(X,Y):D.IsTuple(Y)?mU(X,Y):D.IsObject(Y)?L1(X,Y):D.IsUnknown(Y)?F.True:F.False}function nU(X,Y){return D.IsUndefined(X)?F.True:D.IsUndefined(X)?F.True:F.False}function sU(X,Y){return D.IsIntersect(Y)?H7(X,Y):D.IsUnion(Y)?h9(X,Y):D.IsUnknown(Y)?g$(X,Y):D.IsAny(Y)?p9(X,Y):D.IsObject(Y)?L1(X,Y):D.IsVoid(Y)?F.True:F.False}function S0(X,Y){return D.IsTemplateLiteral(X)||D.IsTemplateLiteral(Y)?pU(X,Y):D.IsRegExp(X)||D.IsRegExp(Y)?yU(X,Y):D.IsNot(X)||D.IsNot(Y)?RU(X,Y):D.IsAny(X)?GU(X,Y):D.IsArray(X)?wU(X,Y):D.IsBigInt(X)?qU(X,Y):D.IsBoolean(X)?NU(X,Y):D.IsAsyncIterator(X)?HU(X,Y):D.IsConstructor(X)?DU(X,Y):D.IsDate(X)?OU(X,Y):D.IsFunction(X)?LU(X,Y):D.IsInteger(X)?PU(X,Y):D.IsIntersect(X)?SU(X,Y):D.IsIterator(X)?_U(X,Y):D.IsLiteral(X)?FU(X,Y):D.IsNever(X)?CU(X,Y):D.IsNull(X)?KU(X,Y):D.IsNumber(X)?jU(X,Y):D.IsObject(X)?TU(X,Y):D.IsRecord(X)?fU(X,Y):D.IsString(X)?dU(X,Y):D.IsSymbol(X)?vU(X,Y):D.IsTuple(X)?cU(X,Y):D.IsPromise(X)?gU(X,Y):D.IsUint8Array(X)?uU(X,Y):D.IsUndefined(X)?iU(X,Y):D.IsUnion(X)?lU(X,Y):D.IsUnknown(X)?oU(X,Y):D.IsVoid(X)?sU(X,Y):_2(`Unknown left type operand '${X[L]}'`)}function R6(X,Y){return S0(X,Y)}function tU(X,Y,$,Z,Q){let W={};for(let J of globalThis.Object.getOwnPropertyNames(X))W[J]=t6(X[J],Y,$,Z,Q);return W}function rU(X,Y,$,Z,Q){return tU(X.properties,Y,$,Z,Q)}function f$(X,Y,$,Z,Q){let W=rU(X,Y,$,Z,Q);return z0(W)}function aU(X,Y,$,Z){let Q=R6(X,Y);return Q===F.Union?D0([$,Z]):Q===F.True?$:Z}function t6(X,Y,$,Z,Q={}){return T0(X)?f$(X,Y,$,Z,Q):c1(X)?V(y$(X,Y,$,Z,Q)):V(aU(X,Y,$,Z),Q)}function eU(X,Y,$,Z,Q){return{[X]:t6(A0(X),Y,$,Z,Q)}}function XG(X,Y,$,Z,Q){return X.reduce((W,J)=>{return{...W,...eU(J,Y,$,Z,Q)}},{})}function YG(X,Y,$,Z,Q){return XG(X.keys,Y,$,Z,Q)}function y$(X,Y,$,Z,Q){let W=YG(X,Y,$,Z,Q);return z0(W)}class d$ extends l{constructor(X){super("Unknown type");this.schema=X}}function $G(X){return X[L]==="Any"||X[L]==="Unknown"}function W0(X){return X!==void 0}function ZG(X,Y,$){return!0}function QG(X,Y,$){if(!i($))return!1;if(W0(X.minItems)&&!($.length>=X.minItems))return!1;if(W0(X.maxItems)&&!($.length<=X.maxItems))return!1;if(!$.every((W)=>H1(X.items,Y,W)))return!1;if(X.uniqueItems===!0&&!function(){let W=new Set;for(let J of $){let z=C6(J);if(W.has(z))return!1;else W.add(z)}return!0}())return!1;if(!(W0(X.contains)||p(X.minContains)||p(X.maxContains)))return!0;let Z=W0(X.contains)?X.contains:N0(),Q=$.reduce((W,J)=>H1(Z,Y,J)?W+1:W,0);if(Q===0)return!1;if(p(X.minContains)&&Q<X.minContains)return!1;if(p(X.maxContains)&&Q>X.maxContains)return!1;return!0}function WG(X,Y,$){return Z7($)}function JG(X,Y,$){if(!A1($))return!1;if(W0(X.exclusiveMaximum)&&!($<X.exclusiveMaximum))return!1;if(W0(X.exclusiveMinimum)&&!($>X.exclusiveMinimum))return!1;if(W0(X.maximum)&&!($<=X.maximum))return!1;if(W0(X.minimum)&&!($>=X.minimum))return!1;if(W0(X.multipleOf)&&$%X.multipleOf!==BigInt(0))return!1;return!0}function zG(X,Y,$){return x8($)}function MG(X,Y,$){return H1(X.returns,Y,$.prototype)}function BG(X,Y,$){if(!p1($))return!1;if(W0(X.exclusiveMaximumTimestamp)&&!($.getTime()<X.exclusiveMaximumTimestamp))return!1;if(W0(X.exclusiveMinimumTimestamp)&&!($.getTime()>X.exclusiveMinimumTimestamp))return!1;if(W0(X.maximumTimestamp)&&!($.getTime()<=X.maximumTimestamp))return!1;if(W0(X.minimumTimestamp)&&!($.getTime()>=X.minimumTimestamp))return!1;if(W0(X.multipleOfTimestamp)&&$.getTime()%X.multipleOfTimestamp!==0)return!1;return!0}function UG(X,Y,$){return z7($)}function GG(X,Y,$){if(!J7($))return!1;if(W0(X.exclusiveMaximum)&&!($<X.exclusiveMaximum))return!1;if(W0(X.exclusiveMinimum)&&!($>X.exclusiveMinimum))return!1;if(W0(X.maximum)&&!($<=X.maximum))return!1;if(W0(X.minimum)&&!($>=X.minimum))return!1;if(W0(X.multipleOf)&&$%X.multipleOf!==0)return!1;return!0}function AG(X,Y,$){let Z=X.allOf.every((Q)=>H1(Q,Y,$));if(X.unevaluatedProperties===!1){let Q=new RegExp(B6(X)),W=Object.getOwnPropertyNames($).every((J)=>Q.test(J));return Z&&W}else if(r(X.unevaluatedProperties)){let Q=new RegExp(B6(X)),W=Object.getOwnPropertyNames($).every((J)=>Q.test(J)||H1(X.unevaluatedProperties,Y,$[J]));return Z&&W}else return Z}function wG(X,Y,$){return Q7($)}function HG(X,Y,$){return $===X.const}function qG(X,Y,$){return!1}function NG(X,Y,$){return!H1(X.not,Y,$)}function DG(X,Y,$){return Z6($)}function OG(X,Y,$){if(!o0.IsNumberLike($))return!1;if(W0(X.exclusiveMaximum)&&!($<X.exclusiveMaximum))return!1;if(W0(X.exclusiveMinimum)&&!($>X.exclusiveMinimum))return!1;if(W0(X.minimum)&&!($>=X.minimum))return!1;if(W0(X.maximum)&&!($<=X.maximum))return!1;if(W0(X.multipleOf)&&$%X.multipleOf!==0)return!1;return!0}function LG(X,Y,$){if(!o0.IsObjectLike($))return!1;if(W0(X.minProperties)&&!(Object.getOwnPropertyNames($).length>=X.minProperties))return!1;if(W0(X.maxProperties)&&!(Object.getOwnPropertyNames($).length<=X.maxProperties))return!1;let Z=Object.getOwnPropertyNames(X.properties);for(let Q of Z){let W=X.properties[Q];if(X.required&&X.required.includes(Q)){if(!H1(W,Y,$[Q]))return!1;if((U6(W)||$G(W))&&!(Q in $))return!1}else if(o0.IsExactOptionalProperty($,Q)&&!H1(W,Y,$[Q]))return!1}if(X.additionalProperties===!1){let Q=Object.getOwnPropertyNames($);if(X.required&&X.required.length===Z.length&&Q.length===Z.length)return!0;else return Q.every((W)=>Z.includes(W))}else if(typeof X.additionalProperties==="object")return Object.getOwnPropertyNames($).every((W)=>Z.includes(W)||H1(X.additionalProperties,Y,$[W]));else return!0}function PG(X,Y,$){return W7($)}function SG(X,Y,$){if(!o0.IsRecordLike($))return!1;if(W0(X.minProperties)&&!(Object.getOwnPropertyNames($).length>=X.minProperties))return!1;if(W0(X.maxProperties)&&!(Object.getOwnPropertyNames($).length<=X.maxProperties))return!1;let[Z,Q]=Object.entries(X.patternProperties)[0],W=new RegExp(Z),J=Object.entries($).every(([B,U])=>{return W.test(B)?H1(Q,Y,U):!0}),z=typeof X.additionalProperties==="object"?Object.entries($).every(([B,U])=>{return!W.test(B)?H1(X.additionalProperties,Y,U):!0}):!0,M=X.additionalProperties===!1?Object.getOwnPropertyNames($).every((B)=>{return W.test(B)}):!0;return J&&z&&M}function _G(X,Y,$){return H1(B0(X,Y),Y,$)}function FG(X,Y,$){let Z=new RegExp(X.source,X.flags);if(W0(X.minLength)){if(!($.length>=X.minLength))return!1}if(W0(X.maxLength)){if(!($.length<=X.maxLength))return!1}return Z.test($)}function CG(X,Y,$){if(!X0($))return!1;if(W0(X.minLength)){if(!($.length>=X.minLength))return!1}if(W0(X.maxLength)){if(!($.length<=X.maxLength))return!1}if(W0(X.pattern)){if(!new RegExp(X.pattern).test($))return!1}if(W0(X.format)){if(!C0.Has(X.format))return!1;return C0.Get(X.format)($)}return!0}function RG(X,Y,$){return E1($)}function KG(X,Y,$){return X0($)&&new RegExp(X.pattern).test($)}function jG(X,Y,$){return H1(B0(X,Y),Y,$)}function bG(X,Y,$){if(!i($))return!1;if(X.items===void 0&&$.length!==0)return!1;if($.length!==X.maxItems)return!1;if(!X.items)return!0;for(let Z=0;Z<X.items.length;Z++)if(!H1(X.items[Z],Y,$[Z]))return!1;return!0}function VG(X,Y,$){return p0($)}function EG(X,Y,$){return X.anyOf.some((Z)=>H1(Z,Y,$))}function IG(X,Y,$){if(!A2($))return!1;if(W0(X.maxByteLength)&&!($.length<=X.maxByteLength))return!1;if(W0(X.minByteLength)&&!($.length>=X.minByteLength))return!1;return!0}function xG(X,Y,$){return!0}function kG(X,Y,$){return o0.IsVoidLike($)}function TG(X,Y,$){if(!h0.Has(X[L]))return!1;return h0.Get(X[L])(X,$)}function H1(X,Y,$){let Z=W0(X.$id)?[...Y,X]:Y,Q=X;switch(Q[L]){case"Any":return ZG(Q,Z,$);case"Array":return QG(Q,Z,$);case"AsyncIterator":return WG(Q,Z,$);case"BigInt":return JG(Q,Z,$);case"Boolean":return zG(Q,Z,$);case"Constructor":return MG(Q,Z,$);case"Date":return BG(Q,Z,$);case"Function":return UG(Q,Z,$);case"Integer":return GG(Q,Z,$);case"Intersect":return AG(Q,Z,$);case"Iterator":return wG(Q,Z,$);case"Literal":return HG(Q,Z,$);case"Never":return qG(Q,Z,$);case"Not":return NG(Q,Z,$);case"Null":return DG(Q,Z,$);case"Number":return OG(Q,Z,$);case"Object":return LG(Q,Z,$);case"Promise":return PG(Q,Z,$);case"Record":return SG(Q,Z,$);case"Ref":return _G(Q,Z,$);case"RegExp":return FG(Q,Z,$);case"String":return CG(Q,Z,$);case"Symbol":return RG(Q,Z,$);case"TemplateLiteral":return KG(Q,Z,$);case"This":return jG(Q,Z,$);case"Tuple":return bG(Q,Z,$);case"Undefined":return VG(Q,Z,$);case"Union":return EG(Q,Z,$);case"Uint8Array":return IG(Q,Z,$);case"Unknown":return xG(Q,Z,$);case"Void":return kG(Q,Z,$);default:if(!h0.Has(Q[L]))throw new d$(Q);return TG(Q,Z,$)}}function w0(...X){return X.length===3?H1(X[0],X[1],X[2]):H1(X[0],[],X[1])}function gG(X){let Y={};for(let $ of Object.getOwnPropertyNames(X))Y[$]=_0(X[$]);for(let $ of Object.getOwnPropertySymbols(X))Y[$]=_0(X[$]);return Y}function fG(X){return X.map((Y)=>_0(Y))}function yG(X){return X.slice()}function dG(X){return new Date(X.toISOString())}function vG(X){return X}function _0(X){if(i(X))return fG(X);if(p1(X))return dG(X);if(j0(X))return gG(X);if(Y8(X))return yG(X);if(h1(X))return vG(X);throw new Error("ValueClone: Unable to clone value")}class W8 extends l{constructor(X,Y){super(Y);this.schema=X}}function U0(X){return typeof X==="function"?X:_0(X)}function pG(X,Y){if(Z0(X,"default"))return U0(X.default);else return{}}function hG(X,Y){if(X.uniqueItems===!0&&!Z0(X,"default"))throw new W8(X,"Array with the uniqueItems constraint requires a default value");else if("contains"in X&&!Z0(X,"default"))throw new W8(X,"Array with the contains constraint requires a default value");else if("default"in X)return U0(X.default);else if(X.minItems!==void 0)return Array.from({length:X.minItems}).map(($)=>{return s1(X.items,Y)});else return[]}function mG(X,Y){if(Z0(X,"default"))return U0(X.default);else return async function*(){}()}function cG(X,Y){if(Z0(X,"default"))return U0(X.default);else return BigInt(0)}function uG(X,Y){if(Z0(X,"default"))return U0(X.default);else return!1}function iG(X,Y){if(Z0(X,"default"))return U0(X.default);else{let $=s1(X.returns,Y);if(typeof $==="object"&&!Array.isArray($))return class{constructor(){for(let[Z,Q]of Object.entries($)){let W=this;W[Z]=Q}}};else return class{}}}function lG(X,Y){if(Z0(X,"default"))return U0(X.default);else if(X.minimumTimestamp!==void 0)return new Date(X.minimumTimestamp);else return new Date}function oG(X,Y){if(Z0(X,"default"))return U0(X.default);else return()=>s1(X.returns,Y)}function nG(X,Y){if(Z0(X,"default"))return U0(X.default);else if(X.minimum!==void 0)return X.minimum;else return 0}function sG(X,Y){if(Z0(X,"default"))return U0(X.default);else{let $=X.allOf.reduce((Z,Q)=>{let W=s1(Q,Y);return typeof W==="object"?{...Z,...W}:W},{});if(!w0(X,Y,$))throw new W8(X,"Intersect produced invalid value. Consider using a default value.");return $}}function tG(X,Y){if(Z0(X,"default"))return U0(X.default);else return function*(){}()}function rG(X,Y){if(Z0(X,"default"))return U0(X.default);else return X.const}function aG(X,Y){if(Z0(X,"default"))return U0(X.default);else throw new W8(X,"Never types cannot be created. Consider using a default value.")}function eG(X,Y){if(Z0(X,"default"))return U0(X.default);else throw new W8(X,"Not types must have a default value")}function XA(X,Y){if(Z0(X,"default"))return U0(X.default);else return null}function YA(X,Y){if(Z0(X,"default"))return U0(X.default);else if(X.minimum!==void 0)return X.minimum;else return 0}function $A(X,Y){if(Z0(X,"default"))return U0(X.default);else{let $=new Set(X.required),Z={};for(let[Q,W]of Object.entries(X.properties)){if(!$.has(Q))continue;Z[Q]=s1(W,Y)}return Z}}function ZA(X,Y){if(Z0(X,"default"))return U0(X.default);else return Promise.resolve(s1(X.item,Y))}function QA(X,Y){let[$,Z]=Object.entries(X.patternProperties)[0];if(Z0(X,"default"))return U0(X.default);else if(!($===F6||$===M6)){let Q=$.slice(1,$.length-1).split("|"),W={};for(let J of Q)W[J]=s1(Z,Y);return W}else return{}}function WA(X,Y){if(Z0(X,"default"))return U0(X.default);else return s1(B0(X,Y),Y)}function JA(X,Y){if(Z0(X,"default"))return U0(X.default);else throw new W8(X,"RegExp types cannot be created. Consider using a default value.")}function zA(X,Y){if(X.pattern!==void 0)if(!Z0(X,"default"))throw new W8(X,"String types with patterns must specify a default value");else return U0(X.default);else if(X.format!==void 0)if(!Z0(X,"default"))throw new W8(X,"String types with formats must specify a default value");else return U0(X.default);else if(Z0(X,"default"))return U0(X.default);else if(X.minLength!==void 0)return Array.from({length:X.minLength}).map(()=>" ").join("");else return""}function MA(X,Y){if(Z0(X,"default"))return U0(X.default);else if("value"in X)return Symbol.for(X.value);else return Symbol()}function BA(X,Y){if(Z0(X,"default"))return U0(X.default);if(!U7(X))throw new W8(X,"Can only create template literals that produce a finite variants. Consider using a default value.");return L2(X)[0]}function UA(X,Y){if(v$++>OA)throw new W8(X,"Cannot create recursive type as it appears possibly infinite. Consider using a default.");if(Z0(X,"default"))return U0(X.default);else return s1(B0(X,Y),Y)}function GA(X,Y){if(Z0(X,"default"))return U0(X.default);if(X.items===void 0)return[];else return Array.from({length:X.minItems}).map(($,Z)=>s1(X.items[Z],Y))}function AA(X,Y){if(Z0(X,"default"))return U0(X.default);else return}function wA(X,Y){if(Z0(X,"default"))return U0(X.default);else if(X.anyOf.length===0)throw new Error("ValueCreate.Union: Cannot create Union with zero variants");else return s1(X.anyOf[0],Y)}function HA(X,Y){if(Z0(X,"default"))return U0(X.default);else if(X.minByteLength!==void 0)return new Uint8Array(X.minByteLength);else return new Uint8Array(0)}function qA(X,Y){if(Z0(X,"default"))return U0(X.default);else return{}}function NA(X,Y){if(Z0(X,"default"))return U0(X.default);else return}function DA(X,Y){if(Z0(X,"default"))return U0(X.default);else throw new Error("User defined types must specify a default value")}function s1(X,Y){let $=X0(X.$id)?[...Y,X]:Y,Z=X;switch(Z[L]){case"Any":return pG(Z,$);case"Array":return hG(Z,$);case"AsyncIterator":return mG(Z,$);case"BigInt":return cG(Z,$);case"Boolean":return uG(Z,$);case"Constructor":return iG(Z,$);case"Date":return lG(Z,$);case"Function":return oG(Z,$);case"Integer":return nG(Z,$);case"Intersect":return sG(Z,$);case"Iterator":return tG(Z,$);case"Literal":return rG(Z,$);case"Never":return aG(Z,$);case"Not":return eG(Z,$);case"Null":return XA(Z,$);case"Number":return YA(Z,$);case"Object":return $A(Z,$);case"Promise":return ZA(Z,$);case"Record":return QA(Z,$);case"Ref":return WA(Z,$);case"RegExp":return JA(Z,$);case"String":return zA(Z,$);case"Symbol":return MA(Z,$);case"TemplateLiteral":return BA(Z,$);case"This":return UA(Z,$);case"Tuple":return GA(Z,$);case"Undefined":return AA(Z,$);case"Union":return wA(Z,$);case"Uint8Array":return HA(Z,$);case"Unknown":return qA(Z,$);case"Void":return NA(Z,$);default:if(!h0.Has(Z[L]))throw new W8(Z,"Unknown type");return DA(Z,$)}}var OA=512,v$=0;function t1(...X){return v$=0,X.length===2?s1(X[0],X[1]):s1(X[0],[])}class m9 extends l{constructor(X,Y){super(Y);this.schema=X}}function LA(X,Y,$){if(X[L]==="Object"&&typeof $==="object"&&!Z6($)){let Z=X,Q=Object.getOwnPropertyNames($),W=Object.entries(Z.properties),[J,z]=[1/W.length,W.length];return W.reduce((M,[B,U])=>{let A=U[L]==="Literal"&&U.const===$[B]?z:0,w=w0(U,Y,$[B])?J:0,G=Q.includes(B)?J:0;return M+(A+w+G)},0)}else return w0(X,Y,$)?1:0}function PA(X,Y,$){let Z=X.anyOf.map((J)=>B0(J,Y)),[Q,W]=[Z[0],0];for(let J of Z){let z=LA(J,Y,$);if(z>W)Q=J,W=z}return Q}function SA(X,Y,$){if("default"in X)return typeof $==="function"?X.default:_0(X.default);else{let Z=PA(X,Y,$);return N7(Z,Y,$)}}function _A(X,Y,$){return w0(X,Y,$)?_0($):t1(X,Y)}function FA(X,Y,$){return w0(X,Y,$)?$:t1(X,Y)}function CA(X,Y,$){if(w0(X,Y,$))return _0($);let Z=i($)?_0($):t1(X,Y),Q=p(X.minItems)&&Z.length<X.minItems?[...Z,...Array.from({length:X.minItems-Z.length},()=>null)]:Z,J=(p(X.maxItems)&&Q.length>X.maxItems?Q.slice(0,X.maxItems):Q).map((M)=>d8(X.items,Y,M));if(X.uniqueItems!==!0)return J;let z=[...new Set(J)];if(!w0(X,Y,z))throw new m9(X,"Array cast produced invalid data due to uniqueItems constraint");return z}function RA(X,Y,$){if(w0(X,Y,$))return t1(X,Y);let Z=new Set(X.returns.required||[]),Q=function(){};for(let[W,J]of Object.entries(X.returns.properties)){if(!Z.has(W)&&$.prototype[W]===void 0)continue;Q.prototype[W]=d8(J,Y,$.prototype[W])}return Q}function KA(X,Y,$){let Z=t1(X,Y),Q=j0(Z)&&j0($)?{...Z,...$}:$;return w0(X,Y,Q)?Q:t1(X,Y)}function jA(X,Y,$){throw new m9(X,"Never types cannot be cast")}function bA(X,Y,$){if(w0(X,Y,$))return $;if($===null||typeof $!=="object")return t1(X,Y);let Z=new Set(X.required||[]),Q={};for(let[W,J]of Object.entries(X.properties)){if(!Z.has(W)&&$[W]===void 0)continue;Q[W]=d8(J,Y,$[W])}if(typeof X.additionalProperties==="object"){let W=Object.getOwnPropertyNames(X.properties);for(let J of Object.getOwnPropertyNames($)){if(W.includes(J))continue;Q[J]=d8(X.additionalProperties,Y,$[J])}}return Q}function VA(X,Y,$){if(w0(X,Y,$))return _0($);if($===null||typeof $!=="object"||Array.isArray($)||$ instanceof Date)return t1(X,Y);let Z=Object.getOwnPropertyNames(X.patternProperties)[0],Q=X.patternProperties[Z],W={};for(let[J,z]of Object.entries($))W[J]=d8(Q,Y,z);return W}function EA(X,Y,$){return d8(B0(X,Y),Y,$)}function IA(X,Y,$){return d8(B0(X,Y),Y,$)}function xA(X,Y,$){if(w0(X,Y,$))return _0($);if(!i($))return t1(X,Y);if(X.items===void 0)return[];return X.items.map((Z,Q)=>d8(Z,Y,$[Q]))}function kA(X,Y,$){return w0(X,Y,$)?_0($):SA(X,Y,$)}function d8(X,Y,$){let Z=X0(X.$id)?[...Y,X]:Y,Q=X;switch(X[L]){case"Array":return CA(Q,Z,$);case"Constructor":return RA(Q,Z,$);case"Intersect":return KA(Q,Z,$);case"Never":return jA(Q,Z,$);case"Object":return bA(Q,Z,$);case"Record":return VA(Q,Z,$);case"Ref":return EA(Q,Z,$);case"This":return IA(Q,Z,$);case"Tuple":return xA(Q,Z,$);case"Union":return kA(Q,Z,$);case"Date":case"Symbol":case"Uint8Array":return _A(X,Y,$);default:return FA(Q,Z,$)}}function N7(...X){return X.length===3?d8(X[0],X[1],X[2]):d8(X[0],[],X[1])}function TA(X){return r(X)&&X[L]!=="Unsafe"}function gA(X,Y,$){if(!i($))return $;return $.map((Z)=>r1(X.items,Y,Z))}function fA(X,Y,$){let Z=X.unevaluatedProperties,W=X.allOf.map((z)=>r1(z,Y,_0($))).reduce((z,M)=>G1(M)?{...z,...M}:M,{});if(!G1($)||!G1(W)||!r(Z))return W;let J=T1(X);for(let z of Object.getOwnPropertyNames($)){if(J.includes(z))continue;if(w0(Z,Y,$[z]))W[z]=r1(Z,Y,$[z])}return W}function yA(X,Y,$){if(!G1($)||i($))return $;let Z=X.additionalProperties;for(let Q of Object.getOwnPropertyNames($)){if(Q in X.properties){$[Q]=r1(X.properties[Q],Y,$[Q]);continue}if(r(Z)&&w0(Z,Y,$[Q])){$[Q]=r1(Z,Y,$[Q]);continue}delete $[Q]}return $}function dA(X,Y,$){if(!G1($))return $;let Z=X.additionalProperties,Q=Object.getOwnPropertyNames($),[W,J]=Object.entries(X.patternProperties)[0],z=new RegExp(W);for(let M of Q){if(z.test(M)){$[M]=r1(J,Y,$[M]);continue}if(r(Z)&&w0(Z,Y,$[M])){$[M]=r1(Z,Y,$[M]);continue}delete $[M]}return $}function vA(X,Y,$){return r1(B0(X,Y),Y,$)}function pA(X,Y,$){return r1(B0(X,Y),Y,$)}function hA(X,Y,$){if(!i($))return $;if(p0(X.items))return[];let Z=Math.min($.length,X.items.length);for(let Q=0;Q<Z;Q++)$[Q]=r1(X.items[Q],Y,$[Q]);return $.length>Z?$.slice(0,Z):$}function mA(X,Y,$){for(let Z of X.anyOf)if(TA(Z)&&w0(Z,Y,$))return r1(Z,Y,$);return $}function r1(X,Y,$){let Z=X0(X.$id)?[...Y,X]:Y,Q=X;switch(Q[L]){case"Array":return gA(Q,Z,$);case"Intersect":return fA(Q,Z,$);case"Object":return yA(Q,Z,$);case"Record":return dA(Q,Z,$);case"Ref":return vA(Q,Z,$);case"This":return pA(Q,Z,$);case"Tuple":return hA(Q,Z,$);case"Union":return mA(Q,Z,$);default:return $}}function c9(...X){return X.length===3?r1(X[0],X[1],X[2]):r1(X[0],[],X[1])}function D7(X){return X0(X)&&!isNaN(X)&&!isNaN(parseFloat(X))}function cA(X){return A1(X)||x8(X)||p(X)}function W4(X){return X===!0||p(X)&&X===1||A1(X)&&X===BigInt("1")||X0(X)&&(X.toLowerCase()==="true"||X==="1")}function J4(X){return X===!1||p(X)&&(X===0||Object.is(X,-0))||A1(X)&&X===BigInt("0")||X0(X)&&(X.toLowerCase()==="false"||X==="0"||X==="-0")}function uA(X){return X0(X)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(X)}function iA(X){return X0(X)&&/^(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(X)}function lA(X){return X0(X)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)(?:\.\d+)?(?:z|[+-]\d\d(?::?\d\d)?)$/i.test(X)}function oA(X){return X0(X)&&/^\d\d\d\d-[0-1]\d-[0-3]\dt(?:[0-2]\d:[0-5]\d:[0-5]\d|23:59:60)?$/i.test(X)}function nA(X){return X0(X)&&/^\d\d\d\d-[0-1]\d-[0-3]\d$/i.test(X)}function sA(X,Y){let $=h$(X);return $===Y?$:X}function tA(X,Y){let $=m$(X);return $===Y?$:X}function rA(X,Y){let $=p$(X);return $===Y?$:X}function aA(X,Y){return X0(X.const)?sA(Y,X.const):p(X.const)?tA(Y,X.const):x8(X.const)?rA(Y,X.const):_0(Y)}function p$(X){return W4(X)?!0:J4(X)?!1:X}function eA(X){return D7(X)?BigInt(parseInt(X)):p(X)?BigInt(X|0):J4(X)?BigInt(0):W4(X)?BigInt(1):X}function h$(X){return cA(X)?X.toString():E1(X)&&X.description!==void 0?X.description.toString():X}function m$(X){return D7(X)?parseFloat(X):W4(X)?1:J4(X)?0:X}function Xw(X){return D7(X)?parseInt(X):p(X)?X|0:W4(X)?1:J4(X)?0:X}function Yw(X){return X0(X)&&X.toLowerCase()==="null"?null:X}function $w(X){return X0(X)&&X==="undefined"?void 0:X}function Zw(X){return p1(X)?X:p(X)?new Date(X):W4(X)?new Date(1):J4(X)?new Date(0):D7(X)?new Date(parseInt(X)):iA(X)?new Date(`1970-01-01T${X}.000Z`):uA(X)?new Date(`1970-01-01T${X}`):oA(X)?new Date(`${X}.000Z`):lA(X)?new Date(X):nA(X)?new Date(`${X}T00:00:00.000Z`):X}function Qw(X){return X}function Ww(X,Y,$){return(i($)?$:[$]).map((Q)=>v8(X.items,Y,Q))}function Jw(X,Y,$){return eA($)}function zw(X,Y,$){return p$($)}function Mw(X,Y,$){return Zw($)}function Bw(X,Y,$){return Xw($)}function Uw(X,Y,$){return X.allOf.reduce((Z,Q)=>v8(Q,Y,Z),$)}function Gw(X,Y,$){return aA(X,$)}function Aw(X,Y,$){return Yw($)}function ww(X,Y,$){return m$($)}function Hw(X,Y,$){if(!G1($))return $;let Q={};for(let W of Object.keys($))Q[W]=Z0(X.properties,W)?v8(X.properties[W],Y,$[W]):$[W];return Q}function qw(X,Y,$){let Z=Object.getOwnPropertyNames(X.patternProperties)[0],Q=X.patternProperties[Z],W={};for(let[J,z]of Object.entries($))W[J]=v8(Q,Y,z);return W}function Nw(X,Y,$){return v8(B0(X,Y),Y,$)}function Dw(X,Y,$){return h$($)}function Ow(X,Y,$){return X0($)||p($)?Symbol($):$}function Lw(X,Y,$){return v8(B0(X,Y),Y,$)}function Pw(X,Y,$){if(!(i($)&&!p0(X.items)))return $;return $.map((Q,W)=>{return W<X.items.length?v8(X.items[W],Y,Q):Q})}function Sw(X,Y,$){return $w($)}function _w(X,Y,$){for(let Z of X.anyOf){let Q=v8(Z,Y,$);if(!w0(Z,Y,Q))continue;return Q}return $}function v8(X,Y,$){let Z=X0(X.$id)?[...Y,X]:Y,Q=X;switch(X[L]){case"Array":return Ww(Q,Z,$);case"BigInt":return Jw(Q,Z,$);case"Boolean":return zw(Q,Z,$);case"Date":return Mw(Q,Z,$);case"Integer":return Bw(Q,Z,$);case"Intersect":return Uw(Q,Z,$);case"Literal":return Gw(Q,Z,$);case"Null":return Aw(Q,Z,$);case"Number":return ww(Q,Z,$);case"Object":return Hw(Q,Z,$);case"Record":return qw(Q,Z,$);case"Ref":return Nw(Q,Z,$);case"String":return Dw(Q,Z,$);case"Symbol":return Ow(Q,Z,$);case"This":return Lw(Q,Z,$);case"Tuple":return Pw(Q,Z,$);case"Undefined":return Sw(Q,Z,$);case"Union":return _w(Q,Z,$);default:return Qw($)}}function u9(...X){return X.length===3?v8(X[0],X[1],X[2]):v8(X[0],[],X[1])}function K6(X,Y){return Y===void 0&&"default"in X?_0(X.default):Y}function Fw(X){return r(X)&&X[L]!=="Unsafe"}function O7(X){return r(X)&&"default"in X}function Cw(X,Y,$){let Z=K6(X,$);if(!i(Z))return Z;for(let Q=0;Q<Z.length;Q++)Z[Q]=J8(X.items,Y,Z[Q]);return Z}function Rw(X,Y,$){let Z=K6(X,$);return X.allOf.reduce((Q,W)=>{let J=J8(W,Y,Z);return G1(J)?{...Q,...J}:J},{})}function Kw(X,Y,$){let Z=K6(X,$);if(!G1(Z))return Z;let Q=X.additionalProperties,W=Object.getOwnPropertyNames(X.properties);for(let J of W){if(!O7(X.properties[J]))continue;Z[J]=J8(X.properties[J],Y,Z[J])}if(!O7(Q))return Z;for(let J of Object.getOwnPropertyNames(Z)){if(W.includes(J))continue;Z[J]=J8(Q,Y,Z[J])}return Z}function jw(X,Y,$){let Z=K6(X,$);if(!G1(Z))return Z;let Q=X.additionalProperties,[W,J]=Object.entries(X.patternProperties)[0],z=new RegExp(W);for(let M of Object.getOwnPropertyNames(Z)){if(!(z.test(M)&&O7(J)))continue;Z[M]=J8(J,Y,Z[M])}if(!O7(Q))return Z;for(let M of Object.getOwnPropertyNames(Z)){if(z.test(M))continue;Z[M]=J8(Q,Y,Z[M])}return Z}function bw(X,Y,$){return J8(B0(X,Y),Y,K6(X,$))}function Vw(X,Y,$){return J8(B0(X,Y),Y,$)}function Ew(X,Y,$){let Z=K6(X,$);if(!i(Z)||p0(X.items))return Z;let[Q,W]=[X.items,Math.max(X.items.length,Z.length)];for(let J=0;J<W;J++)if(J<Q.length)Z[J]=J8(Q[J],Y,Z[J]);return Z}function Iw(X,Y,$){let Z=K6(X,$);for(let Q of X.anyOf){let W=J8(Q,Y,Z);if(Fw(Q)&&w0(Q,W))return W}return Z}function J8(X,Y,$){let Z=X0(X.$id)?[...Y,X]:Y,Q=X;switch(Q[L]){case"Array":return Cw(Q,Z,$);case"Intersect":return Rw(Q,Z,$);case"Object":return Kw(Q,Z,$);case"Record":return jw(Q,Z,$);case"Ref":return bw(Q,Z,$);case"This":return Vw(Q,Z,$);case"Tuple":return Ew(Q,Z,$);case"Union":return Iw(Q,Z,$);default:return K6(Q,$)}}function i9(...X){return X.length===3?J8(X[0],X[1],X[2]):J8(X[0],[],X[1])}var P8={};h6(P8,{ValuePointerRootSetError:()=>l9,ValuePointerRootDeleteError:()=>o9,Set:()=>xw,Has:()=>Tw,Get:()=>gw,Format:()=>z4,Delete:()=>kw});class l9 extends l{constructor(X,Y,$){super("Cannot set root value");this.value=X,this.path=Y,this.update=$}}class o9 extends l{constructor(X,Y){super("Cannot delete root value");this.value=X,this.path=Y}}function c$(X){return X.indexOf("~")===-1?X:X.replace(/~1/g,"/").replace(/~0/g,"~")}function*z4(X){if(X==="")return;let[Y,$]=[0,0];for(let Z=0;Z<X.length;Z++)if(X.charAt(Z)==="/")if(Z===0)Y=Z+1;else $=Z,yield c$(X.slice(Y,$)),Y=Z+1;else $=Z;yield c$(X.slice(Y))}function xw(X,Y,$){if(Y==="")throw new l9(X,Y,$);let[Z,Q,W]=[null,X,""];for(let J of z4(Y)){if(Q[J]===void 0)Q[J]={};Z=Q,Q=Q[J],W=J}Z[W]=$}function kw(X,Y){if(Y==="")throw new o9(X,Y);let[$,Z,Q]=[null,X,""];for(let W of z4(Y)){if(Z[W]===void 0||Z[W]===null)return;$=Z,Z=Z[W],Q=W}if(Array.isArray($)){let W=parseInt(Q);$.splice(W,1)}else delete $[Q]}function Tw(X,Y){if(Y==="")return!0;let[$,Z,Q]=[null,X,""];for(let W of z4(Y)){if(Z[W]===void 0)return!1;$=Z,Z=Z[W],Q=W}return Object.getOwnPropertyNames($).includes(Q)}function gw(X,Y){if(Y==="")return X;let $=X;for(let Z of z4(Y)){if($[Z]===void 0)return;$=$[Z]}return $}var fw=L0({type:A0("insert"),path:l1(),value:y8()}),yw=L0({type:A0("update"),path:l1(),value:y8()}),dw=L0({type:A0("delete"),path:l1()}),VI=D0([fw,yw,dw]);class n9 extends l{constructor(X,Y){super(Y);this.value=X}}class M4 extends n9{constructor(X){super(X,"Cannot diff objects with symbol keys");this.value=X}}function B4(X,Y){return{type:"update",path:X,value:Y}}function u$(X,Y){return{type:"insert",path:X,value:Y}}function i$(X){return{type:"delete",path:X}}function*vw(X,Y,$){if(!j0($))return yield B4(X,$);let Z=[...globalThis.Object.keys(Y),...globalThis.Object.getOwnPropertySymbols(Y)],Q=[...globalThis.Object.keys($),...globalThis.Object.getOwnPropertySymbols($)];for(let W of Z){if(E1(W))throw new M4(W);if(p0($[W])&&Q.includes(W))yield B4(`${X}/${globalThis.String(W)}`,void 0)}for(let W of Q){if(p0(Y[W])||p0($[W]))continue;if(E1(W))throw new M4(W);yield*L7(`${X}/${globalThis.String(W)}`,Y[W],$[W])}for(let W of Q){if(E1(W))throw new M4(W);if(p0(Y[W]))yield u$(`${X}/${globalThis.String(W)}`,$[W])}for(let W of Z.reverse()){if(E1(W))throw new M4(W);if(p0($[W])&&!Q.includes(W))yield i$(`${X}/${globalThis.String(W)}`)}}function*pw(X,Y,$){if(!i($))return yield B4(X,$);for(let Z=0;Z<Math.min(Y.length,$.length);Z++)yield*L7(`${X}/${Z}`,Y[Z],$[Z]);for(let Z=0;Z<$.length;Z++){if(Z<Y.length)continue;yield u$(`${X}/${Z}`,$[Z])}for(let Z=Y.length-1;Z>=0;Z--){if(Z<$.length)continue;yield i$(`${X}/${Z}`)}}function*hw(X,Y,$){if(!Y8($)||Y.length!==$.length||globalThis.Object.getPrototypeOf(Y).constructor.name!==globalThis.Object.getPrototypeOf($).constructor.name)return yield B4(X,$);for(let Z=0;Z<Math.min(Y.length,$.length);Z++)yield*L7(`${X}/${Z}`,Y[Z],$[Z])}function*mw(X,Y,$){if(Y===$)return;yield B4(X,$)}function*L7(X,Y,$){if(j0(Y))return yield*vw(X,Y,$);if(i(Y))return yield*pw(X,Y,$);if(Y8(Y))return yield*hw(X,Y,$);if(h1(Y))return yield*mw(X,Y,$);throw new n9(Y,"Unable to create diff edits for unknown value")}function l$(X,Y){return[...L7("",X,Y)]}function cw(X){return X.length>0&&X[0].path===""&&X[0].type==="update"}function uw(X){return X.length===0}function o$(X,Y){if(cw(Y))return _0(Y[0].value);if(uw(Y))return _0(X);let $=_0(X);for(let Z of Y)switch(Z.type){case"insert":{P8.Set($,Z.path,Z.value);break}case"update":{P8.Set($,Z.path,Z.value);break}case"delete":{P8.Delete($,Z.path);break}}return $}function iw(X,Y){if(!j0(Y))return!1;let $=[...Object.keys(X),...Object.getOwnPropertySymbols(X)],Z=[...Object.keys(Y),...Object.getOwnPropertySymbols(Y)];if($.length!==Z.length)return!1;return $.every((Q)=>U4(X[Q],Y[Q]))}function lw(X,Y){return p1(Y)&&X.getTime()===Y.getTime()}function ow(X,Y){if(!i(Y)||X.length!==Y.length)return!1;return X.every(($,Z)=>U4($,Y[Z]))}function nw(X,Y){if(!Y8(Y)||X.length!==Y.length||Object.getPrototypeOf(X).constructor.name!==Object.getPrototypeOf(Y).constructor.name)return!1;return X.every(($,Z)=>U4($,Y[Z]))}function sw(X,Y){return X===Y}function U4(X,Y){if(j0(X))return iw(X,Y);if(p1(X))return lw(X,Y);if(Y8(X))return nw(X,Y);if(i(X))return ow(X,Y);if(h1(X))return sw(X,Y);throw new Error("ValueEquals: Unable to compare value")}class s9 extends l{constructor(X){super(X)}}function tw(X,Y,$,Z){if(!j0($))P8.Set(X,Y,_0(Z));else{let Q=Object.getOwnPropertyNames($),W=Object.getOwnPropertyNames(Z);for(let J of Q)if(!W.includes(J))delete $[J];for(let J of W)if(!Q.includes(J))$[J]=null;for(let J of W)t9(X,`${Y}/${J}`,$[J],Z[J])}}function rw(X,Y,$,Z){if(!i($))P8.Set(X,Y,_0(Z));else{for(let Q=0;Q<Z.length;Q++)t9(X,`${Y}/${Q}`,$[Q],Z[Q]);$.splice(Z.length)}}function aw(X,Y,$,Z){if(Y8($)&&$.length===Z.length)for(let Q=0;Q<$.length;Q++)$[Q]=Z[Q];else P8.Set(X,Y,_0(Z))}function ew(X,Y,$,Z){if($===Z)return;P8.Set(X,Y,Z)}function t9(X,Y,$,Z){if(i(Z))return rw(X,Y,$,Z);if(Y8(Z))return aw(X,Y,$,Z);if(j0(Z))return tw(X,Y,$,Z);if(h1(Z))return ew(X,Y,$,Z)}function n$(X){return Y8(X)||h1(X)}function XH(X,Y){return j0(X)&&i(Y)||i(X)&&j0(Y)}function s$(X,Y){if(n$(X)||n$(Y))throw new s9("Only object and array types can be mutated at the root level");if(XH(X,Y))throw new s9("Cannot assign due type mismatch of assignable values");t9(X,"",X,Y)}class G4 extends l{constructor(X,Y,$){super("Unable to decode value as it does not match the expected schema");this.schema=X,this.value=Y,this.error=$}}class P7 extends l{constructor(X,Y,$,Z){super(Z instanceof Error?Z.message:"Unknown error");this.schema=X,this.path=Y,this.value=$,this.error=Z}}function c0(X,Y,$){try{return E0(X)?X[y0].Decode($):$}catch(Z){throw new P7(X,Y,$,Z)}}function YH(X,Y,$,Z){return i(Z)?c0(X,$,Z.map((Q,W)=>p8(X.items,Y,`${$}/${W}`,Q))):c0(X,$,Z)}function $H(X,Y,$,Z){if(!j0(Z)||h1(Z))return c0(X,$,Z);let Q=A7(X),W=Q.map((U)=>U[0]),J={...Z};for(let[U,A]of Q)if(U in J)J[U]=p8(A,Y,`${$}/${U}`,J[U]);if(!E0(X.unevaluatedProperties))return c0(X,$,J);let z=Object.getOwnPropertyNames(J),M=X.unevaluatedProperties,B={...J};for(let U of z)if(!W.includes(U))B[U]=c0(M,`${$}/${U}`,B[U]);return c0(X,$,B)}function ZH(X,Y,$,Z){return c0(X,$,p8(X.not,Y,$,Z))}function QH(X,Y,$,Z){if(!j0(Z))return c0(X,$,Z);let Q=T1(X),W={...Z};for(let B of Q)if(B in W)W[B]=p8(X.properties[B],Y,`${$}/${B}`,W[B]);if(!r(X.additionalProperties))return c0(X,$,W);let J=Object.getOwnPropertyNames(W),z=X.additionalProperties,M={...W};for(let B of J)if(!Q.includes(B))M[B]=c0(z,`${$}/${B}`,M[B]);return c0(X,$,M)}function WH(X,Y,$,Z){if(!j0(Z))return c0(X,$,Z);let Q=Object.getOwnPropertyNames(X.patternProperties)[0],W=new RegExp(Q),J={...Z};for(let U of Object.getOwnPropertyNames(Z))if(W.test(U))J[U]=p8(X.patternProperties[Q],Y,`${$}/${U}`,J[U]);if(!r(X.additionalProperties))return c0(X,$,J);let z=Object.getOwnPropertyNames(J),M=X.additionalProperties,B={...J};for(let U of z)if(!W.test(U))B[U]=c0(M,`${$}/${U}`,B[U]);return c0(X,$,B)}function JH(X,Y,$,Z){let Q=B0(X,Y);return c0(X,$,p8(Q,Y,$,Z))}function zH(X,Y,$,Z){let Q=B0(X,Y);return c0(X,$,p8(Q,Y,$,Z))}function MH(X,Y,$,Z){return i(Z)&&i(X.items)?c0(X,$,X.items.map((Q,W)=>p8(Q,Y,`${$}/${W}`,Z[W]))):c0(X,$,Z)}function BH(X,Y,$,Z){for(let Q of X.anyOf){if(!w0(Q,Y,Z))continue;let W=p8(Q,Y,$,Z);return c0(X,$,W)}return c0(X,$,Z)}function p8(X,Y,$,Z){let Q=typeof X.$id==="string"?[...Y,X]:Y,W=X;switch(X[L]){case"Array":return YH(W,Q,$,Z);case"Intersect":return $H(W,Q,$,Z);case"Not":return ZH(W,Q,$,Z);case"Object":return QH(W,Q,$,Z);case"Record":return WH(W,Q,$,Z);case"Ref":return JH(W,Q,$,Z);case"Symbol":return c0(W,$,Z);case"This":return zH(W,Q,$,Z);case"Tuple":return MH(W,Q,$,Z);case"Union":return BH(W,Q,$,Z);default:return c0(W,$,Z)}}function S7(X,Y,$){return p8(X,Y,"",$)}class A4 extends l{constructor(X,Y,$){super("The encoded value does not match the expected schema");this.schema=X,this.value=Y,this.error=$}}class t$ extends l{constructor(X,Y,$,Z){super(`${Z instanceof Error?Z.message:"Unknown error"}`);this.schema=X,this.path=Y,this.value=$,this.error=Z}}function M1(X,Y,$){try{return E0(X)?X[y0].Encode($):$}catch(Z){throw new t$(X,Y,$,Z)}}function UH(X,Y,$,Z){let Q=M1(X,$,Z);return i(Q)?Q.map((W,J)=>h8(X.items,Y,`${$}/${J}`,W)):Q}function GH(X,Y,$,Z){let Q=M1(X,$,Z);if(!j0(Z)||h1(Z))return Q;let W=A7(X),J=W.map((A)=>A[0]),z={...Q};for(let[A,w]of W)if(A in z)z[A]=h8(w,Y,`${$}/${A}`,z[A]);if(!E0(X.unevaluatedProperties))return M1(X,$,z);let M=Object.getOwnPropertyNames(z),B=X.unevaluatedProperties,U={...z};for(let A of M)if(!J.includes(A))U[A]=M1(B,`${$}/${A}`,U[A]);return U}function AH(X,Y,$,Z){return M1(X.not,$,M1(X,$,Z))}function wH(X,Y,$,Z){let Q=M1(X,$,Z);if(!j0(Q))return Q;let W=T1(X),J={...Q};for(let U of W)if(U in J)J[U]=h8(X.properties[U],Y,`${$}/${U}`,J[U]);if(!r(X.additionalProperties))return J;let z=Object.getOwnPropertyNames(J),M=X.additionalProperties,B={...J};for(let U of z)if(!W.includes(U))B[U]=M1(M,`${$}/${U}`,B[U]);return B}function HH(X,Y,$,Z){let Q=M1(X,$,Z);if(!j0(Z))return Q;let W=Object.getOwnPropertyNames(X.patternProperties)[0],J=new RegExp(W),z={...Q};for(let A of Object.getOwnPropertyNames(Z))if(J.test(A))z[A]=h8(X.patternProperties[W],Y,`${$}/${A}`,z[A]);if(!r(X.additionalProperties))return M1(X,$,z);let M=Object.getOwnPropertyNames(z),B=X.additionalProperties,U={...z};for(let A of M)if(!J.test(A))U[A]=M1(B,`${$}/${A}`,U[A]);return U}function qH(X,Y,$,Z){let Q=B0(X,Y),W=h8(Q,Y,$,Z);return M1(X,$,W)}function NH(X,Y,$,Z){let Q=B0(X,Y),W=h8(Q,Y,$,Z);return M1(X,$,W)}function DH(X,Y,$,Z){let Q=M1(X,$,Z);return i(X.items)?X.items.map((W,J)=>h8(W,Y,`${$}/${J}`,Q[J])):[]}function OH(X,Y,$,Z){for(let Q of X.anyOf){if(!w0(Q,Y,Z))continue;let W=h8(Q,Y,$,Z);return M1(X,$,W)}for(let Q of X.anyOf){let W=h8(Q,Y,$,Z);if(!w0(X,Y,W))continue;return M1(X,$,W)}return M1(X,$,Z)}function h8(X,Y,$,Z){let Q=typeof X.$id==="string"?[...Y,X]:Y,W=X;switch(X[L]){case"Array":return UH(W,Q,$,Z);case"Intersect":return GH(W,Q,$,Z);case"Not":return AH(W,Q,$,Z);case"Object":return wH(W,Q,$,Z);case"Record":return HH(W,Q,$,Z);case"Ref":return qH(W,Q,$,Z);case"This":return NH(W,Q,$,Z);case"Tuple":return DH(W,Q,$,Z);case"Union":return OH(W,Q,$,Z);default:return M1(W,$,Z)}}function _7(X,Y,$){return h8(X,Y,"",$)}function LH(X,Y){return E0(X)||B1(X.items,Y)}function PH(X,Y){return E0(X)||B1(X.items,Y)}function SH(X,Y){return E0(X)||B1(X.returns,Y)||X.parameters.some(($)=>B1($,Y))}function _H(X,Y){return E0(X)||B1(X.returns,Y)||X.parameters.some(($)=>B1($,Y))}function FH(X,Y){return E0(X)||E0(X.unevaluatedProperties)||X.allOf.some(($)=>B1($,Y))}function CH(X,Y){return E0(X)||B1(X.items,Y)}function RH(X,Y){return E0(X)||B1(X.not,Y)}function KH(X,Y){return E0(X)||Object.values(X.properties).some(($)=>B1($,Y))||r(X.additionalProperties)&&B1(X.additionalProperties,Y)}function jH(X,Y){return E0(X)||B1(X.item,Y)}function bH(X,Y){let $=Object.getOwnPropertyNames(X.patternProperties)[0],Z=X.patternProperties[$];return E0(X)||B1(Z,Y)||r(X.additionalProperties)&&E0(X.additionalProperties)}function VH(X,Y){if(E0(X))return!0;return B1(B0(X,Y),Y)}function EH(X,Y){if(E0(X))return!0;return B1(B0(X,Y),Y)}function IH(X,Y){return E0(X)||!p0(X.items)&&X.items.some(($)=>B1($,Y))}function xH(X,Y){return E0(X)||X.anyOf.some(($)=>B1($,Y))}function B1(X,Y){let $=X0(X.$id)?[...Y,X]:Y,Z=X;if(X.$id&&r9.has(X.$id))return!1;if(X.$id)r9.add(X.$id);switch(X[L]){case"Array":return LH(Z,$);case"AsyncIterator":return PH(Z,$);case"Constructor":return SH(Z,$);case"Function":return _H(Z,$);case"Intersect":return FH(Z,$);case"Iterator":return CH(Z,$);case"Not":return RH(Z,$);case"Object":return KH(Z,$);case"Promise":return jH(Z,$);case"Record":return bH(Z,$);case"Ref":return VH(Z,$);case"This":return EH(Z,$);case"Tuple":return IH(Z,$);case"Union":return xH(Z,$);default:return E0(X)}}var r9=new Set;function w4(X,Y){return r9.clear(),B1(X,Y)}var Y0={};h6(Y0,{Patch:()=>uH,Mutate:()=>iH,Hash:()=>cH,Errors:()=>e9,Equal:()=>hH,Encode:()=>pH,Diff:()=>mH,Default:()=>vH,Decode:()=>dH,Create:()=>TH,Convert:()=>fH,Clone:()=>yH,Clean:()=>gH,Check:()=>a9,Cast:()=>kH});function kH(...X){return N7.apply(N7,X)}function TH(...X){return t1.apply(t1,X)}function a9(...X){return w0.apply(w0,X)}function gH(...X){return c9.apply(c9,X)}function fH(...X){return u9.apply(u9,X)}function yH(X){return _0(X)}function dH(...X){let[Y,$,Z]=X.length===3?[X[0],X[1],X[2]]:[X[0],[],X[1]];if(!a9(Y,$,Z))throw new G4(Y,Z,e9(Y,$,Z).First());return w4(Y,$)?S7(Y,$,Z):Z}function vH(...X){return i9.apply(i9,X)}function pH(...X){let[Y,$,Z]=X.length===3?[X[0],X[1],X[2]]:[X[0],[],X[1]],Q=w4(Y,$)?_7(Y,$,Z):Z;if(!a9(Y,$,Q))throw new A4(Y,Q,e9(Y,$,Q).First());return Q}function e9(...X){return $4.apply($4,X)}function hH(X,Y){return U4(X,Y)}function mH(X,Y){return l$(X,Y)}function cH(X){return C6(X)}function uH(X,Y){return o$(X,Y)}function iH(X,Y){s$(X,Y)}function r$(X){return X.map((Y)=>X5(Y))}function lH(X){return K1(r$(X))}function oH(X){return D0(r$(X))}function nH(X){return X5(X)}function X5(X){return t0(X)?lH(X.allOf):G0(X)?oH(X.anyOf):i6(X)?nH(X.item):X}function Y5(X,Y={}){return V(X5(X),Y)}function sH(X){let Y=[];for(let $ of X)Y.push(...T1($));return RY(Y)}function tH(X){return X.filter((Y)=>!q2(Y))}function rH(X,Y){let $=[];for(let Z of X)$.push(...r2(Z,[Y]));return tH($)}function aH(X,Y){let $={};for(let Z of Y)$[Z]=B7(rH(X,Z));return $}function $5(X,Y={}){let $=sH(X),Z=aH(X,$);return L0(Z,Y)}function H4(X={}){return{...X,[L]:"Date",type:"Date"}}function q4(X={}){return{...X,[L]:"Null",type:"null"}}function N4(X){return{...X,[L]:"Symbol",type:"symbol"}}function D4(X={}){return{...X,[L]:"Undefined",type:"undefined"}}function O4(X={}){return{...X,[L]:"Uint8Array",type:"Uint8Array"}}function eH(X){return X.map((Y)=>Z5(Y,!1))}function Xq(X){let Y={};for(let $ of globalThis.Object.getOwnPropertyNames(X))Y[$]=o1(Z5(X[$],!1));return Y}function F7(X,Y){return Y===!0?X:o1(X)}function Z5(X,Y){return N9(X)?F7(A6(),Y):O9(X)?F7(A6(),Y):I1(X)?o1(L8(eH(X))):m6(X)?O4():f2(X)?H4():b0(X)?F7(L0(Xq(X)),Y):D9(X)?F7(Q6([],y8()),Y):m0(X)?D4():L9(X)?q4():S9(X)?N4():g2(X)?o6():N8(X)?A0(X):_6(X)?A0(X):V0(X)?A0(X):L0({})}function Q5(X,Y={}){return V(Z5(X,!0),Y)}function W5(X,Y={}){return L8(n0(X.parameters),{...Y})}function L4(X,Y){return X.map(($)=>z8($,Y))}function Yq(X,Y){let $={};for(let Z of globalThis.Object.getOwnPropertyNames(X))$[Z]=z8(X[Z],Y);return $}function $q(X,Y){return X.parameters=L4(X.parameters,Y),X.returns=z8(X.returns,Y),X}function Zq(X,Y){return X.parameters=L4(X.parameters,Y),X.returns=z8(X.returns,Y),X}function Qq(X,Y){return X.allOf=L4(X.allOf,Y),X}function Wq(X,Y){return X.anyOf=L4(X.anyOf,Y),X}function Jq(X,Y){if(m0(X.items))return X;return X.items=L4(X.items,Y),X}function zq(X,Y){return X.items=z8(X.items,Y),X}function Mq(X,Y){return X.properties=Yq(X.properties,Y),X}function Bq(X,Y){return X.item=z8(X.item,Y),X}function Uq(X,Y){return X.items=z8(X.items,Y),X}function Gq(X,Y){return X.items=z8(X.items,Y),X}function Aq(X,Y){let $=Y.find((Q)=>Q.$id===X.$ref);if($===void 0)throw Error(`Unable to dereference schema with \$id ${X.$ref}`);let Z=s0($,["$id"]);return z8(Z,Y)}function wq(X,Y){return h2(X)?$q(X,Y):m2(X)?Zq(X,Y):t0(X)?Qq(X,Y):G0(X)?Wq(X,Y):D8(X)?Jq(X,Y):W6(X)?zq(X,Y):$1(X)?Mq(X,Y):i6(X)?Bq(X,Y):p2(X)?Uq(X,Y):c2(X)?Gq(X,Y):R9(X)?Aq(X,Y):X}function z8(X,Y){return wq(V(X),n0(Y))}function J5(X,Y={}){if(m0(X))throw new Error("Enum undefined or empty");let $=globalThis.Object.getOwnPropertyNames(X).filter((W)=>isNaN(W)).map((W)=>X[W]),Q=[...new Set($)].map((W)=>A0(W));return D0(Q,{...Y,[m1]:"Enum"})}function a$(X,Y){return r6(n6(X),Y)}function Hq(X,Y){let $=X.filter((Z)=>R6(Z,Y)===F.False);return $.length===1?$[0]:D0($)}function r6(X,Y,$={}){if(u1(X))return V(a$(X,Y),$);if(T0(X))return V(e$(X,Y),$);return V(G0(X)?Hq(X.anyOf,Y):R6(X,Y)!==F.False?N0():X,$)}function qq(X,Y){let $={};for(let Z of globalThis.Object.getOwnPropertyNames(X))$[Z]=r6(X[Z],Y);return $}function Nq(X,Y){return qq(X.properties,Y)}function e$(X,Y){let $=Nq(X,Y);return z0($)}function XZ(X,Y){return a6(n6(X),Y)}function Dq(X,Y){let $=X.filter((Z)=>R6(Z,Y)!==F.False);return $.length===1?$[0]:D0($)}function a6(X,Y,$={}){if(u1(X))return V(XZ(X,Y),$);if(T0(X))return V(YZ(X,Y),$);return V(G0(X)?Dq(X.anyOf,Y):R6(X,Y)!==F.False?X:N0(),$)}function Oq(X,Y){let $={};for(let Z of globalThis.Object.getOwnPropertyNames(X))$[Z]=a6(X[Z],Y);return $}function Lq(X,Y){return Oq(X.properties,Y)}function YZ(X,Y){let $=Lq(X,Y);return z0($)}function z5(X,Y={}){return V(X.returns,Y)}function M5(X={}){return{...X,[L]:"Integer",type:"integer"}}function Pq(X,Y,$){return{[X]:S8(A0(X),Y,$)}}function Sq(X,Y,$){return X.reduce((Z,Q)=>{return{...Z,...Pq(Q,Y,$)}},{})}function _q(X,Y,$){return Sq(X.keys,Y,$)}function $Z(X,Y,$){let Z=_q(X,Y,$);return z0(Z)}function Fq(X){let[Y,$]=[X.slice(0,1),X.slice(1)];return[Y.toLowerCase(),$].join("")}function Cq(X){let[Y,$]=[X.slice(0,1),X.slice(1)];return[Y.toUpperCase(),$].join("")}function Rq(X){return X.toUpperCase()}function Kq(X){return X.toLowerCase()}function jq(X,Y,$){let Z=O2(X.pattern);if(!l6(Z))return{...X,pattern:ZZ(X.pattern,Y)};let J=[...n2(Z)].map((B)=>A0(B)),z=QZ(J,Y),M=D0(z);return t2([M],$)}function ZZ(X,Y){return typeof X==="string"?Y==="Uncapitalize"?Fq(X):Y==="Capitalize"?Cq(X):Y==="Uppercase"?Rq(X):Y==="Lowercase"?Kq(X):X:X.toString()}function QZ(X,Y){return X.map(($)=>S8($,Y))}function S8(X,Y,$={}){return c1(X)?$Z(X,Y,$):u1(X)?jq(X,Y,X):G0(X)?D0(QZ(X.anyOf,Y),$):J6(X)?A0(ZZ(X.const,Y),$):X}function B5(X,Y={}){return S8(X,"Capitalize",Y)}function U5(X,Y={}){return S8(X,"Lowercase",Y)}function G5(X,Y={}){return S8(X,"Uncapitalize",Y)}function A5(X,Y={}){return S8(X,"Uppercase",Y)}function w5(X,Y){return{...Y,[L]:"Not",not:V(X)}}function bq(X,Y,$){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames(X))Z[Q]=e6(X[Q],Y,$);return Z}function Vq(X,Y,$){return bq(X.properties,Y,$)}function WZ(X,Y,$){let Z=Vq(X,Y,$);return z0(Z)}function Eq(X,Y){return X.map(($)=>H5($,Y))}function Iq(X,Y){return X.map(($)=>H5($,Y))}function xq(X,Y){let{[Y]:$,...Z}=X;return Z}function kq(X,Y){return Y.reduce(($,Z)=>xq($,Z),X)}function H5(X,Y){return t0(X)?K1(Eq(X.allOf,Y)):G0(X)?D0(Iq(X.anyOf,Y)):$1(X)?L0(kq(X.properties,Y)):L0({})}function e6(X,Y,$={}){if(c1(Y))return JZ(X,Y,$);if(T0(X))return WZ(X,Y,$);let Z=i1(Y)?k1(Y):Y,Q=s0(X,[y0,"$id","required"]),W=V(H5(X,Z),$);return{...Q,...W}}function Tq(X,Y,$){return{[Y]:e6(X,[Y],$)}}function gq(X,Y,$){return Y.reduce((Z,Q)=>{return{...Z,...Tq(X,Q,$)}},{})}function fq(X,Y,$){return gq(X,Y.keys,$)}function JZ(X,Y,$){let Z=fq(X,Y,$);return z0(Z)}function q5(X,Y={}){return L8(n0(X.parameters),{...Y})}function zZ(X){return X.map((Y)=>MZ(Y))}function yq(X){let Y={};for(let $ of globalThis.Object.getOwnPropertyNames(X))Y[$]=R1(X[$]);return Y}function MZ(X){return t0(X)?K1(zZ(X.allOf)):G0(X)?D0(zZ(X.anyOf)):$1(X)?L0(yq(X.properties)):L0({})}function P4(X,Y={}){if(T0(X))return BZ(X,Y);let $=s0(X,[y0,"$id","required"]),Z=V(MZ(X),Y);return{...$,...Z}}function dq(X,Y){let $={};for(let Z of globalThis.Object.getOwnPropertyNames(X))$[Z]=P4(X[Z],Y);return $}function vq(X,Y){return dq(X.properties,Y)}function BZ(X,Y){let $=vq(X,Y);return z0($)}function pq(X,Y,$){let Z={};for(let Q of globalThis.Object.getOwnPropertyNames(X))Z[Q]=X2(X[Q],Y,$);return Z}function hq(X,Y,$){return pq(X.properties,Y,$)}function UZ(X,Y,$){let Z=hq(X,Y,$);return z0(Z)}function mq(X,Y){return X.map(($)=>N5($,Y))}function cq(X,Y){return X.map(($)=>N5($,Y))}function uq(X,Y){let $={};for(let Z of Y)if(Z in X)$[Z]=X[Z];return $}function N5(X,Y){return t0(X)?K1(mq(X.allOf,Y)):G0(X)?D0(cq(X.anyOf,Y)):$1(X)?L0(uq(X.properties,Y)):L0({})}function X2(X,Y,$={}){if(c1(Y))return GZ(X,Y,$);if(T0(X))return UZ(X,Y,$);let Z=i1(Y)?k1(Y):Y,Q=s0(X,[y0,"$id","required"]),W=V(N5(X,Z),$);return{...Q,...W}}function iq(X,Y,$){return{[Y]:X2(X,[Y],$)}}function lq(X,Y,$){return Y.reduce((Z,Q)=>{return{...Z,...iq(X,Q,$)}},{})}function oq(X,Y,$){return lq(X,Y.keys,$)}function GZ(X,Y,$){let Z=oq(X,Y,$);return z0(Z)}function D5(X){return o1(R1(X))}function S4(X,Y,$){return{...$,[L]:"Record",type:"object",patternProperties:{[X]:V(Y)}}}function O5(X,Y,$){let Z={};for(let Q of X)Z[Q]=V(Y);return L0(Z,{...$,[m1]:"Record"})}function nq(X,Y,$){return U7(X)?O5(k1(X),Y,$):S4(X.pattern,Y,$)}function sq(X,Y,$){return O5(k1(D0(X)),Y,$)}function tq(X,Y,$){return O5([X.toString()],Y,$)}function rq(X,Y,$){return S4(X.source,Y,$)}function aq(X,Y,$){let Z=m0(X.pattern)?F6:X.pattern;return S4(Z,Y,$)}function eq(X,Y,$){return S4(M6,Y,$)}function XN(X,Y,$){return S4(M6,Y,$)}function L5(X,Y,$={}){return G0(X)?sq(X.anyOf,Y,$):u1(X)?nq(X,Y,$):J6(X)?tq(X.const,Y,$):c6(X)?eq(X,Y,$):u6(X)?XN(X,Y,$):K9(X)?rq(X,Y,$):u2(X)?aq(X,Y,$):N0($)}var YN=0;function P5(X,Y={}){if(m0(Y.$id))Y.$id=`T${YN++}`;let $=X({[L]:"This",$ref:`${Y.$id}`});return $.$id=Y.$id,V({...Y,[m1]:"Recursive",...$})}function S5(X,Y={}){if(V0(X))return{...Y,[L]:"Ref",$ref:X};if(m0(X.$id))throw new Error("Reference target type must specify an $id");return{...Y,[L]:"Ref",$ref:X.$id}}function _5(X,Y={}){let $=V0(X)?new globalThis.RegExp(X):X;return{...Y,[L]:"RegExp",type:"RegExp",source:$.source,flags:$.flags}}function AZ(X){return X.map((Y)=>wZ(Y))}function $N(X){let Y={};for(let $ of globalThis.Object.getOwnPropertyNames(X))Y[$]=s0(X[$],[D1]);return Y}function wZ(X){return t0(X)?K1(AZ(X.allOf)):G0(X)?D0(AZ(X.anyOf)):$1(X)?L0($N(X.properties)):L0({})}function _4(X,Y={}){if(T0(X))return HZ(X,Y);else{let $=s0(X,[y0,"$id","required"]),Z=V(wZ(X),Y);return{...$,...Z}}}function ZN(X,Y){let $={};for(let Z of globalThis.Object.getOwnPropertyNames(X))$[Z]=_4(X[Z],Y);return $}function QN(X,Y){return ZN(X.properties,Y)}function HZ(X,Y){let $=QN(X,Y);return z0($)}function WN(X){return t0(X)?n0(X.allOf):G0(X)?n0(X.anyOf):D8(X)?n0(X.items??[]):[]}function F5(X){return n0(WN(X))}function C5(X,Y={}){return V(X.returns,Y)}function R5(X){return JSON.parse(JSON.stringify(X))}class qZ{constructor(X){this.schema=X}Decode(X){return new NZ(this.schema,X)}}class NZ{constructor(X,Y){this.schema=X,this.decode=Y}EncodeTransform(X,Y){let Q={Encode:(W)=>Y[y0].Encode(X(W)),Decode:(W)=>this.decode(Y[y0].Decode(W))};return{...Y,[y0]:Q}}EncodeSchema(X,Y){let $={Decode:this.decode,Encode:X};return{...Y,[y0]:$}}Encode(X){let Y=V(this.schema);return N2(Y)?this.EncodeTransform(X,Y):this.EncodeSchema(X,Y)}}function K5(X){return new qZ(X)}function j5(X={}){return{...X,[L]:"Void",type:"void"}}var b5={};h6(b5,{Void:()=>j5,Uppercase:()=>A5,Unsafe:()=>T2,Unknown:()=>y8,Union:()=>D0,Undefined:()=>D4,Uncapitalize:()=>G5,Uint8Array:()=>O4,Tuple:()=>L8,Transform:()=>K5,TemplateLiteral:()=>t2,Symbol:()=>N4,String:()=>l1,Strict:()=>R5,ReturnType:()=>C5,Rest:()=>F5,Required:()=>_4,RegExp:()=>_5,Ref:()=>S5,Recursive:()=>P5,Record:()=>L5,ReadonlyOptional:()=>D5,Readonly:()=>o1,Promise:()=>e2,Pick:()=>X2,Partial:()=>P4,Parameters:()=>q5,Optional:()=>R1,Omit:()=>e6,Object:()=>L0,Number:()=>O8,Null:()=>q4,Not:()=>w5,Never:()=>N0,Mapped:()=>I9,Lowercase:()=>U5,Literal:()=>A0,KeyOf:()=>Y4,Iterator:()=>a2,Intersect:()=>K1,Integer:()=>M5,InstanceType:()=>z5,Index:()=>s6,Function:()=>Q6,Extract:()=>a6,Extends:()=>t6,Exclude:()=>r6,Enum:()=>J5,Deref:()=>z8,Date:()=>H4,ConstructorParameters:()=>W5,Constructor:()=>v2,Const:()=>Q5,Composite:()=>$5,Capitalize:()=>B5,Boolean:()=>s2,BigInt:()=>o6,Awaited:()=>Y5,AsyncIterator:()=>d2,Array:()=>y2,Any:()=>A6});var F2=b5;class x5{constructor(X,Y,$,Z){this.schema=X,this.references=Y,this.checkFunc=$,this.code=Z,this.hasTransform=w4(X,Y)}Code(){return this.code}Errors(X){return $4(this.schema,this.references,X)}Check(X){return this.checkFunc(X)}Decode(X){if(!this.checkFunc(X))throw new G4(this.schema,X,this.Errors(X).First());return this.hasTransform?S7(this.schema,this.references,X):X}Encode(X){let Y=this.hasTransform?_7(this.schema,this.references,X):X;if(!this.checkFunc(Y))throw new A4(this.schema,X,this.Errors(X).First());return Y}}var w6;(function(X){function Y(W){return W===36}X.DollarSign=Y;function $(W){return W===95}X.IsUnderscore=$;function Z(W){return W>=65&&W<=90||W>=97&&W<=122}X.IsAlpha=Z;function Q(W){return W>=48&&W<=57}X.IsNumeric=Q})(w6||(w6={}));var C7;(function(X){function Y(W){if(W.length===0)return!1;return w6.IsNumeric(W.charCodeAt(0))}function $(W){if(Y(W))return!1;for(let J=0;J<W.length;J++){let z=W.charCodeAt(J);if(!(w6.IsAlpha(z)||w6.IsNumeric(z)||w6.DollarSign(z)||w6.IsUnderscore(z)))return!1}return!0}function Z(W){return W.replace(/'/g,"\\'")}function Q(W,J){return $(J)?`${W}.${J}`:`${W}['${Z(J)}']`}X.Encode=Q})(C7||(C7={}));var V5;(function(X){function Y($){let Z=[];for(let Q=0;Q<$.length;Q++){let W=$.charCodeAt(Q);if(w6.IsNumeric(W)||w6.IsAlpha(W))Z.push($.charAt(Q));else Z.push(`_${W}_`)}return Z.join("").replace(/__/g,"_")}X.Encode=Y})(V5||(V5={}));var E5;(function(X){function Y($){return $.replace(/'/g,"\\'")}X.Escape=Y})(E5||(E5={}));class DZ extends l{constructor(X){super("Unknown type");this.schema=X}}class I5 extends l{constructor(X){super("Preflight validation check failed to guard for the given schema");this.schema=X}}var Y2;(function(X){function Y(J,z,M){return o0.ExactOptionalPropertyTypes?`('${z}' in ${J} ? ${M} : true)`:`(${C7.Encode(J,z)} !== undefined ? ${M} : true)`}X.IsExactOptionalProperty=Y;function $(J){return!o0.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}))`:`(typeof ${J} === 'object' && ${J} !== null)`}X.IsObjectLike=$;function Z(J){return!o0.AllowArrayObject?`(typeof ${J} === 'object' && ${J} !== null && !Array.isArray(${J}) && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`:`(typeof ${J} === 'object' && ${J} !== null && !(${J} instanceof Date) && !(${J} instanceof Uint8Array))`}X.IsRecordLike=Z;function Q(J){return o0.AllowNaN?`typeof ${J} === 'number'`:`Number.isFinite(${J})`}X.IsNumberLike=Q;function W(J){return o0.AllowNullVoid?`(${J} === undefined || ${J} === null)`:`${J} === undefined`}X.IsVoidLike=W})(Y2||(Y2={}));var H6;(function(X){function Y(N){return N[L]==="Any"||N[L]==="Unknown"}function*$(N,x,O){yield"true"}function*Z(N,x,O){yield`Array.isArray(${O})`;let[s,g]=[U1("value","any"),U1("acc","number")];if(p(N.maxItems))yield`${O}.length <= ${N.maxItems}`;if(p(N.minItems))yield`${O}.length >= ${N.minItems}`;let y=K(N.items,x,"value");if(yield`${O}.every((${s}) => ${y})`,r(N.contains)||p(N.minContains)||p(N.maxContains)){let k0=r(N.contains)?N.contains:N0(),V1=K(k0,x,"value"),$6=p(N.minContains)?[`(count >= ${N.minContains})`]:[],q8=p(N.maxContains)?[`(count <= ${N.maxContains})`]:[],I8=`const count = value.reduce((${g}, ${s}) => ${V1} ? acc + 1 : acc, 0)`,$7=["(count > 0)",...$6,...q8].join(" && ");yield`((${s}) => { ${I8}; return ${$7}})(${O})`}if(N.uniqueItems===!0)yield`((${s}) => { const set = new Set(); for(const element of value) { const hashed = hash(element); if(set.has(hashed)) { return false } else { set.add(hashed) } } return true } )(${O})`}function*Q(N,x,O){yield`(typeof value === 'object' && Symbol.asyncIterator in ${O})`}function*W(N,x,O){if(yield`(typeof ${O} === 'bigint')`,A1(N.exclusiveMaximum))yield`${O} < BigInt(${N.exclusiveMaximum})`;if(A1(N.exclusiveMinimum))yield`${O} > BigInt(${N.exclusiveMinimum})`;if(A1(N.maximum))yield`${O} <= BigInt(${N.maximum})`;if(A1(N.minimum))yield`${O} >= BigInt(${N.minimum})`;if(A1(N.multipleOf))yield`(${O} % BigInt(${N.multipleOf})) === 0`}function*J(N,x,O){yield`(typeof ${O} === 'boolean')`}function*z(N,x,O){yield*Y6(N.returns,x,`${O}.prototype`)}function*M(N,x,O){if(yield`(${O} instanceof Date) && Number.isFinite(${O}.getTime())`,p(N.exclusiveMaximumTimestamp))yield`${O}.getTime() < ${N.exclusiveMaximumTimestamp}`;if(p(N.exclusiveMinimumTimestamp))yield`${O}.getTime() > ${N.exclusiveMinimumTimestamp}`;if(p(N.maximumTimestamp))yield`${O}.getTime() <= ${N.maximumTimestamp}`;if(p(N.minimumTimestamp))yield`${O}.getTime() >= ${N.minimumTimestamp}`;if(p(N.multipleOfTimestamp))yield`(${O}.getTime() % ${N.multipleOfTimestamp}) === 0`}function*B(N,x,O){yield`(typeof ${O} === 'function')`}function*U(N,x,O){if(yield`Number.isInteger(${O})`,p(N.exclusiveMaximum))yield`${O} < ${N.exclusiveMaximum}`;if(p(N.exclusiveMinimum))yield`${O} > ${N.exclusiveMinimum}`;if(p(N.maximum))yield`${O} <= ${N.maximum}`;if(p(N.minimum))yield`${O} >= ${N.minimum}`;if(p(N.multipleOf))yield`(${O} % ${N.multipleOf}) === 0`}function*A(N,x,O){let s=N.allOf.map((g)=>K(g,x,O)).join(" && ");if(N.unevaluatedProperties===!1){let g=v(`${new RegExp(B6(N))};`),y=`Object.getOwnPropertyNames(${O}).every(key => ${g}.test(key))`;yield`(${s} && ${y})`}else if(r(N.unevaluatedProperties)){let g=v(`${new RegExp(B6(N))};`),y=`Object.getOwnPropertyNames(${O}).every(key => ${g}.test(key) || ${K(N.unevaluatedProperties,x,`${O}[key]`)})`;yield`(${s} && ${y})`}else yield`(${s})`}function*w(N,x,O){yield`(typeof value === 'object' && Symbol.iterator in ${O})`}function*G(N,x,O){if(typeof N.const==="number"||typeof N.const==="boolean")yield`(${O} === ${N.const})`;else yield`(${O} === '${E5.Escape(N.const)}')`}function*H(N,x,O){yield"false"}function*q(N,x,O){yield`(!${K(N.not,x,O)})`}function*_(N,x,O){yield`(${O} === null)`}function*R(N,x,O){if(yield Y2.IsNumberLike(O),p(N.exclusiveMaximum))yield`${O} < ${N.exclusiveMaximum}`;if(p(N.exclusiveMinimum))yield`${O} > ${N.exclusiveMinimum}`;if(p(N.maximum))yield`${O} <= ${N.maximum}`;if(p(N.minimum))yield`${O} >= ${N.minimum}`;if(p(N.multipleOf))yield`(${O} % ${N.multipleOf}) === 0`}function*S(N,x,O){if(yield Y2.IsObjectLike(O),p(N.minProperties))yield`Object.getOwnPropertyNames(${O}).length >= ${N.minProperties}`;if(p(N.maxProperties))yield`Object.getOwnPropertyNames(${O}).length <= ${N.maxProperties}`;let s=Object.getOwnPropertyNames(N.properties);for(let g of s){let y=C7.Encode(O,g),k0=N.properties[g];if(N.required&&N.required.includes(g)){if(yield*Y6(k0,x,y),U6(k0)||Y(k0))yield`('${g}' in ${O})`}else{let V1=K(k0,x,y);yield Y2.IsExactOptionalProperty(O,g,V1)}}if(N.additionalProperties===!1)if(N.required&&N.required.length===s.length)yield`Object.getOwnPropertyNames(${O}).length === ${s.length}`;else{let g=`[${s.map((y)=>`'${y}'`).join(", ")}]`;yield`Object.getOwnPropertyNames(${O}).every(key => ${g}.includes(key))`}if(typeof N.additionalProperties==="object"){let g=K(N.additionalProperties,x,`${O}[key]`),y=`[${s.map((k0)=>`'${k0}'`).join(", ")}]`;yield`(Object.getOwnPropertyNames(${O}).every(key => ${y}.includes(key) || ${g}))`}}function*C(N,x,O){yield`(typeof value === 'object' && typeof ${O}.then === 'function')`}function*d(N,x,O){if(yield Y2.IsRecordLike(O),p(N.minProperties))yield`Object.getOwnPropertyNames(${O}).length >= ${N.minProperties}`;if(p(N.maxProperties))yield`Object.getOwnPropertyNames(${O}).length <= ${N.maxProperties}`;let[s,g]=Object.entries(N.patternProperties)[0],y=v(`${new RegExp(s)}`),k0=K(g,x,"value"),V1=r(N.additionalProperties)?K(N.additionalProperties,x,O):N.additionalProperties===!1?"false":"true",$6=`(${y}.test(key) ? ${k0} : ${V1})`;yield`(Object.entries(${O}).every(([key, value]) => ${$6}))`}function*h(N,x,O){let s=B0(N,x);if(b.functions.has(N.$ref))return yield`${I(N.$ref)}(${O})`;yield*Y6(s,x,O)}function*k(N,x,O){let s=v(`${new RegExp(N.source,N.flags)};`);if(yield`(typeof ${O} === 'string')`,p(N.maxLength))yield`${O}.length <= ${N.maxLength}`;if(p(N.minLength))yield`${O}.length >= ${N.minLength}`;yield`${s}.test(${O})`}function*x0(N,x,O){if(yield`(typeof ${O} === 'string')`,p(N.maxLength))yield`${O}.length <= ${N.maxLength}`;if(p(N.minLength))yield`${O}.length >= ${N.minLength}`;if(N.pattern!==void 0)yield`${v(`${new RegExp(N.pattern)};`)}.test(${O})`;if(N.format!==void 0)yield`format('${N.format}', ${O})`}function*T(N,x,O){yield`(typeof ${O} === 'symbol')`}function*e(N,x,O){yield`(typeof ${O} === 'string')`,yield`${v(`${new RegExp(N.pattern)};`)}.test(${O})`}function*n(N,x,O){yield`${I(N.$ref)}(${O})`}function*H0(N,x,O){if(yield`Array.isArray(${O})`,N.items===void 0)return yield`${O}.length === 0`;yield`(${O}.length === ${N.maxItems})`;for(let s=0;s<N.items.length;s++)yield`${K(N.items[s],x,`${O}[${s}]`)}`}function*e0(N,x,O){yield`${O} === undefined`}function*X8(N,x,O){yield`(${N.anyOf.map((g)=>K(g,x,O)).join(" || ")})`}function*p6(N,x,O){if(yield`${O} instanceof Uint8Array`,p(N.maxByteLength))yield`(${O}.length <= ${N.maxByteLength})`;if(p(N.minByteLength))yield`(${O}.length >= ${N.minByteLength})`}function*v0(N,x,O){yield"true"}function*t(N,x,O){yield Y2.IsVoidLike(O)}function*A9(N,x,O){let s=b.instances.size;b.instances.set(s,N),yield`kind('${N[L]}', ${s}, ${O})`}function*Y6(N,x,O,s=!0){let g=X0(N.$id)?[...x,N]:x,y=N;if(s&&X0(N.$id)){let k0=I(N.$id);if(b.functions.has(k0))return yield`${k0}(${O})`;else{let V1=u(k0,N,x,"value",!1);return b.functions.set(k0,V1),yield`${k0}(${O})`}}switch(y[L]){case"Any":return yield*$(y,g,O);case"Array":return yield*Z(y,g,O);case"AsyncIterator":return yield*Q(y,g,O);case"BigInt":return yield*W(y,g,O);case"Boolean":return yield*J(y,g,O);case"Constructor":return yield*z(y,g,O);case"Date":return yield*M(y,g,O);case"Function":return yield*B(y,g,O);case"Integer":return yield*U(y,g,O);case"Intersect":return yield*A(y,g,O);case"Iterator":return yield*w(y,g,O);case"Literal":return yield*G(y,g,O);case"Never":return yield*H(y,g,O);case"Not":return yield*q(y,g,O);case"Null":return yield*_(y,g,O);case"Number":return yield*R(y,g,O);case"Object":return yield*S(y,g,O);case"Promise":return yield*C(y,g,O);case"Record":return yield*d(y,g,O);case"Ref":return yield*h(y,g,O);case"RegExp":return yield*k(y,g,O);case"String":return yield*x0(y,g,O);case"Symbol":return yield*T(y,g,O);case"TemplateLiteral":return yield*e(y,g,O);case"This":return yield*n(y,g,O);case"Tuple":return yield*H0(y,g,O);case"Undefined":return yield*e0(y,g,O);case"Union":return yield*X8(y,g,O);case"Uint8Array":return yield*p6(y,g,O);case"Unknown":return yield*v0(y,g,O);case"Void":return yield*t(y,g,O);default:if(!h0.Has(y[L]))throw new DZ(N);return yield*A9(y,g,O)}}let b={language:"javascript",functions:new Map,variables:new Map,instances:new Map};function K(N,x,O,s=!0){return`(${[...Y6(N,x,O,s)].join(" && ")})`}function I(N){return`check_${V5.Encode(N)}`}function v(N){let x=`local_${b.variables.size}`;return b.variables.set(x,`const ${x} = ${N}`),x}function u(N,x,O,s,g=!0){let[y,k0]=["\n",(I8)=>"".padStart(I8," ")],V1=U1("value","any"),$6=$0("boolean"),q8=[...Y6(x,O,s,g)].map((I8)=>`${k0(4)}${I8}`).join(` &&${y}`);return`function ${N}(${V1})${$6} {${y}${k0(2)}return (${y}${q8}${y}${k0(2)})\n}`}function U1(N,x){let O=b.language==="typescript"?`: ${x}`:"";return`${N}${O}`}function $0(N){return b.language==="typescript"?`: ${N}`:""}function N1(N,x,O){let s=u("check",N,x,"value"),g=U1("value","any"),y=$0("boolean"),k0=[...b.functions.values()],V1=[...b.variables.values()],$6=X0(N.$id)?`return function check(${g})${y} {\n  return ${I(N.$id)}(value)\n}`:`return ${s}`;return[...V1,...k0,$6].join("\n")}function l0(...N){let x={language:"javascript"},[O,s,g]=N.length===2&&i(N[1])?[N[0],N[1],x]:N.length===2&&!i(N[1])?[N[0],[],N[1]]:N.length===3?[N[0],N[1],N[2]]:N.length===1?[N[0],[],x]:[null,[],x];if(b.language=g.language,b.variables.clear(),b.functions.clear(),b.instances.clear(),!r(O))throw new I5(O);for(let y of s)if(!r(y))throw new I5(y);return N1(O,s,g)}X.Code=l0;function S6(N,x=[]){let O=l0(N,x,{language:"javascript"}),s=globalThis.Function("kind","format","hash",O),g=new Map(b.instances);function y(q8,I8,$7){if(!h0.Has(q8)||!g.has(I8))return!1;let Uz=h0.Get(q8),Gz=g.get(I8);return Uz(Gz,$7)}function k0(q8,I8){if(!C0.Has(q8))return!1;return C0.Get(q8)(I8)}function V1(q8){return C6(q8)}let $6=s(y,k0,V1);return new x5(N,x,$6,O)}X.Compile=S6})(H6||(H6={}));var zN=Object.create,{getPrototypeOf:MN,defineProperty:OZ,getOwnPropertyNames:BN}=Object,UN=Object.prototype.hasOwnProperty,E4=(X,Y,$)=>{$=X!=null?zN(MN(X)):{};let Z=Y||!X||!X.__esModule?OZ($,"default",{value:X,enumerable:!0}):$;for(let Q of BN(X))if(!UN.call(Z,Q))OZ(Z,Q,{get:()=>X[Q],enumerable:!0});return Z},hZ=(X,Y)=>()=>(Y||X((Y={exports:{}}).exports,Y),Y.exports),mZ=hZ((X)=>{Object.defineProperty(X,"__esModule",{value:!0}),X.parse=z,X.serialize=U;var Y=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,$=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,Z=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Q=/^[\u0020-\u003A\u003D-\u007E]*$/,W=Object.prototype.toString,J=(()=>{let G=function(){};return G.prototype=Object.create(null),G})();function z(G,H){let q=new J,_=G.length;if(_<2)return q;let R=H?.decode||A,S=0;do{let C=G.indexOf("=",S);if(C===-1)break;let d=G.indexOf(";",S),h=d===-1?_:d;if(C>h){S=G.lastIndexOf(";",C-1)+1;continue}let k=M(G,S,C),x0=B(G,C,k),T=G.slice(k,x0);if(q[T]===void 0){let e=M(G,C+1,h),n=B(G,h,e),H0=R(G.slice(e,n));q[T]=H0}S=h+1}while(S<_);return q}function M(G,H,q){do{let _=G.charCodeAt(H);if(_!==32&&_!==9)return H}while(++H<q);return q}function B(G,H,q){while(H>q){let _=G.charCodeAt(--H);if(_!==32&&_!==9)return H+1}return q}function U(G,H,q){let _=q?.encode||encodeURIComponent;if(!Y.test(G))throw new TypeError(`argument name is invalid: ${G}`);let R=_(H);if(!$.test(R))throw new TypeError(`argument val is invalid: ${H}`);let S=G+"="+R;if(!q)return S;if(q.maxAge!==void 0){if(!Number.isInteger(q.maxAge))throw new TypeError(`option maxAge is invalid: ${q.maxAge}`);S+="; Max-Age="+q.maxAge}if(q.domain){if(!Z.test(q.domain))throw new TypeError(`option domain is invalid: ${q.domain}`);S+="; Domain="+q.domain}if(q.path){if(!Q.test(q.path))throw new TypeError(`option path is invalid: ${q.path}`);S+="; Path="+q.path}if(q.expires){if(!w(q.expires)||!Number.isFinite(q.expires.valueOf()))throw new TypeError(`option expires is invalid: ${q.expires}`);S+="; Expires="+q.expires.toUTCString()}if(q.httpOnly)S+="; HttpOnly";if(q.secure)S+="; Secure";if(q.partitioned)S+="; Partitioned";if(q.priority)switch(typeof q.priority==="string"?q.priority.toLowerCase():q.sameSite){case"low":S+="; Priority=Low";break;case"medium":S+="; Priority=Medium";break;case"high":S+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${q.priority}`)}if(q.sameSite)switch(typeof q.sameSite==="string"?q.sameSite.toLowerCase():q.sameSite){case!0:case"strict":S+="; SameSite=Strict";break;case"lax":S+="; SameSite=Lax";break;case"none":S+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${q.sameSite}`)}return S}function A(G){if(G.indexOf("%")===-1)return G;try{return decodeURIComponent(G)}catch(H){return G}}function w(G){return W.call(G)==="[object Date]"}}),u5=hZ((X,Y)=>{var $=12,Z=0,Q=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,7,7,7,7,7,7,7,7,7,7,7,7,8,7,7,10,9,9,9,11,4,4,4,4,4,4,4,4,4,4,4,0,0,0,0,0,0,0,0,0,0,0,0,12,0,0,0,0,24,36,48,60,72,84,96,0,12,12,12,0,0,0,0,0,0,0,0,0,0,0,24,0,0,0,0,0,0,0,0,0,24,24,24,0,0,0,0,0,0,0,0,0,24,24,0,0,0,0,0,0,0,0,0,0,48,48,48,0,0,0,0,0,0,0,0,0,0,48,48,0,0,0,0,0,0,0,0,0,48,0,0,0,0,0,0,0,0,0,0,127,63,63,63,0,31,15,15,15,7,7,7];function W(M){var B=M.indexOf("%");if(B===-1)return M;var U=M.length,A="",w=0,G=0,H=B,q=$;while(B>-1&&B<U){var _=z(M[B+1],4),R=z(M[B+2],0),S=_|R,C=Q[S];if(q=Q[256+q+C],G=G<<6|S&Q[364+C],q===$)A+=M.slice(w,H),A+=G<=65535?String.fromCharCode(G):String.fromCharCode(55232+(G>>10),56320+(G&1023)),G=0,w=B+3,B=H=M.indexOf("%",w);else if(q===Z)return null;else{if(B+=3,B<U&&M.charCodeAt(B)===37)continue;return null}}return A+M.slice(w)}var J={"0":0,"1":1,"2":2,"3":3,"4":4,"5":5,"6":6,"7":7,"8":8,"9":9,a:10,A:10,b:11,B:11,c:12,C:12,d:13,D:13,e:14,E:14,f:15,F:15};function z(M,B){var U=J[M];return U===void 0?255:U<<B}Y.exports=W}),C2=(X,Y)=>{let $=Y?.length?{}:null;if($)for(let Z of Y)$[Z.part.charCodeAt(0)]=Z;return{part:X,store:null,inert:$,params:null,wildcardStore:null}},LZ=(X,Y)=>({...X,part:Y}),PZ=(X)=>({name:X,store:null,inert:null});class J2{root={};history=[];static regex={static:/:.+?(?=\/|$)/,params:/:.+?(?=\/|$)/g,optionalParams:/:.+?\?(?=\/|$)/g};add(X,Y,$,{ignoreError:Z=!1,ignoreHistory:Q=!1}={}){if(typeof Y!=="string")throw new TypeError("Route path must be a string");if(Y==="")Y="/";else if(Y[0]!=="/")Y=`/${Y}`;let W=Y[Y.length-1]==="*",J=Y.match(J2.regex.optionalParams);if(J){let A=Y.replaceAll("?","");this.add(X,A,$,{ignoreError:Z});for(let w=0;w<J.length;w++){let G=Y.replace("/"+J[w],"");this.add(X,G,$,{ignoreError:!0})}return $}if(J)Y=Y.replaceAll("?","");if(this.history.find(([A,w,G])=>A===X&&w===Y))return $;if(W||J&&Y.charCodeAt(Y.length-1)===63)Y=Y.slice(0,-1);if(!Q)this.history.push([X,Y,$]);let z=Y.split(J2.regex.static),M=Y.match(J2.regex.params)||[];if(z[z.length-1]==="")z.pop();let B;if(!this.root[X])B=this.root[X]=C2("/");else B=this.root[X];let U=0;for(let A=0;A<z.length;++A){let w=z[A];if(A>0){let G=M[U++].slice(1);if(B.params===null)B.params=PZ(G);else if(B.params.name!==G)if(Z)return $;else throw new Error(`Cannot create route "${Y}" with parameter "${G}" because a route already exists with a different parameter name ("${B.params.name}") in the same location`);let H=B.params;if(H.inert===null){B=H.inert=C2(w);continue}B=H.inert}for(let G=0;;){if(G===w.length){if(G<B.part.length){let H=LZ(B,B.part.slice(G));Object.assign(B,C2(w,[H]))}break}if(G===B.part.length){if(B.inert===null)B.inert={};let H=B.inert[w.charCodeAt(G)];if(H){B=H,w=w.slice(G),G=0;continue}let q=C2(w.slice(G));B.inert[w.charCodeAt(G)]=q,B=q;break}if(w[G]!==B.part[G]){let H=LZ(B,B.part.slice(G)),q=C2(w.slice(G));Object.assign(B,C2(B.part.slice(0,G),[H,q])),B=q;break}++G}}if(U<M.length){let A=M[U].slice(1);if(B.params===null)B.params=PZ(A);else if(B.params.name!==A)if(Z)return $;else throw new Error(`Cannot create route "${Y}" with parameter "${A}" because a route already exists with a different parameter name ("${B.params.name}") in the same location`);if(B.params.store===null)B.params.store=$;return B.params.store}if(W){if(B.wildcardStore===null)B.wildcardStore=$;return B.wildcardStore}if(B.store===null)B.store=$;return B.store}find(X,Y){let $=this.root[X];if(!$)return null;return d5(Y,Y.length,$,0)}}var d5=(X,Y,$,Z)=>{let Q=$.part,W=Q.length,J=Z+W;if(W>1){if(J>Y)return null;if(W<15){for(let z=1,M=Z+1;z<W;++z,++M)if(Q.charCodeAt(z)!==X.charCodeAt(M))return null}else if(X.slice(Z,J)!==Q)return null}if(J===Y){if($.store!==null)return{store:$.store,params:{}};if($.wildcardStore!==null)return{store:$.wildcardStore,params:{"*":""}};return null}if($.inert!==null){let z=$.inert[X.charCodeAt(J)];if(z!==void 0){let M=d5(X,Y,z,J);if(M!==null)return M}}if($.params!==null){let{store:z,name:M,inert:B}=$.params,U=X.indexOf("/",J);if(U!==J){if(U===-1||U>=Y){if(z!==null){let A={};return A[M]=X.substring(J,Y),{store:z,params:A}}}else if(B!==null){let A=d5(X,Y,B,U);if(A!==null)return A.params[M]=X.substring(J,U),A}}}if($.wildcardStore!==null)return{store:$.wildcardStore,params:{"*":X.substring(J,Y)}};return null},K4=(X)=>{let Y=typeof X==="object"?X.fn.toString():typeof X==="string"?X.toString():X,$=Y.indexOf(")");if(Y.charCodeAt($+2)===61&&Y.charCodeAt($+5)!==123)return!0;return Y.includes("return")},GN=(X)=>{if(X.startsWith("async"))X=X.slice(5);X=X.trimStart();let Y=-1;if(X.charCodeAt(0)===40){if(Y=X.indexOf("=>",X.indexOf(")")),Y!==-1){let Q=Y;while(Q>0)if(X.charCodeAt(--Q)===41)break;let W=X.slice(Y+2);if(W.charCodeAt(0)===32)W=W.trimStart();return[X.slice(1,Q),W,{isArrowReturn:W.charCodeAt(0)!==123}]}}if(X.startsWith("function")){Y=X.indexOf("(");let Q=X.indexOf(")");return[X.slice(Y+1,Q),X.slice(Q+2),{isArrowReturn:!1}]}let $=X.indexOf("(");if($!==-1){let Q=X.indexOf("\n",2),W=X.slice(0,Q),J=W.lastIndexOf(")")+1,z=X.slice(Q+1);return[W.slice($,J),"{"+z,{isArrowReturn:!1}]}let Z=X.split("\n",2);return[Z[0],Z[1],{isArrowReturn:!1}]},AN=(X)=>{let Y=X.indexOf("{");if(Y===-1)return[-1,0];let $=Y+1,Z=1;for(;$<X.length;$++){let Q=X.charCodeAt($);if(Q===123)Z++;else if(Q===125)Z--;if(Z===0)break}if(Z!==0)return[0,X.length];return[Y,$+1]},wN=(X)=>{let Y=X.lastIndexOf("}");if(Y===-1)return[-1,0];let $=Y-1,Z=1;for(;$>=0;$--){let Q=X.charCodeAt($);if(Q===125)Z++;else if(Q===123)Z--;if(Z===0)break}if(Z!==0)return[-1,0];return[$,Y+1]},cZ=(X)=>{while(!0){let Y=X.indexOf(":");if(Y===-1)break;let $=X.indexOf(",",Y);if($===-1)$=X.indexOf("}",Y)-1;if($===-2)$=X.length;X=X.slice(0,Y)+X.slice($)}return X},uZ=(X)=>{let Y=!1;if(X.charCodeAt(0)===40)X=X.slice(1,-1);if(X.charCodeAt(0)===123)Y=!0,X=X.slice(1,-1);X=X.replace(/( |\t|\n)/g,"").trim();let $=[];while(!0){let[Q,W]=AN(X);if(Q===-1)break;if($.push(X.slice(0,Q-1)),X.charCodeAt(W)===44)W++;X=X.slice(W)}if(X=cZ(X),X)$=$.concat(X.split(","));let Z=[];for(let Q of $){if(Q.indexOf(",")===-1){Z.push(Q);continue}for(let W of Q.split(","))Z.push(W.trim())}return $=Z,{hasParenthesis:Y,parameters:$}},HN=(X,Y)=>{let{parameters:$,hasParenthesis:Z}=uZ(X);if(!Y.query&&$.includes("query"))Y.query=!0;if(!Y.headers&&$.includes("headers"))Y.headers=!0;if(!Y.body&&$.includes("body"))Y.body=!0;if(!Y.cookie&&$.includes("cookie"))Y.cookie=!0;if(!Y.set&&$.includes("set"))Y.set=!0;if(!Y.server&&$.includes("server"))Y.server=!0;if(Z)return`{ ${$.join(", ")} }`;return $.join(", ")},qN=(X,Y,$)=>{let Z=Y.indexOf(X+"\n",$),Q=Y.indexOf(X+"\t",$),W=Y.indexOf(X+",",$),J=Y.indexOf(X+";",$),z=Y.indexOf(X+" ",$);return[Z,Q,W,J,z].filter((M)=>M>0).sort((M,B)=>M-B)[0]||-1},iZ=(X,Y,$=0)=>{if($>5)return[];let Z=[],Q=Y;while(!0){let W=qN(" = "+X,Q);if(W===-1){let M=Q.indexOf(" = "+X);if(M+3+X.length!==Q.length)break;W=M}let J=Q.slice(0,W),z=J.slice(J.lastIndexOf(" ")+1);if(z==="}"){let[M,B]=wN(J);Z.push(cZ(Q.slice(M,B))),Q=Q.slice(W+3+X.length);continue}while(z.charCodeAt(0)===44)z=z.slice(1);while(z.charCodeAt(0)===9)z=z.slice(1);if(!z.includes("("))Z.push(z);Q=Q.slice(W+3+X.length)}for(let W of Z){if(W.charCodeAt(0)===123)continue;let J=iZ(W,Y);if(J.length>0)Z.push(...J)}return Z},NN=(X)=>{if(!X)return;if(X.charCodeAt(0)!==123)return X;if(X=X.slice(2,-2),!X.includes(",")){if(X.includes("..."))return X.slice(X.indexOf("...")+3);return}let Y=X.indexOf("...");if(Y===-1)return;return X.slice(Y+3).trimEnd()},DN=(X,Y,$)=>{let Z=(Q,W)=>X.includes(W+"."+Q)||X.includes(W+'["'+Q+'"]')||X.includes(W+"['"+Q+"']");for(let Q of Y){if(!Q)continue;if(Q.charCodeAt(0)===123){let W=uZ(Q).parameters;if(!$.query&&W.includes("query"))$.query=!0;if(!$.headers&&W.includes("headers"))$.headers=!0;if(!$.body&&W.includes("body"))$.body=!0;if(!$.cookie&&W.includes("cookie"))$.cookie=!0;if(!$.set&&W.includes("set"))$.set=!0;if(!$.query&&W.includes("server"))$.server=!0;continue}if(!$.query&&Z("query",Q))$.query=!0;if(X.includes("return "+Q)||X.includes("return "+Q+".query"))$.query=!0;if(!$.headers&&Z("headers",Q))$.headers=!0;if(!$.body&&Z("body",Q))$.body=!0;if(!$.cookie&&Z("cookie",Q))$.cookie=!0;if(!$.set&&Z("set",Q))$.set=!0;if(!$.server&&Z("server",Q))$.server=!0;if($.query&&$.headers&&$.body&&$.cookie&&$.set&&$.server)break}return Y},ON=(X,Y,$)=>{try{let Z=new RegExp(`(?:\\w)\\((?:.*)?${X}`,"gs");Z.test(Y);let Q=Y.charCodeAt(Z.lastIndex);if(Q===41||Q===44)return $.query=!0,$.headers=!0,$.body=!0,$.cookie=!0,$.set=!0,$.server=!0,!0;return!1}catch(Z){return console.log("[Sucrose] warning: unexpected isContextPassToFunction error, you may continue development as usual but please report the following to maintainers:"),console.log("--- body ---"),console.log(Y),console.log("--- context ---"),console.log(X),!0}},lZ=(X,Y={query:!1,headers:!1,body:!1,cookie:!1,set:!1,server:!1})=>{let $=[];if(X.handler&&typeof X.handler==="function")$.push(X.handler);if(X.request?.length)$.push(...X.request);if(X.beforeHandle?.length)$.push(...X.beforeHandle);if(X.parse?.length)$.push(...X.parse);if(X.error?.length)$.push(...X.error);if(X.transform?.length)$.push(...X.transform);if(X.afterHandle?.length)$.push(...X.afterHandle);if(X.mapResponse?.length)$.push(...X.mapResponse);if(X.afterResponse?.length)$.push(...X.afterResponse);for(let Z of $){if(!Z)continue;let Q="fn"in Z?Z.fn:Z,[W,J,{isArrowReturn:z}]=GN(Q.toString()),M=HN(W,Y),B=NN(M);if(B){let U=iZ(B,J);if(U.splice(0,-1,B),!ON(B,J,Y))DN(J,U,Y);if(!Y.query&&J.includes("return "+B+".query"))Y.query=!0}if(Y.query&&Y.headers&&Y.body&&Y.cookie&&Y.set&&Y.server)break}return Y},i5={date:oZ,time:v5(!0),"date-time":SZ(!0),"iso-time":v5(!1),"iso-date-time":SZ(!1),duration:/^P(?!$)((\d+Y)?(\d+M)?(\d+D)?(T(?=\d)(\d+H)?(\d+M)?(\d+S)?)?|(\d+W)?)$/,uri:KN,"uri-reference":/^(?:[a-z][a-z0-9+\-.]*:)?(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'"()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'"()*+,;=:@]|%[0-9a-f]{2})*)*)?(?:\?(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'"()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i,"uri-template":/^(?:(?:[^\x00-\x20"'<>%\\^`{|}]|%[0-9a-f]{2})|\{[+#./;?&=,!@|]?(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?(?:,(?:[a-z0-9_]|%[0-9a-f]{2})+(?::[1-9][0-9]{0,3}|\*)?)*\})*$/i,url:/^(?:https?|ftp):\/\/(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)(?:\.(?:[a-z0-9\u{00a1}-\u{ffff}]+-)*[a-z0-9\u{00a1}-\u{ffff}]+)*(?:\.(?:[a-z\u{00a1}-\u{ffff}]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/iu,email:/^[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?$/i,hostname:/^(?=.{1,253}\.?$)[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?(?:\.[a-z0-9](?:[-0-9a-z]{0,61}[0-9a-z])?)*\.?$/i,ipv4:/^(?:(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)\.){3}(?:25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)$/,ipv6:/^((([0-9a-f]{1,4}:){7}([0-9a-f]{1,4}|:))|(([0-9a-f]{1,4}:){6}(:[0-9a-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){5}(((:[0-9a-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9a-f]{1,4}:){4}(((:[0-9a-f]{1,4}){1,3})|((:[0-9a-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){3}(((:[0-9a-f]{1,4}){1,4})|((:[0-9a-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){2}(((:[0-9a-f]{1,4}){1,5})|((:[0-9a-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9a-f]{1,4}:){1}(((:[0-9a-f]{1,4}){1,6})|((:[0-9a-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9a-f]{1,4}){1,7})|((:[0-9a-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))$/i,regex:kN,uuid:/^(?:urn:uuid:)?[0-9a-f]{8}-(?:[0-9a-f]{4}-){3}[0-9a-f]{12}$/i,"json-pointer":/^(?:\/(?:[^~/]|~0|~1)*)*$/,"json-pointer-uri-fragment":/^#(?:\/(?:[a-z0-9_\-.!$&'()*+,;:=@]|%[0-9a-f]{2}|~0|~1)*)*$/i,"relative-json-pointer":/^(?:0|[1-9][0-9]*)(?:#|(?:\/(?:[^~/]|~0|~1)*)*)$/,byte:jN,int32:{type:"number",validate:EN},int64:{type:"number",validate:IN},float:{type:"number",validate:FZ},double:{type:"number",validate:FZ},password:!0,binary:!0};function LN(X){return X%4===0&&(X%100!==0||X%400===0)}var PN=/^(\d\d\d\d)-(\d\d)-(\d\d)$/,SN=[0,31,28,31,30,31,30,31,31,30,31,30,31];function oZ(X){let Y=PN.exec(X);if(!Y)return!1;let $=+Y[1],Z=+Y[2],Q=+Y[3];return Z>=1&&Z<=12&&Q>=1&&Q<=(Z===2&&LN($)?29:SN[Z])}var _N=/^(\d\d):(\d\d):(\d\d(?:\.\d+)?)(z|([+-])(\d\d)(?::?(\d\d))?)?$/i;function v5(X){return function Y($){let Z=_N.exec($);if(!Z)return!1;let Q=+Z[1],W=+Z[2],J=+Z[3],z=Z[4],M=Z[5]==="-"?-1:1,B=+(Z[6]||0),U=+(Z[7]||0);if(B>23||U>59||X&&!z)return!1;if(Q<=23&&W<=59&&J<60)return!0;let A=W-U*M,w=Q-B*M-(A<0?1:0);return(w===23||w===-1)&&(A===59||A===-1)&&J<61}}var FN=/t|\s/i;function SZ(X){let Y=v5(X);return function $(Z){let Q=Z.split(FN);return Q.length===2&&oZ(Q[0])&&Y(Q[1])}}var CN=/\/|:/,RN=/^(?:[a-z][a-z0-9+\-.]*:)(?:\/?\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:]|%[0-9a-f]{2})*@)?(?:\[(?:(?:(?:(?:[0-9a-f]{1,4}:){6}|::(?:[0-9a-f]{1,4}:){5}|(?:[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){4}|(?:(?:[0-9a-f]{1,4}:){0,1}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){3}|(?:(?:[0-9a-f]{1,4}:){0,2}[0-9a-f]{1,4})?::(?:[0-9a-f]{1,4}:){2}|(?:(?:[0-9a-f]{1,4}:){0,3}[0-9a-f]{1,4})?::[0-9a-f]{1,4}:|(?:(?:[0-9a-f]{1,4}:){0,4}[0-9a-f]{1,4})?::)(?:[0-9a-f]{1,4}:[0-9a-f]{1,4}|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?))|(?:(?:[0-9a-f]{1,4}:){0,5}[0-9a-f]{1,4})?::[0-9a-f]{1,4}|(?:(?:[0-9a-f]{1,4}:){0,6}[0-9a-f]{1,4})?::)|[Vv][0-9a-f]+\.[a-z0-9\-._~!$&'()*+,;=:]+)\]|(?:(?:25[0-5]|2[0-4]\d|[01]?\d\d?)\.){3}(?:25[0-5]|2[0-4]\d|[01]?\d\d?)|(?:[a-z0-9\-._~!$&'()*+,;=]|%[0-9a-f]{2})*)(?::\d*)?(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*|\/(?:(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)?|(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})+(?:\/(?:[a-z0-9\-._~!$&'()*+,;=:@]|%[0-9a-f]{2})*)*)(?:\?(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?(?:#(?:[a-z0-9\-._~!$&'()*+,;=:@/?]|%[0-9a-f]{2})*)?$/i;function KN(X){return CN.test(X)&&RN.test(X)}var _Z=/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/gm;function jN(X){return _Z.lastIndex=0,_Z.test(X)}var bN=-2147483648,VN=2147483647;function EN(X){return Number.isInteger(X)&&X<=VN&&X>=bN}function IN(X){return Number.isInteger(X)}function FZ(){return!0}var xN=/[^\\]\\Z/;function kN(X){if(xN.test(X))return!1;try{return new RegExp(X),!0}catch(Y){return!1}}var nZ=/(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))/,sZ=/(?:Sun|Mon|Tue|Wed|Thu|Fri|Sat)\s(?:Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s\d{2}\s\d{4}\s\d{2}:\d{2}:\d{2}\sGMT(?:\+|-)\d{4}\s\([^)]+\)/,tZ=/^(?:(?:(?:(?:0?[1-9]|[12][0-9]|3[01])[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:19|20)\d{2})|(?:(?:19|20)\d{2}[/\s-](?:0?[1-9]|1[0-2])[/\s-](?:0?[1-9]|[12][0-9]|3[01]))))(?:\s(?:1[012]|0?[1-9]):[0-5][0-9](?::[0-5][0-9])?(?:\s[AP]M)?)?$/,TN=i5.date,gN=i5["date-time"];if(!C0.Has("date"))T8.Format("date",(X)=>{let Y=X.replace(/"/g,"");if(nZ.test(Y)||sZ.test(Y)||tZ.test(Y)||TN(Y)){let $=new Date(Y);if(!Number.isNaN($.getTime()))return!0}return!1});if(!C0.Has("date-time"))T8.Format("date-time",(X)=>{let Y=X.replace(/"/g,"");if(nZ.test(Y)||sZ.test(Y)||tZ.test(Y)||gN(Y)){let $=new Date(Y);if(!Number.isNaN($.getTime()))return!0}return!1});Object.entries(i5).forEach((X)=>{let[Y,$]=X;if(!C0.Has(Y)){if($ instanceof RegExp)T8.Format(Y,(Z)=>$.test(Z));else if(typeof $==="function")T8.Format(Y,$)}});var f=Object.assign({},F2),CZ=(X)=>{if(typeof X==="string")switch(X.slice(-1)){case"k":return+X.slice(0,X.length-1)*1024;case"m":return+X.slice(0,X.length-1)*1048576;default:return+X}return X},p5=(X,Y)=>{if(!(Y instanceof Blob))return!1;if(X.minSize&&Y.size<CZ(X.minSize))return!1;if(X.maxSize&&Y.size>CZ(X.maxSize))return!1;if(X.extension)if(typeof X.extension==="string"){if(!Y.type.startsWith(X.extension))return!1}else{for(let $=0;$<X.extension.length;$++)if(Y.type.startsWith(X.extension[$]))return!0;return!1}return!0},fN=h0.Get("Files")??T8.Type("File",p5),yN=h0.Get("Files")??T8.Type("Files",(X,Y)=>{if(!Array.isArray(Y))return p5(X,Y);if(X.minItems&&Y.length<X.minItems)return!1;if(X.maxItems&&Y.length>X.maxItems)return!1;for(let $=0;$<Y.length;$++)if(!p5(X,Y[$]))return!1;return!0});if(!C0.Has("numeric"))C0.Set("numeric",(X)=>!!X&&!isNaN(+X));if(!C0.Has("boolean"))C0.Set("boolean",(X)=>X==="true"||X==="false");if(!C0.Has("ObjectString"))C0.Set("ObjectString",(X)=>{let Y=X.charCodeAt(0);if(Y===9||Y===10||Y===32)Y=X.trimStart().charCodeAt(0);if(Y!==123&&Y!==91)return!1;try{return JSON.parse(X),!0}catch{return!1}});if(!C0.Has("ArrayString"))C0.Set("ArrayString",(X)=>{let Y=X.charCodeAt(0);if(Y===9||Y===10||Y===32)Y=X.trimStart().charCodeAt(0);if(Y!==123&&Y!==91)return!1;try{return JSON.parse(X),!0}catch{return!1}});h0.Set("UnionEnum",(X,Y)=>{return(typeof Y==="number"||typeof Y==="string"||Y===null)&&X.enum.includes(Y)});var R8={Numeric:(X)=>{let Y=F2.Number(X);return f.Transform(f.Union([f.String({format:"numeric",default:0}),f.Number(X)],X)).Decode(($)=>{let Z=+$;if(isNaN(Z))return $;if(X&&!Y0.Check(Y,Z))throw new O0("property",Y,Z);return Z}).Encode(($)=>$)},Date:(X)=>{let Y=F2.Date(X);return f.Transform(f.Union([F2.Date(X),f.String({format:"date",default:new Date().toISOString()}),f.String({format:"date-time",default:new Date().toISOString()})],X)).Decode(($)=>{if($ instanceof Date)return $;let Z=new Date($);if(!Y0.Check(Y,Z))throw new O0("property",Y,Z);return Z}).Encode(($)=>{if(typeof $==="string")return new Date($);return $})},BooleanString:(X)=>{let Y=F2.Boolean(X);return f.Transform(f.Union([f.Boolean(X),f.String({format:"boolean",default:!1})],X)).Decode(($)=>{if(typeof $==="string")return $==="true";if(X&&!Y0.Check(Y,$))throw new O0("property",Y,$);return $}).Encode(($)=>$)},ObjectString:(X,Y)=>{let $=f.Object(X,Y),Z=JSON.stringify(Y0.Create($)),Q;try{Q=H6.Compile($)}catch{}return f.Transform(f.Union([f.String({format:"ObjectString",default:Z}),$])).Decode((W)=>{if(typeof W==="string"){if(W.charCodeAt(0)!==123)throw new O0("property",$,W);try{W=JSON.parse(W)}catch{throw new O0("property",$,W)}if(Q){if(!Q.Check(W))throw new O0("property",$,W);return Q.Decode(W)}if(!Y0.Check($,W))throw new O0("property",$,W);return Y0.Decode($,W)}return W}).Encode((W)=>{if(typeof W==="string")try{W=JSON.parse(W)}catch{throw new O0("property",$,W)}if(!Y0.Check($,W))throw new O0("property",$,W);return JSON.stringify(W)})},ArrayString:(X={},Y)=>{let $=f.Array(X,Y),Z=JSON.stringify(Y0.Create($)),Q;try{Q=H6.Compile($)}catch{}return f.Transform(f.Union([f.String({format:"ArrayString",default:Z}),$])).Decode((W)=>{if(typeof W==="string"){if(W.charCodeAt(0)!==91)throw new O0("property",$,W);try{W=JSON.parse(W)}catch{throw new O0("property",$,W)}if(Q){if(!Q.Check(W))throw new O0("property",$,W);return Q.Decode(W)}if(!Y0.Check($,W))throw new O0("property",$,W);return Y0.Decode($,W)}return W}).Encode((W)=>{if(typeof W==="string")try{W=JSON.parse(W)}catch{throw new O0("property",$,W)}if(!Y0.Check($,W))throw new O0("property",$,W);return JSON.stringify(W)})},File:fN,Files:(X={})=>f.Transform(yN(X)).Decode((Y)=>{if(Array.isArray(Y))return Y;return[Y]}).Encode((Y)=>Y),Nullable:(X)=>f.Union([X,f.Null()]),MaybeEmpty:(X)=>f.Union([X,f.Null(),f.Undefined()]),Cookie:(X,{domain:Y,expires:$,httpOnly:Z,maxAge:Q,path:W,priority:J,sameSite:z,secure:M,secrets:B,sign:U,...A}={})=>{let w=f.Object(X,A);return w.config={domain:Y,expires:$,httpOnly:Z,maxAge:Q,path:W,priority:J,sameSite:z,secure:M,secrets:B,sign:U},w},UnionEnum:(X,Y={})=>{let $=X.every((Z)=>typeof Z==="string")?{type:"string"}:X.every((Z)=>typeof Z==="number")?{type:"number"}:X.every((Z)=>Z===null)?{type:"null"}:{};if(X.some((Z)=>typeof Z==="object"&&Z!==null))throw new Error("This type does not support objects or arrays");return{default:X[0],...Y,[L]:"UnionEnum",...$,enum:X}}};f.BooleanString=R8.BooleanString;f.ObjectString=R8.ObjectString;f.ArrayString=R8.ArrayString;f.Numeric=R8.Numeric;f.File=(X={})=>R8.File({default:"File",...X,extension:X?.type,type:"string",format:"binary"});f.Files=(X={})=>R8.Files({...X,elysiaMeta:"Files",default:"Files",extension:X?.type,type:"array",items:{...X,default:"Files",type:"string",format:"binary"}});f.Nullable=(X)=>R8.Nullable(X);f.MaybeEmpty=R8.MaybeEmpty;f.Cookie=R8.Cookie;f.Date=R8.Date;f.UnionEnum=R8.UnionEnum;var dN=E4(mZ(),1),vN=E4(mZ(),1),pN=E4(u5(),1);class z2{name;jar;initial;constructor(X,Y,$={}){this.name=X,this.jar=Y,this.initial=$}get cookie(){return this.jar[this.name]??this.initial}set cookie(X){if(!(this.name in this.jar))this.jar[this.name]=this.initial;this.jar[this.name]=X}get setCookie(){if(!(this.name in this.jar))this.jar[this.name]=this.initial;return this.jar[this.name]}set setCookie(X){this.cookie=X}get value(){return this.cookie.value}set value(X){this.setCookie.value=X}get expires(){return this.cookie.expires}set expires(X){this.setCookie.expires=X}get maxAge(){return this.cookie.maxAge}set maxAge(X){this.setCookie.maxAge=X}get domain(){return this.cookie.domain}set domain(X){this.setCookie.domain=X}get path(){return this.cookie.path}set path(X){this.setCookie.path=X}get secure(){return this.cookie.secure}set secure(X){this.setCookie.secure=X}get httpOnly(){return this.cookie.httpOnly}set httpOnly(X){this.setCookie.httpOnly=X}get sameSite(){return this.cookie.sameSite}set sameSite(X){this.setCookie.sameSite=X}get priority(){return this.cookie.priority}set priority(X){this.setCookie.priority=X}get partitioned(){return this.cookie.partitioned}set partitioned(X){this.setCookie.partitioned=X}get secrets(){return this.cookie.secrets}set secrets(X){this.setCookie.secrets=X}update(X){return this.setCookie=Object.assign(this.cookie,typeof X==="function"?X(this.cookie):X),this}set(X){return this.setCookie=Object.assign({...this.initial,value:this.value},typeof X==="function"?X(this.cookie):X),this}remove(){if(this.value===void 0)return;return this.set({expires:new Date(0),maxAge:0,value:""}),this}toString(){return typeof this.value==="object"?JSON.stringify(this.value):this.value?.toString()??""}}var RZ=(X,Y,$)=>{if(!X.cookie)X.cookie={};return new Proxy(Y,{get(Z,Q){if(Q in Y)return new z2(Q,X.cookie,Object.assign({},$??{},Y[Q]));return new z2(Q,X.cookie,Object.assign({},$))}})},rZ=async(X,Y,{secrets:$,sign:Z,...Q}={})=>{if(!Y)return RZ(X,{},Q);let W=typeof $==="string";if(Z&&Z!==!0&&!Array.isArray(Z))Z=[Z];let J={},z=vN.parse(Y);for(let[M,B]of Object.entries(z)){let U=pN.default(B);if(Z===!0||Z?.includes(M)){if(!$)throw new Error("No secret is provided to cookie plugin");if(W){let A=await kZ(U,$);if(A===!1)throw new m5(M);U=A}else{let A=!0;for(let w=0;w<$.length;w++){let G=await kZ(U,$[w]);if(G!==!1){A=!0,U=G;break}}if(!A)throw new m5(M)}}J[M]={value:U}}return RZ(X,J,Q)},aZ="toJSON"in new Headers,C8=(X)=>{if(!X)return!1;for(let Y in X)return!0;return!1},b4=(X,Y)=>{let $=X.size;if(!Y&&$||$&&Y&&Y.status!==206&&Y.status!==304&&Y.status!==412&&Y.status!==416){if(Y&&C8(Y.headers)){if(Y.headers instanceof Headers){if(aZ)Y.headers=Y.headers.toJSON();else for(let[Z,Q]of Y.headers.entries())if(Z in Y.headers)Y.headers[Z]=Q}return new Response(X,{status:Y.status,headers:Object.assign({"accept-ranges":"bytes","content-range":`bytes 0-${$-1}/${$}`},Y.headers)})}return new Response(X,{headers:{"accept-ranges":"bytes","content-range":`bytes 0-${$-1}/${$}`,"transfer-encoding":"chunked"}})}return new Response(X)},eZ=(X,Y)=>{if(!X)return X;X.delete("set-cookie");for(let $=0;$<Y.length;$++){let Z=Y[$].indexOf("=");X.append("set-cookie",`${Y[$].slice(0,Z)}=${Y[$].slice(Z+1)||""}`)}return X},XQ=(X)=>{if(!X||!C8(X))return;let Y=[];for(let[$,Z]of Object.entries(X)){if(!$||!Z)continue;let Q=Z.value;if(Q===void 0||Q===null)continue;Y.push(dN.serialize($,typeof Q==="object"?JSON.stringify(Q):Q+"",Z))}if(Y.length===0)return;if(Y.length===1)return Y[0];return Y},c8=async(X,Y,$)=>{let Z=X.next();if(Z instanceof Promise)Z=await Z;if(Z.done){if(Y)return u0(Z.value,Y,$);return N6(Z.value,$)}return new Response(new ReadableStream({async start(Q){let W=!1;if($?.signal.addEventListener("abort",()=>{W=!0;try{Q.close()}catch{}}),Z.value!==void 0&&Z.value!==null)if(typeof Z.value==="object")try{Q.enqueue(Buffer.from(JSON.stringify(Z.value)))}catch{Q.enqueue(Buffer.from(Z.value.toString()))}else Q.enqueue(Buffer.from(Z.value.toString()));for await(let J of X){if(W)break;if(J===void 0||J===null)continue;if(typeof J==="object")try{Q.enqueue(Buffer.from(JSON.stringify(J)))}catch{Q.enqueue(Buffer.from(J.toString()))}else Q.enqueue(Buffer.from(J.toString()));await new Promise((z)=>setTimeout(()=>z(),0))}try{Q.close()}catch{}}}),{...Y,headers:{"transfer-encoding":"chunked","content-type":"text/event-stream; charset=utf-8",...Y?.headers}})};async function*V4(X){let Y=X.body;if(!Y)return;let $=Y.getReader(),Z=new TextDecoder;try{while(!0){let{done:Q,value:W}=await $.read();if(Q)break;yield Z.decode(W)}}finally{$.releaseLock()}}var u0=(X,Y,$)=>{if(C8(Y.headers)||Y.status!==200||Y.redirect||Y.cookie){if(typeof Y.status==="string")Y.status=I4[Y.status];if(Y.redirect){if(Y.headers.Location=Y.redirect,!Y.status||Y.status<300||Y.status>=400)Y.status=302}if(Y.cookie&&C8(Y.cookie)){let Z=XQ(Y.cookie);if(Z)Y.headers["set-cookie"]=Z}if(Y.headers["set-cookie"]&&Array.isArray(Y.headers["set-cookie"]))Y.headers=eZ(new Headers(Y.headers),Y.headers["set-cookie"]);switch(X?.constructor?.name){case"String":return new Response(X,Y);case"Blob":return b4(X,Y);case"Array":return Response.json(X,Y);case"Object":return Response.json(X,Y);case"ElysiaCustomStatusResponse":return Y.status=X.code,u0(X.response,Y,$);case"ReadableStream":if(!Y.headers["content-type"]?.startsWith("text/event-stream"))Y.headers["content-type"]="text/event-stream; charset=utf-8";return $?.signal.addEventListener("abort",{handleEvent(){if(!$?.signal.aborted)X.cancel($)}},{once:!0}),new Response(X,Y);case void 0:if(!X)return new Response("",Y);return Response.json(X,Y);case"Response":let Z=!1;if(Y.headers instanceof Headers)for(let Q of Y.headers.keys())if(Q==="set-cookie"){if(Z)continue;Z=!0;for(let W of Y.headers.getSetCookie())X.headers.append("set-cookie",W)}else X.headers.append(Q,Y.headers?.get(Q)??"");else for(let Q in Y.headers)X.headers.append(Q,Y.headers[Q]);if(X.status!==Y.status)Y.status=X.status;if(X.headers.get("transfer-encoding")==="chunked")return c8(V4(X),Y,$);return X;case"Error":return u8(X,Y);case"Promise":return X.then((Q)=>u0(Q,Y));case"Function":return u0(X(),Y);case"Number":case"Boolean":return new Response(X.toString(),Y);case"Cookie":if(X instanceof z2)return new Response(X.value,Y);return new Response(X?.toString(),Y);case"FormData":return new Response(X,Y);default:if(X instanceof Response){let Q=!1;if(Y.headers instanceof Headers)for(let W of Y.headers.keys())if(W==="set-cookie"){if(Q)continue;Q=!0;for(let J of Y.headers.getSetCookie())X.headers.append("set-cookie",J)}else X.headers.append(W,Y.headers?.get(W)??"");else for(let W in Y.headers)X.headers.append(W,Y.headers[W]);if(aZ)Y.headers=X.headers.toJSON();else for(let[W,J]of X.headers.entries())if(W in Y.headers)Y.headers[W]=J;return X}if(X instanceof Promise)return X.then((Q)=>u0(Q,Y));if(X instanceof Error)return u8(X,Y);if(X instanceof U8)return Y.status=X.code,u0(X.response,Y,$);if(typeof X?.next==="function")return c8(X,Y,$);if(typeof X?.then==="function")return X.then((Q)=>u0(Q,Y));if(typeof X?.toResponse==="function")return u0(X.toResponse(),Y);if("charCodeAt"in X){let Q=X.charCodeAt(0);if(Q===123||Q===91){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify(X),Y)}}return new Response(X,Y)}}else switch(X?.constructor?.name){case"String":return new Response(X);case"Blob":return b4(X,Y);case"Array":return Response.json(X);case"Object":return Response.json(X,Y);case"ElysiaCustomStatusResponse":return Y.status=X.code,u0(X.response,Y,$);case"ReadableStream":return $?.signal.addEventListener("abort",{handleEvent(){if(!$?.signal.aborted)X.cancel($)}},{once:!0}),new Response(X,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!X)return new Response("");return new Response(JSON.stringify(X),{headers:{"content-type":"application/json"}});case"Response":if(X.headers.get("transfer-encoding")==="chunked")return c8(V4(X),Y,$);return X;case"Error":return u8(X,Y);case"Promise":return X.then((Z)=>{let Q=N6(Z,$);if(Q!==void 0)return Q;return new Response("")});case"Function":return N6(X(),$);case"Number":case"Boolean":return new Response(X.toString());case"Cookie":if(X instanceof z2)return new Response(X.value,Y);return new Response(X?.toString(),Y);case"FormData":return new Response(X,Y);default:if(X instanceof Response)return X;if(X instanceof Promise)return X.then((Z)=>u0(Z,Y));if(X instanceof Error)return u8(X,Y);if(X instanceof U8)return Y.status=X.code,u0(X.response,Y,$);if(typeof X?.next==="function")return c8(X,Y,$);if(typeof X?.then==="function")return X.then((Z)=>u0(Z,Y));if(typeof X?.toResponse==="function")return u0(X.toResponse(),Y);if("charCodeAt"in X){let Z=X.charCodeAt(0);if(Z===123||Z===91){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify(X),Y)}}return new Response(X)}},Q1=(X,Y,$)=>{if(X===void 0||X===null)return;if(C8(Y.headers)||Y.status!==200||Y.redirect||Y.cookie){if(typeof Y.status==="string")Y.status=I4[Y.status];if(Y.redirect){if(Y.headers.Location=Y.redirect,!Y.status||Y.status<300||Y.status>=400)Y.status=302}if(Y.cookie&&C8(Y.cookie)){let Z=XQ(Y.cookie);if(Z)Y.headers["set-cookie"]=Z}if(Y.headers["set-cookie"]&&Array.isArray(Y.headers["set-cookie"]))Y.headers=eZ(new Headers(Y.headers),Y.headers["set-cookie"]);switch(X?.constructor?.name){case"String":return new Response(X,Y);case"Blob":return b4(X,Y);case"Array":return Response.json(X,Y);case"Object":return Response.json(X,Y);case"ElysiaCustomStatusResponse":return Y.status=X.code,Q1(X.response,Y,$);case"ReadableStream":if(!Y.headers["content-type"]?.startsWith("text/event-stream"))Y.headers["content-type"]="text/event-stream; charset=utf-8";return $?.signal.addEventListener("abort",{handleEvent(){if(!$?.signal.aborted)X.cancel($)}},{once:!0}),new Response(X,Y);case void 0:if(!X)return;return Response.json(X,Y);case"Response":let Z=!1;if(Y.headers instanceof Headers)for(let Q of Y.headers.keys())if(Q==="set-cookie"){if(Z)continue;Z=!0;for(let W of Y.headers.getSetCookie())X.headers.append("set-cookie",W)}else X.headers.append(Q,Y.headers?.get(Q)??"");else for(let Q in Y.headers)X.headers.append(Q,Y.headers[Q]);if(X.status!==Y.status)Y.status=X.status;if(X.headers.get("transfer-encoding")==="chunked")return c8(V4(X),Y,$);return X;case"Promise":return X.then((Q)=>{let W=Q1(Q,Y);if(W!==void 0)return W});case"Error":return u8(X,Y);case"Function":return Q1(X(),Y);case"Number":case"Boolean":return new Response(X.toString(),Y);case"FormData":return new Response(X);case"Cookie":if(X instanceof z2)return new Response(X.value,Y);return new Response(X?.toString(),Y);default:if(X instanceof Response){let Q=!1;if(Y.headers instanceof Headers)for(let W of Y.headers.keys())if(W==="set-cookie"){if(Q)continue;Q=!0;for(let J of Y.headers.getSetCookie())X.headers.append("set-cookie",J)}else X.headers.append(W,Y.headers?.get(W)??"");else for(let W in Y.headers)X.headers.append(W,Y.headers[W]);if(X.status!==Y.status)Y.status=X.status;return X}if(X instanceof Promise)return X.then((Q)=>Q1(Q,Y));if(X instanceof Error)return u8(X,Y);if(X instanceof U8)return Y.status=X.code,Q1(X.response,Y,$);if(typeof X?.next==="function")return c8(X,Y,$);if(typeof X?.then==="function")return X.then((Q)=>Q1(Q,Y));if(typeof X?.toResponse==="function")return Q1(X.toResponse(),Y);if("charCodeAt"in X){let Q=X.charCodeAt(0);if(Q===123||Q===91){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify(X),Y)}}return new Response(X,Y)}}else switch(X?.constructor?.name){case"String":return new Response(X);case"Blob":return b4(X,Y);case"Array":return Response.json(X);case"Object":return Response.json(X,Y);case"ElysiaCustomStatusResponse":return Y.status=X.code,Q1(X.response,Y,$);case"ReadableStream":return $?.signal.addEventListener("abort",{handleEvent(){if(!$?.signal.aborted)X.cancel($)}},{once:!0}),new Response(X,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!X)return new Response("");return new Response(JSON.stringify(X),{headers:{"content-type":"application/json"}});case"Response":if(X.headers.get("transfer-encoding")==="chunked")return c8(V4(X));return X;case"Promise":return X.then((Z)=>{let Q=Q1(Z,Y);if(Q!==void 0)return Q});case"Error":return u8(X,Y);case"Function":return N6(X(),$);case"Number":case"Boolean":return new Response(X.toString());case"Cookie":if(X instanceof z2)return new Response(X.value,Y);return new Response(X?.toString(),Y);case"FormData":return new Response(X);default:if(X instanceof Response)return X;if(X instanceof Promise)return X.then((Z)=>Q1(Z,Y));if(X instanceof Error)return u8(X,Y);if(X instanceof U8)return Y.status=X.code,Q1(X.response,Y,$);if(typeof X?.next==="function")return c8(X,Y,$);if(typeof X?.then==="function")return X.then((Z)=>Q1(Z,Y));if(typeof X?.toResponse==="function")return Q1(X.toResponse(),Y);if("charCodeAt"in X){let Z=X.charCodeAt(0);if(Z===123||Z===91){if(!Y.headers["Content-Type"])Y.headers["Content-Type"]="application/json";return new Response(JSON.stringify(X),Y)}}return new Response(X)}},N6=(X,Y)=>{switch(X?.constructor?.name){case"String":return new Response(X);case"Blob":return b4(X);case"Array":return Response.json(X);case"Object":return Response.json(X);case"ElysiaCustomStatusResponse":return u0(X.response,{status:X.code,headers:{}});case"ReadableStream":return Y?.signal.addEventListener("abort",{handleEvent(){if(!Y?.signal.aborted)X.cancel(Y)}},{once:!0}),new Response(X,{headers:{"Content-Type":"text/event-stream; charset=utf-8"}});case void 0:if(!X)return new Response("");return new Response(JSON.stringify(X),{headers:{"content-type":"application/json"}});case"Response":if(X.headers.get("transfer-encoding")==="chunked")return c8(V4(X));return X;case"Error":return u8(X);case"Promise":return X.then(($)=>N6($,Y));case"Function":return N6(X(),Y);case"Number":case"Boolean":return new Response(X.toString());case"FormData":return new Response(X);default:if(X instanceof Response)return X;if(X instanceof Promise)return X.then(($)=>N6($,Y));if(X instanceof Error)return u8(X);if(X instanceof U8)return u0(X.response,{status:X.code,headers:{}});if(typeof X?.next==="function")return c8(X,void 0,Y);if(typeof X?.then==="function")return X.then(($)=>u0($,set));if(typeof X?.toResponse==="function")return N6(X.toResponse());if("charCodeAt"in X){let $=X.charCodeAt(0);if($===123||$===91)return new Response(JSON.stringify(X),{headers:{"Content-Type":"application/json"}})}return new Response(X)}},u8=(X,Y)=>new Response(JSON.stringify({name:X?.name,message:X?.message,cause:X?.cause}),{status:Y?.status!==200?Y?.status??500:500,headers:Y?.headers}),hN=(X,Y,$={})=>{if(typeof X==="function")return;let Z=u0(X,{headers:$});if(Y.parse.length===0&&Y.transform.length===0&&Y.beforeHandle.length===0&&Y.afterHandle.length===0)return Z.clone.bind(Z)},mN=(X,Y,$={})=>{if(typeof X==="function"||X instanceof Blob)return;let Z=u0(X,{headers:$});if(Y.parse.length===0&&Y.transform.length===0&&Y.beforeHandle.length===0&&Y.afterHandle.length===0){if(!Z.headers.has("content-type"))Z.headers.append("content-type","text/plain;charset=utf-8");return Z.clone.bind(Z)}},R7=(X,Y)=>{let $=new URL(X);return $.pathname=Y,$.toString()},cN=(X)=>typeof X==="function"&&/^\s*class\s+/.test(X.toString())||X.toString().startsWith("[object ")&&X.toString()!=="[object Object]"||C8(Object.getPrototypeOf(X)),k5=(X)=>X&&typeof X==="object"&&!Array.isArray(X),y1=(X,Y,{skipKeys:$,override:Z=!0}={})=>{if(!k5(X)||!k5(Y))return X;for(let[Q,W]of Object.entries(Y)){if($?.includes(Q))continue;if(!k5(W)||!(Q in X)||cN(W)){if(Z||!(Q in X))X[Q]=W;continue}X[Q]=y1(X[Q],W,{skipKeys:$,override:Z})}return X},uN=(X,Y)=>{let{properties:$,...Z}=X??{},{properties:Q,...W}=Y??{};return y1(Z,W)},W1=(X=[],Y=[])=>{if(!X)return[];if(!Y)return X;let $=[],Z=[];if(!Array.isArray(X))X=[X];if(!Array.isArray(Y))Y=[Y];for(let Q of X)if($.push(Q),Q.checksum)Z.push(Q.checksum);for(let Q of Y)if(!Z.includes(Q.checksum))$.push(Q);return $},iN=["start","request","parse","transform","resolve","beforeHandle","afterHandle","mapResponse","afterResponse","trace","error","stop","body","headers","params","query","response","type","detail"],lN=iN.reduce((X,Y)=>(X[Y]=!0,X),{}),YQ=(X,Y)=>{let $=(Z)=>typeof Z==="object"&&Object.keys(Z).every(h5);if($(X)&&$(Y))return{...X,...Y};else if(X&&!$(X)&&$(Y))return{200:X,...Y};return Y??X},F4=(X,Y)=>{return{body:Y?.body??X?.body,headers:Y?.headers??X?.headers,params:Y?.params??X?.params,query:Y?.query??X?.query,cookie:Y?.cookie??X?.cookie,response:YQ(X?.response,Y?.response)}},M8=(X,Y)=>{return{...X,...Y,body:Y?.body??X?.body,headers:Y?.headers??X?.headers,params:Y?.params??X?.params,query:Y?.query??X?.query,cookie:Y?.cookie??X?.cookie,response:YQ(X?.response,Y?.response),type:X?.type||Y?.type,detail:y1(Y?.detail??{},X?.detail??{}),parse:W1(X?.parse,Y?.parse),transform:W1(X?.transform,Y?.transform),beforeHandle:W1(X?.beforeHandle,Y?.beforeHandle),afterHandle:W1(X?.afterHandle,Y?.afterHandle),mapResponse:W1(X?.mapResponse,Y?.mapResponse),afterResponse:W1(X?.afterResponse,Y?.afterResponse),trace:W1(X?.trace,Y?.trace),error:W1(X?.error,Y?.error)}},KZ=(X,Y,$=!0)=>{if(!Array.isArray(Y))return S1(X,Y,$);for(let Z of Y)X=S1(X,Z,$);return X},S1=(X,Y,$=!0)=>{if(!X)return X;if(Y.untilObjectFound&&!$&&X.type==="object")return X;let Z=Y.from[L];if(X.oneOf){for(let J=0;J<X.oneOf.length;J++)X.oneOf[J]=S1(X.oneOf[J],Y,$);return X}if(X.anyOf){for(let J=0;J<X.anyOf.length;J++)X.anyOf[J]=S1(X.anyOf[J],Y,$);return X}if(X.allOf){for(let J=0;J<X.allOf.length;J++)X.allOf[J]=S1(X.allOf[J],Y,$);return X}if(X.not){for(let J=0;J<X.not.length;J++)X.not[J]=S1(X.not[J],Y,$);return X}let Q=$&&!!Y.excludeRoot;if(X[L]===Z){let{anyOf:J,oneOf:z,allOf:M,not:B,properties:U,items:A,...w}=X,G=Y.to(w),H,q=(_)=>{if(U&&_.type==="object"){let S={};for(let[C,d]of Object.entries(U))S[C]=S1(d,Y,!1);return{...w,..._,properties:S}}if(A&&_.type==="array")return{...w,..._,items:S1(A,Y,!1)};let R={...w,..._};if(delete R.required,U&&_.type==="string"&&_.format==="ObjectString"&&_.default==="{}")H=f.ObjectString(U,w),R.default=JSON.stringify(Y0.Create(f.Object(U))),R.properties=U;if(A&&_.type==="string"&&_.format==="ArrayString"&&_.default==="[]")H=f.ArrayString(A,w),R.default=JSON.stringify(Y0.Create(f.Array(A))),R.items=A;return R};if(Q){if(U){let _={};for(let[R,S]of Object.entries(U))_[R]=S1(S,Y,!1);return{...w,properties:_}}else if(A?.map)return{...w,items:A.map((_)=>S1(_,Y,!1))};return w}if(G.anyOf)for(let _=0;_<G.anyOf.length;_++)G.anyOf[_]=q(G.anyOf[_]);else if(G.oneOf)for(let _=0;_<G.oneOf.length;_++)G.oneOf[_]=q(G.oneOf[_]);else if(G.allOf)for(let _=0;_<G.allOf.length;_++)G.allOf[_]=q(G.allOf[_]);else if(G.not)for(let _=0;_<G.not.length;_++)G.not[_]=q(G.not[_]);if(H)G[y0]=H[y0];if(G.anyOf||G.oneOf||G.allOf||G.not)return G;if(U){let _={};for(let[R,S]of Object.entries(U))_[R]=S1(S,Y,!1);return{...w,...G,properties:_}}else if(A?.map)return{...w,...G,items:A.map((_)=>S1(_,Y,!1))};return{...w,...G}}let W=X?.properties;if(W&&$&&Y.rootOnly!==!0)for(let[J,z]of Object.entries(W))switch(z[L]){case Z:let{anyOf:M,oneOf:B,allOf:U,not:A,type:w,...G}=z,H=Y.to(G);if(H.anyOf)for(let q=0;q<H.anyOf.length;q++)H.anyOf[q]={...G,...H.anyOf[q]};else if(H.oneOf)for(let q=0;q<H.oneOf.length;q++)H.oneOf[q]={...G,...H.oneOf[q]};else if(H.allOf)for(let q=0;q<H.allOf.length;q++)H.allOf[q]={...G,...H.allOf[q]};else if(H.not)for(let q=0;q<H.not.length;q++)H.not[q]={...G,...H.not[q]};W[J]={...G,...S1(G,Y,!1)};break;case"Object":case"Union":W[J]=S1(z,Y,!1);break;default:if(z.items)for(let q=0;q<z.items.length;q++)z.items[q]=S1(z.items[q],Y,!1);else if(z.anyOf||z.oneOf||z.allOf||z.not)W[J]=S1(z,Y,!1);break}return X},j4=(X)=>(Y)=>{if(typeof Y==="object")try{return Y0.Clean(X,structuredClone(Y))}catch{try{return Y0.Clean(X,Y)}catch{return Y}}return Y},f1=(X,{models:Y={},dynamic:$=!1,normalize:Z=!1,additionalProperties:Q=!1,coerce:W=!1,additionalCoerce:J=[]}={})=>{if(!X)return;if(typeof X==="string"&&!(X in Y))return;let z=typeof X==="string"?Y[X]:X;if(W||J)if(W)z=KZ(z,[{from:f.Number(),to:(B)=>f.Numeric(B),untilObjectFound:!0},{from:f.Boolean(),to:(B)=>f.BooleanString(B),untilObjectFound:!0},...Array.isArray(J)?J:[J]]);else z=KZ(z,[...Array.isArray(J)?J:[J]]);if(z.type==="object"&&"additionalProperties"in z===!1)z.additionalProperties=Q;if($){let B={schema:z,references:"",checkFunc:()=>{},code:"",Check:(U)=>Y0.Check(z,U),Errors:(U)=>Y0.Errors(z,U),Code:()=>"",Clean:j4(z),Decode:(U)=>Y0.Decode(z,U),Encode:(U)=>Y0.Encode(z,U)};if(Z&&z.additionalProperties===!1)B.Clean=j4(z);if(z.config){if(B.config=z.config,B?.schema?.config)delete B.schema.config}return B.parse=(U)=>{try{return B.Decode(U)}catch(A){throw[...B.Errors(U)].map(m8)}},B.safeParse=(U)=>{try{return{success:!0,data:B.Decode(U),error:null}}catch(A){let w=[...M.Errors(U)].map(m8);return{success:!1,data:null,error:w[0]?.summary,errors:w}}},B}let M=H6.Compile(z,Object.values(Y));if(M.Clean=j4(z),z.config){if(M.config=z.config,M?.schema?.config)delete M.schema.config}return M.parse=(B)=>{try{return M.Decode(B)}catch(U){throw[...M.Errors(B)].map(m8)}},M.safeParse=(B)=>{try{return{success:!0,data:M.Decode(B),error:null}}catch(U){let A=[...M.Errors(B)].map(m8);return{success:!1,data:null,error:A[0]?.summary,errors:A}}},M},jZ=(X,{models:Y={},dynamic:$=!1,normalize:Z=!1,additionalProperties:Q=!1})=>{if(!X)return;if(typeof X==="string"&&!(X in Y))return;let W=typeof X==="string"?Y[X]:X,J=(M,B)=>{if($)return{schema:M,references:"",checkFunc:()=>{},code:"",Check:(A)=>Y0.Check(M,A),Errors:(A)=>Y0.Errors(M,A),Code:()=>"",Clean:j4(M),Decode:(A)=>Y0.Decode(M,A),Encode:(A)=>Y0.Encode(M,A)};let U=H6.Compile(M,B);if(Z&&M.additionalProperties===!1)U.Clean=j4(M);return U};if(L in W){if("additionalProperties"in W===!1)W.additionalProperties=Q;return{200:J(W,Object.values(Y))}}let z={};return Object.keys(W).forEach((M)=>{let B=W[+M];if(typeof B==="string"){if(B in Y){let U=Y[B];U.type==="object"&&"additionalProperties"in U,z[+M]=L in U?J(U,Object.values(Y)):U}return}if(B.type==="object"&&"additionalProperties"in B===!1)B.additionalProperties=Q;z[+M]=L in B?J(B,Object.values(Y)):B}),z},oN=typeof Bun!=="undefined",nN=oN&&typeof Bun.hash==="function",C4=(X)=>{if(nN)return Bun.hash(X);let Y=9;for(let $=0;$<X.length;)Y=Math.imul(Y^X.charCodeAt($++),387420489);return Y=Y^Y>>>9},T5,$2=()=>{if(!T5)T5=[{from:f.Object({}),to:()=>f.ObjectString({}),excludeRoot:!0},{from:f.Array(f.Any()),to:()=>f.ArrayString(f.Any())}];return T5},g5,bZ=()=>{if(!g5)g5=[{from:f.Number(),to:(X)=>f.Numeric(X),rootOnly:!0},{from:f.Boolean(),to:(X)=>f.BooleanString(X),rootOnly:!0}];return g5},$Q=({validator:X,defaultConfig:Y={},config:$,dynamic:Z,models:Q})=>{let W=f1(X,{dynamic:Z,models:Q,additionalProperties:!0,coerce:!0,additionalCoerce:$2()});if(C8(Y))if(W)W.config=uN(W.config,$);else W=f1(f.Cookie({}),{dynamic:Z,models:Q,additionalProperties:!0}),W.config=Y;return W},_8=(X,Y)=>{if(!Y)return;if(!Array.isArray(Y)){let Z=Y;if(X&&!Z.checksum)Z.checksum=X;if(Z.scope==="scoped")Z.scope="local";return Z}let $=[...Y];for(let Z of $){if(X&&!Z.checksum)Z.checksum=X;if(Z.scope==="scoped")Z.scope="local"}return $},VZ=(X,Y,$)=>{return{start:W1(X.start,_8($,Y?.start)),request:W1(X.request,_8($,Y?.request)),parse:W1(X.parse,_8($,Y?.parse)),transform:W1(X.transform,_8($,Y?.transform)),beforeHandle:W1(X.beforeHandle,_8($,Y?.beforeHandle)),afterHandle:W1(X.afterHandle,_8($,Y?.afterHandle)),mapResponse:W1(X.mapResponse,_8($,Y?.mapResponse)),afterResponse:W1(X.afterResponse,_8($,Y?.afterResponse)),trace:W1(X.trace,_8($,Y?.trace)),error:W1(X.error,_8($,Y?.error)),stop:W1(X.stop,_8($,Y?.stop))}},sN=(X,Y,{skipIfHasType:$=!1}={})=>{if(!X)return X;if(!Array.isArray(X)){if($)X.scope??=Y;else X.scope=Y;return X}for(let Z of X)if($)Z.scope??=Y;else Z.scope=Y;return X},j6=(X)=>{if(!X)return X;if(!Array.isArray(X))switch(X.scope){case"global":case"scoped":return{...X};default:return{fn:X}}let Y=[];for(let $ of X)switch($.scope){case"global":case"scoped":Y.push({...$});break}return Y},EZ=(X)=>{return{...X,type:X?.type,detail:X?.detail,parse:j6(X?.parse),transform:j6(X?.transform),beforeHandle:j6(X?.beforeHandle),afterHandle:j6(X?.afterHandle),mapResponse:j6(X?.mapResponse),afterResponse:j6(X?.afterResponse),error:j6(X?.error),trace:j6(X?.trace)}},I4={Continue:100,"Switching Protocols":101,Processing:102,"Early Hints":103,OK:200,Created:201,Accepted:202,"Non-Authoritative Information":203,"No Content":204,"Reset Content":205,"Partial Content":206,"Multi-Status":207,"Already Reported":208,"Multiple Choices":300,"Moved Permanently":301,Found:302,"See Other":303,"Not Modified":304,"Temporary Redirect":307,"Permanent Redirect":308,"Bad Request":400,Unauthorized:401,"Payment Required":402,Forbidden:403,"Not Found":404,"Method Not Allowed":405,"Not Acceptable":406,"Proxy Authentication Required":407,"Request Timeout":408,Conflict:409,Gone:410,"Length Required":411,"Precondition Failed":412,"Payload Too Large":413,"URI Too Long":414,"Unsupported Media Type":415,"Range Not Satisfiable":416,"Expectation Failed":417,"I'm a teapot":418,"Misdirected Request":421,"Unprocessable Content":422,Locked:423,"Failed Dependency":424,"Too Early":425,"Upgrade Required":426,"Precondition Required":428,"Too Many Requests":429,"Request Header Fields Too Large":431,"Unavailable For Legal Reasons":451,"Internal Server Error":500,"Not Implemented":501,"Bad Gateway":502,"Service Unavailable":503,"Gateway Timeout":504,"HTTP Version Not Supported":505,"Variant Also Negotiates":506,"Insufficient Storage":507,"Loop Detected":508,"Not Extended":510,"Network Authentication Required":511},IZ=Object.fromEntries(Object.entries(I4).map(([X,Y])=>[Y,X]));function tN(X){let Y=X;while(Y.endsWith("="))Y=Y.slice(0,-1);return Y}var xZ=new TextEncoder,j7=async(X,Y)=>{if(typeof X!=="string")throw new TypeError("Cookie value must be provided as a string.");if(Y===null)throw new TypeError("Secret key must be provided.");let $=await crypto.subtle.importKey("raw",xZ.encode(Y),{name:"HMAC",hash:"SHA-256"},!1,["sign"]),Z=await crypto.subtle.sign("HMAC",$,xZ.encode(X));return X+"."+tN(Buffer.from(Z).toString("base64"))},kZ=async(X,Y)=>{if(typeof X!=="string")throw new TypeError("Signed cookie string must be provided.");if(Y===null)throw new TypeError("Secret key must be provided.");let $=X.slice(0,X.lastIndexOf("."));return await j7($,Y)===X?$:!1},rN=(X,Y)=>{if(!X||typeof X!=="object"||!Y)return;for(let[$,Z]of Object.entries(Y)){if($ in lN||!($ in X))continue;let Q=X[$];if(typeof Q==="function")Q(Z),delete Y[$]}},aN=({globalHook:X,localHook:Y})=>($)=>(Z,Q)=>{if(typeof Z==="function")Z={fn:Z};if("fn"in Z||Array.isArray(Z)){if(!Y[$])Y[$]=[];if(typeof Y[$]==="function")Y[$]=[Y[$]];if(Array.isArray(Z))Y[$]=Y[$].concat(Z);else Y[$].push(Z);return}let{insert:W="after",stack:J="local"}=Z;if(typeof Q==="function")Q={fn:Q};if(J==="global")if(!Array.isArray(Q))if(W==="before")X[$].unshift(Q);else X[$].push(Q);else if(W==="before")X[$]=Q.concat(X[$]);else X[$]=X[$].concat(Q);else{if(!Y[$])Y[$]=[];if(typeof Y[$]==="function")Y[$]=[Y[$]];if(!Array.isArray(Q))if(W==="before")Y[$].unshift(Q);else Y[$].push(Q);else if(W==="before")Y[$]=Q.concat(Y[$]);else Y[$]=Y[$].concat(Q)}},eN=(X)=>{if(typeof X==="number")return X;if(X.length<16){if(X.trim().length===0)return null;let Y=Number(X);if(Number.isNaN(Y))return null;return Y}if(X.length===16){if(X.trim().length===0)return null;let Y=Number(X);if(Number.isNaN(Y)||Y.toString()!==X)return null;return Y}return null},h5=(X)=>eN(X)!==null;class ZQ{onError;root=null;promises=[];constructor(X=console.error){this.onError=X}get size(){return this.promises.length}add(X){return this.promises.push(X),this.root||=this.drain(),X}async drain(){while(this.promises.length>0){try{await this.promises[0]}catch(X){this.onError(X)}this.promises.shift()}this.root=null}then(X,Y){return(this.root??Promise.resolve()).then(X,Y)}}var B8=(X)=>{if(!X)return X;if(!Array.isArray(X)){if(typeof X==="function")return{fn:X};else if("fn"in X)return X}let Y=[];for(let $ of X)if(typeof $==="function")Y.push({fn:$});else if("fn"in $)Y.push($);return Y},XD=(X)=>{return{...X,start:B8(X?.start),request:B8(X?.request),parse:B8(X?.parse),transform:B8(X?.transform),beforeHandle:B8(X?.beforeHandle),afterHandle:B8(X?.afterHandle),mapResponse:B8(X?.mapResponse),afterResponse:B8(X?.afterResponse),trace:B8(X?.trace),error:B8(X?.error),stop:B8(X?.stop)}},TZ=(X)=>{return{...X,start:X.start?.map((Y)=>Y.fn),request:X.request?.map((Y)=>Y.fn),parse:X.parse?.map((Y)=>Y.fn),transform:X.transform?.map((Y)=>Y.fn),beforeHandle:X.beforeHandle?.map((Y)=>Y.fn),afterHandle:X.afterHandle?.map((Y)=>Y.fn),afterResponse:X.afterResponse?.map((Y)=>Y.fn),mapResponse:X.mapResponse?.map((Y)=>Y.fn),trace:X.trace?.map((Y)=>Y.fn),error:X.error?.map((Y)=>Y.fn),stop:X.stop?.map((Y)=>Y.fn)}},f5=(X)=>({body:X.body,cookie:X.cookie,headers:X.headers,query:X.query,set:X.set,server:X.server}),QQ=(X,Y=302)=>Response.redirect(X,Y),Lm=Symbol("ElysiaFormData"),E7=Symbol("ElysiaRequestId");var WQ=()=>crypto.getRandomValues(new Uint32Array(1))[0],gZ=(X)=>{let Y=[];for(let $=0;$<X.length;$++){let Z=X[$];if(Z.checksum){if(Y.includes(Z.checksum))X.splice($,1),$--;Y.push(Z.checksum)}}return X},P1=(X,Y="scoped")=>{if(Y==="scoped"){for(let $ of X)if("scope"in $&&$.scope==="local")$.scope="scoped";return}for(let $ of X)if("scope"in $)$.scope="global"},fZ=typeof Bun!=="undefined"?Bun.env:typeof process!=="undefined"?process?.env:void 0,b7=Symbol("ElysiaErrorCode"),V7=(fZ?.NODE_ENV??fZ?.ENV)==="production";class U8{code;response;constructor(X,Y){let $=Y??(X in IZ?IZ[X]:X);this.code=I4[X]??X,this.response=$}}var YD=(X,Y)=>new U8(X,Y);class JQ extends Error{code="INTERNAL_SERVER_ERROR";status=500;constructor(X){super(X??"INTERNAL_SERVER_ERROR")}}class I7 extends Error{code="NOT_FOUND";status=404;constructor(X){super(X??"NOT_FOUND")}}class zQ extends Error{code="PARSE";status=400;constructor(){super("Failed to parse body")}}class m5 extends Error{key;code="INVALID_COOKIE_SIGNATURE";status=400;constructor(X,Y){super(Y??`"${X}" has invalid cookie signature`);this.key=X}}var m8=(X)=>{if(!X)return{summary:void 0};let{message:Y,path:$,value:Z,type:Q}=X,W=$.slice(1).replaceAll("/","."),J=$==="";switch(Q){case 42:return{...X,summary:J?"Value should not be provided":`Property '${W}' should not be provided`};case 45:return{...X,summary:J?"Value is missing":`Property '${W}' is missing`};case 50:let z=Y.indexOf("'"),M=Y.slice(z+1,Y.indexOf("'",z+1));return{...X,summary:J?"Value should be an email":`Property '${W}' should be ${M}`};case 54:return{...X,summary:`${Y.slice(0,9)} property '${W}' to be ${Y.slice(8)} but found: ${Z}`};case 62:let B=X.schema.anyOf.map((U)=>`'${U?.format??U.type}'`).join(", ");return{...X,summary:J?`Value should be one of ${B}`:`Property '${W}' should be one of: ${B}`};default:return{summary:Y,...X}}};class O0 extends Error{type;validator;value;code="VALIDATION";status=422;constructor(X,Y,$){if($&&typeof $==="object"&&$ instanceof U8)$=$.response;let Z=V7?void 0:("Errors"in Y)?Y.Errors($).First():Y0.Errors(Y,$).First(),Q=Z?.schema.error!==void 0?typeof Z.schema.error==="function"?Z.schema.error({type:X,validator:Y,value:$,get errors(){return[...Y.Errors($)].map(m8)}}):Z.schema.error:void 0,W=Z?.path||"root",J="";if(Q!==void 0)J=typeof Q==="object"?JSON.stringify(Q):Q+"";else if(V7)J=JSON.stringify({type:"validation",on:X,summary:m8(Z).summary,message:Z?.message,found:$});else{let z=Y?.schema??Y,M="Errors"in Y?[...Y.Errors($)].map(m8):[...Y0.Errors(Y,$)].map(m8),B;try{B=Y0.Create(z)}catch(U){B={type:"Could not create expected value",message:U?.message,error:U}}J=JSON.stringify({type:"validation",on:X,summary:M[0]?.summary,property:W,message:Z?.message,expected:B,found:$,errors:M},null,2)}super(J);this.type=X,this.validator=Y,this.value=$,Object.setPrototypeOf(this,O0.prototype)}get all(){return"Errors"in this.validator?[...this.validator.Errors(this.value)].map(m8):[...Y0.Errors(this.validator,this.value)].map(m8)}static simplifyModel(X){let Y="schema"in X?X.schema:X;try{return Y0.Create(Y)}catch{return Y}}get model(){return O0.simplifyModel(this.validator)}toResponse(X){return new Response(this.message,{status:400,headers:{...X,"content-type":"application/json"}})}}var yZ={open(X){X.data.open?.(X)},message(X,Y){X.data.message?.(X,Y)},drain(X){X.data.drain?.(X)},close(X,Y,$){X.data.close?.(X,Y,$)}};class R4{raw;data;validator;_validator;constructor(X,Y){if(this.raw=X,this.data=Y,this.validator=X.data.validator,X.data.id)this.id=X.data.id;else this.id=WQ().toString()}get id(){return this.raw.data.id}set id(X){this.raw.data.id=X}get publish(){return(X,Y=void 0,$)=>{if(this.validator?.Check(Y)===!1)throw new O0("message",this.validator,Y);if(typeof Y==="object")Y=JSON.stringify(Y);return this.raw.publish(X,Y,$),this}}get send(){return(X)=>{if(this.validator?.Check(X)===!1)throw new O0("message",this.validator,X);if(Buffer.isBuffer(X))return this.raw.send(X),this;if(typeof X==="object")X=JSON.stringify(X);return this.raw.send(X),this}}get subscribe(){return(X)=>{return this.raw.subscribe(X),this}}get unsubscribe(){return(X)=>{return this.raw.unsubscribe(X),this}}get cork(){return(X)=>{return this.raw.cork(X),this}}get close(){return()=>{return this.raw.close(),this}}get terminate(){return this.raw.terminate.bind(this.raw)}get isSubscribed(){return this.raw.isSubscribed.bind(this.raw)}get remoteAddress(){return this.raw.remoteAddress}}var dZ="1.1.25",R2=E4(u5(),1),K2=/\+/g;function MQ(X){let Y={};if(typeof X!=="string")return Y;let $="",Z="",Q=-1,W=-1,J=0,z=X.length;for(let M=0;M<z;M++)switch(X.charCodeAt(M)){case 38:let B=W>Q;if(!B)W=M;if($=X.slice(Q+1,W),B||$.length>0){if(J&1)$=$.replace(K2," ");if(J&2)$=R2.default($)||$;if(!Y[$]){if(B){if(Z=X.slice(W+1,M),J&4)Z=Z.replace(K2," ");if(J&8)Z=R2.default(Z)||Z}Y[$]=Z}}$="",Z="",Q=M,W=M,J=0;break;case 61:if(W<=Q)W=M;else J|=8;break;case 43:if(W>Q)J|=4;else J|=1;break;case 37:if(W>Q)J|=8;else J|=2;break}if(Q<z){let M=W>Q;if($=X.slice(Q+1,M?W:z),M||$.length>0){if(J&1)$=$.replace(K2," ");if(J&2)$=R2.default($)||$;if(!Y[$]){if(M){if(Z=X.slice(W+1,z),J&4)Z=Z.replace(K2," ");if(J&8)Z=R2.default(Z)||Z}Y[$]=Z}}}return Y}var c5=(X)=>{let Y={};if(typeof X!=="string")return Y;let $=X.length,Z="",Q="",W=-1,J=-1,z=!1,M=!1,B=!1,U=!1,A=!1,w=0;for(let G=0;G<$+1;G++){if(G!==$)w=X.charCodeAt(G);else w=38;switch(w){case 38:{if(A=J>W,!A)J=G;if(Z=X.slice(W+1,J),A||Z.length>0){if(B)Z=Z.replace(K2," ");if(z)Z=R2.default(Z)||Z;if(A){if(Q=X.slice(J+1,G),U)Q=Q.replace(K2," ");if(M)Q=R2.default(Q)||Q}let H=Y[Z];if(H===void 0)Y[Z]=Q;else if(H.pop)H.push(Q);else Y[Z]=[H,Q]}Q="",W=G,J=G,z=!1,M=!1,B=!1,U=!1;break}case 61:if(J<=W)J=G;else M=!0;break;case 43:if(J>W)U=!0;else B=!0;break;case 37:if(J>W)M=!0;else z=!0;break}}return Y},$D=E4(u5(),1),l5=Symbol("ElysiaTrace"),q6=()=>{let{promise:X,resolve:Y}=Promise.withResolvers(),{promise:$,resolve:Z}=Promise.withResolvers(),{promise:Q,resolve:W}=Promise.withResolvers(),J=[],z=[];return[(M)=>{if(M)J.push(M);return X},(M)=>{let B=[],U=[],A=null;for(let G=0;G<(M.total??0);G++){let{promise:H,resolve:q}=Promise.withResolvers(),{promise:_,resolve:R}=Promise.withResolvers(),{promise:S,resolve:C}=Promise.withResolvers(),d=[],h=[];B.push((k)=>{if(k)d.push(k);return H}),U.push((k)=>{let x0={...k,end:_,error:S,index:G,onStop(T){if(T)h.push(T);return _}};q(x0);for(let T=0;T<d.length;T++)d[T](x0);return(T=null)=>{let e=performance.now();if(T)A=T;let n={end:e,error:T,get elapsed(){return e-k.begin}};for(let H0=0;H0<h.length;H0++)h[H0](n);R(e),C(T)}})}let w={...M,end:$,error:Q,onEvent(G){for(let H=0;H<B.length;H++)B[H](G)},onStop(G){if(G)z.push(G);return $}};Y(w);for(let G=0;G<J.length;G++)J[G](w);return{resolveChild:U,resolve(G=null){let H=performance.now();if(!G&&A)G=A;let q={end:H,error:G,get elapsed(){return H-M.begin}};for(let _=0;_<z.length;_++)z[_](q);Z(H),W(G)}}}]},ZD=(X)=>{return(Y)=>{let[$,Z]=q6(),[Q,W]=q6(),[J,z]=q6(),[M,B]=q6(),[U,A]=q6(),[w,G]=q6(),[H,q]=q6(),[_,R]=q6(),[S,C]=q6();return X({id:Y[E7],context:Y,set:Y.set,onRequest:$,onParse:Q,onTransform:J,onBeforeHandle:M,onHandle:U,onAfterHandle:w,onMapResponse:_,onAfterResponse:S,onError:H}),{request:Z,parse:W,transform:z,beforeHandle:B,handle:A,afterHandle:G,error:q,mapResponse:R,afterResponse:C}}},QD=new Headers().toJSON,BQ={optional:Symbol.for("TypeBox.Optional"),kind:Symbol.for("TypeBox.Kind")},a1=(X)=>{if(!X)return!1;let Y=X?.schema;return!!Y&&BQ.optional in Y},F8=(X)=>{if(!X)return!1;let Y=X?.schema??X;if(Y.anyOf)return Y.anyOf.some(F8);if(Y.someOf)return Y.someOf.some(F8);if(Y.allOf)return Y.allOf.some(F8);if(Y.not)return Y.not.some(F8);if(Y.type==="object"){let $=Y.properties;if("additionalProperties"in Y)return Y.additionalProperties;if("patternProperties"in Y)return!1;for(let Z of Object.keys($)){let Q=$[Z];if(Q.type==="object"){if(F8(Q))return!0}else if(Q.anyOf){for(let W=0;W<Q.anyOf.length;W++)if(F8(Q.anyOf[W]))return!0}return Q.additionalProperties}return!1}return!1},o5=({context:X="c",trace:Y,addFn:$})=>{if(!Y.length)return()=>{return{resolveChild(){return()=>{}},resolve(){}}};for(let Z=0;Z<Y.length;Z++)$(`let report${Z}, reportChild${Z}, reportErr${Z}, reportErrChild${Z}; let trace${Z} = ${X}[ELYSIA_TRACE]?.[${Z}] ?? trace[${Z}](${X});\n`);return(Z,{name:Q,total:W=0}={})=>{if(!Q)Q="anonymous";let J=Z==="error"?"reportErr":"report";for(let z=0;z<Y.length;z++)$(`\n${J}${z} = trace${z}.${Z}({id,event: '${Z}',name: '${Q}',begin: performance.now(),total: ${W}})\n`);return{resolve(){for(let z=0;z<Y.length;z++)$(`\n${J}${z}.resolve()\n`)},resolveChild(z){for(let M=0;M<Y.length;M++)$(`${J}Child${M} = ${J}${M}.resolveChild?.shift()?.({id,event: '${Z}',name: '${z}',begin: performance.now()})\n`);return(M)=>{for(let B=0;B<Y.length;B++)if(M)$(`
                             	if (${M} instanceof Error)
                    				${J}Child${B}?.(${M})
                           		else
                             		${J}Child${B}?.()\n`);else $(`${J}Child${B}?.()\n`)}}}}},WD=({injectResponse:X="",normalize:Y=!1,validator:$})=>({composeValidation:(Z,Q=`c.${Z}`)=>`c.set.status = 422; throw new ValidationError('${Z}', validator.${Z}, ${Q})`,composeResponseValidation:(Z="r")=>{let Q="\n"+X+"\n";Q+=`if(${Z} instanceof ElysiaCustomStatusResponse) {
			c.set.status = ${Z}.code
			${Z} = ${Z}.response
		}

		const isResponse = ${Z} instanceof Response\n\n`,Q+="switch(c.set.status) {\n";for(let[W,J]of Object.entries($.response)){if(Q+=`\tcase ${W}:
				if (!isResponse) {\n`,Y&&"Clean"in J&&!F8(J))Q+=`${Z} = validator.response['${W}'].Clean(${Z})\n`;Q+=`if(validator.response['${W}'].Check(${Z}) === false) {
					c.set.status = 422

					throw new ValidationError('response', validator.response['${W}'], ${Z})
				}

				c.set.status = ${W}
			}

			break\n\n`}return Q+="\n}\n",Q}}),_m=Symbol.for("TypeBox.Kind"),Z2=(X,Y)=>{if(!Y)return;if(Y.type==="object"){let $=Y.properties;if(!$)return!1;for(let Z of Object.keys($)){let Q=$[Z];if(X in Q)return!0;if(Q.type==="object"){if(Z2(X,Q))return!0}else if(Q.anyOf){for(let W=0;W<Q.anyOf.length;W++)if(Z2(X,Q.anyOf[W]))return!0}}return!1}return X in Y},y5=Symbol.for("TypeBox.Transform"),Q2=(X)=>{if(!X)return;if(X.type==="object"&&X.properties){let Y=X.properties;for(let $ of Object.keys(Y)){let Z=Y[$];if(Z.type==="object"){if(Q2(Z))return!0}else if(Z.anyOf){for(let Q=0;Q<Z.anyOf.length;Q++)if(Q2(Z.anyOf[Q]))return!0}if(y5 in Z)return!0}return!1}return y5 in X||X.properties&&y5 in X.properties},JD=/(?:return|=>) \S+\(/g,W2=(X)=>{return(X?.fn??X).constructor.name==="AsyncFunction"},Z1=(X)=>{let Y=X?.fn??X;if(Y.constructor.name==="AsyncFunction")return!0;let $=Y.toString();if($.includes("=> response.clone("))return!1;if($.includes("await"))return!0;if($.includes("async"))return!0;return!!$.match(JD)},K7=(X)=>{let Y=X?.fn??X;return Y.constructor.name==="AsyncGeneratorFunction"||Y.constructor.name==="GeneratorFunction"},zD=({app:X,path:Y,method:$,localHook:Z,hooks:Q,validator:W,handler:J,allowMeta:z=!1,inference:M})=>{let B=typeof J==="function";if(!B){if(J=u0(J,{headers:X.setHeaders??{}}),Q.parse.length===0&&Q.transform.length===0&&Q.beforeHandle.length===0&&Q.afterHandle.length===0)return Function("a","return function () { return a.clone() }")(J)}let U=B?"handler(c)":"handler",A=Q.afterResponse.length>0,w=Q.trace.length>0,G="";if(M=lZ(Object.assign(Z,{handler:J}),M),M.server)G+=`\nObject.defineProperty(c, 'server', {
			get: function() { return getServer() }
		})\n`;if(M.body)G+="let isParsing = false\n";W.createBody?.(),W.createQuery?.(),W.createHeaders?.(),W.createParams?.(),W.createCookie?.(),W.createResponse?.();let H=M.query||!!W.query,q=$!=="$INTERNALWS"&&$!=="GET"&&$!=="HEAD"&&(M.body||!!W.body||Q.parse.length),_=X.setHeaders,R=_&&!!Object.keys(_).length,S=M.headers||W.headers,C=M.cookie||!!W.cookie,d=C?$Q({validator:W.cookie,defaultConfig:X.config.cookie,dynamic:!!X.config.aot,config:W.cookie?.config??{},models:X.definitions.type}):void 0,h=d?.config,k="";if(h?.sign){if(!h.secrets)throw new Error(`t.Cookie required secret which is not set in (${$}) ${Y}.`);let b=!h.secrets?void 0:typeof h.secrets==="string"?h.secrets:h.secrets[0];if(k+=`const _setCookie = c.set.cookie
		if(_setCookie) {`,h.sign===!0)k+=`for(const [key, cookie] of Object.entries(_setCookie)) {
				c.set.cookie[key].value = await signCookie(cookie.value, '${b}')
			}`;else for(let K of h.sign)k+=`if(_setCookie['${K}']?.value) { c.set.cookie['${K}'].value = await signCookie(_setCookie['${K}'].value, '${b}') }\n`;k+="}\n"}let x0=X.config.normalize,{composeValidation:T,composeResponseValidation:e}=WD({normalize:x0,validator:W});if(S)G+=QD?"c.headers = c.request.headers.toJSON()\n":`c.headers = {}
                for (const [key, value] of c.request.headers.entries())
					c.headers[key] = value
				`;if(C){let b=(I,v)=>{let u=h?.[I]??v;if(!u)return typeof v==="string"?`${I}: "${v}",`:`${I}: ${v},`;if(typeof u==="string")return`${I}: '${u}',`;if(u instanceof Date)return`${I}: new Date(${u.getTime()}),`;return`${I}: ${u},`},K=h?`{
			secrets: ${h.secrets!==void 0?typeof h.secrets==="string"?`'${h.secrets}'`:"["+h.secrets.reduce((I,v)=>I+`'${v}',`,"")+"]":"undefined"},
			sign: ${h.sign===!0?!0:h.sign!==void 0?"["+h.sign.reduce((I,v)=>I+`'${v}',`,"")+"]":"undefined"},
			${b("domain")}
			${b("expires")}
			${b("httpOnly")}
			${b("maxAge")}
			${b("path","/")}
			${b("priority")}
			${b("sameSite")}
			${b("secure")}
		}`:"undefined";if(S)G+=`\nc.cookie = await parseCookie(c.set, c.headers.cookie, ${K})\n`;else G+=`\nc.cookie = await parseCookie(c.set, c.request.headers.get('cookie'), ${K})\n`}if(H){let b=[];if(W.query&&W.query.schema.type==="object"){let K=W.query.schema.properties;if(!F8(W.query))for(let[I,v]of Object.entries(K)){let u=v;if(u&&BQ.optional in u&&u.type==="array"&&u.items)u=u.items;let{type:U1,anyOf:$0}=u,N1=U1==="array"||$0?.some((l0)=>l0.type==="string"&&l0.format==="ArrayString");b.push({key:I,isArray:N1,isNestedObjectArray:N1&&u.items?.type==="object"||!!u.items?.anyOf?.some((l0)=>l0.type==="object"||l0.type==="array"),isObject:U1==="object"||$0?.some((l0)=>l0.type==="string"&&l0.format==="ArrayString"),anyOf:!!$0})}}if(!b.length)G+=`if(c.qi === -1) {
				c.query = {}
			} else {
				c.query = parseQueryFromURL(c.url.slice(c.qi + 1))
			}`;else G+=`if(c.qi !== -1) {
				let url = '&' + c.url.slice(c.qi + 1)

				${b.map(({key:K,isArray:I,isObject:v,isNestedObjectArray:u,anyOf:U1},$0)=>{let N1=`${$0===0?"let":""} memory = url.indexOf('&${K}=')
							let a${$0}\n`;if(I)return N1+(u?`while (memory !== -1) {
											const start = memory + ${K.length+2}
											memory = url.indexOf('&', start)

											if(a${$0} === undefined)
												a${$0} = ''
											else
												a${$0} += ','

											let temp

											if(memory === -1) temp = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
											else temp = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

											const charCode = temp.charCodeAt(0)
											if(charCode !== 91 && charCode !== 123)
												temp = '"' + temp + '"'

											a${$0} += temp

											if(memory === -1) break

											memory = url.indexOf('&${K}=', memory)
											if(memory === -1) break
										}

										try {
										    if(a${$0}.charCodeAt(0) === 91)
												a${$0} = JSON.parse(a${$0})
											else
												a${$0} = JSON.parse('[' + a${$0} + ']')
										} catch {}\n`:`while (memory !== -1) {
											const start = memory + ${K.length+2}
											memory = url.indexOf('&', start)

											if(a${$0} === undefined)
												a${$0} = []

											if(memory === -1) {
												a${$0}.push(decodeURIComponent(url.slice(start)).replace(/\\+/g, ' '))
												break
											}
											else a${$0}.push(decodeURIComponent(url.slice(start, memory)).replace(/\\+/g, ' '))

											memory = url.indexOf('&${K}=', memory)
											if(memory === -1) break
										}\n`);if(v)return N1+`if (memory !== -1) {
										const start = memory + ${K.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${$0} = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
										else a${$0} = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

										if (a${$0} !== undefined) {
											try {
												a${$0} = JSON.parse(a${$0})
											} catch {}
										}
									}`;return N1+`if (memory !== -1) {
										const start = memory + ${K.length+2}
										memory = url.indexOf('&', start)

										if(memory === -1) a${$0} = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
										else {
											a${$0} = decodeURIComponent(url.slice(start, memory).replace(/\\+/g, ' '))

											${U1?`
											let deepMemory = url.indexOf('&${K}=', memory)

											if(deepMemory !== -1) {
												a${$0} = [a${$0}]
												let first = true

												while(true) {
													const start = deepMemory + ${K.length+2}
													if(first)
														first = false
													else
														deepMemory = url.indexOf('&', start)

													let value
													if(deepMemory === -1) value = decodeURIComponent(url.slice(start).replace(/\\+/g, ' '))
													else value = decodeURIComponent(url.slice(start, deepMemory).replace(/\\+/g, ' '))

													const vStart = value.charCodeAt(0)
													const vEnd = value.charCodeAt(value.length - 1)

													if((vStart === 91 && vEnd === 93) || (vStart === 123 && vEnd === 125))
														try {
															a${$0}.push(JSON.parse(value))
														} catch {
														 	a${$0}.push(value)
														}

													if(deepMemory === -1) break
												}
											}
												`:""}
										}
									}`}).join("\n")}

				c.query = {
					${b.map(({key:K},I)=>`'${K}': a${I}`).join(", ")}
				}
			} else {
				c.query = {}
			}`}if(w)G+="\nconst id = c[ELYSIA_REQUEST_ID]\n";let n=o5({trace:Q.trace,addFn:(b)=>{G+=b}});G+="\ntry {\n";let H0=typeof J==="function"&&Z1(J),e0=w||Q.afterResponse.length>0?"c.response = ":"",X8=C||q||H0||Q.parse.length>0||Q.afterHandle.some(Z1)||Q.beforeHandle.some(Z1)||Q.transform.some(Z1)||Q.mapResponse.some(Z1),p6=(typeof J==="function"?K7(J):!1)||Q.beforeHandle.some(K7)||Q.afterHandle.some(K7)||Q.transform.some(K7),v0=M.cookie||M.set||S||w||W.response||B&&R||p6,t=", c.request";G+=`c.route = \`${Y}\`\n`;let A9=n("parse",{total:Q.parse.length});if(q){let b=Q.parse.length||M.body||W.body;if(G+="isParsing = true\n",Q.type&&!Q.parse.length)switch(Q.type){case"json":case"application/json":if(a1(W.body))G+="try { c.body = await c.request.json() } catch {}";else G+="c.body = await c.request.json()";break;case"text":case"text/plain":G+="c.body = await c.request.text()\n";break;case"urlencoded":case"application/x-www-form-urlencoded":G+="c.body = parseQuery(await c.request.text())\n";break;case"arrayBuffer":case"application/octet-stream":G+="c.body = await c.request.arrayBuffer()\n";break;case"formdata":case"multipart/form-data":if(G+="c.body = {}\n",a1(W.body))G+="let form; try { form = await c.request.formData() } catch {}";else G+="const form = await c.request.formData()";G+=`\nif(form)
						for (const key of form.keys()) {
							if (c.body[key])
								continue

							const value = form.getAll(key)
							if (value.length === 1)
								c.body[key] = value[0]
							else c.body[key] = value
						} else form = {}\n`;break}else if(b){if(G+="\n",G+=S?"let contentType = c.headers['content-type']":"let contentType = c.request.headers.get('content-type')",G+=`
				if (contentType) {
					const index = contentType.indexOf(';')
					if (index !== -1) contentType = contentType.substring(0, index)\n
					c.contentType = contentType\n`,Q.parse.length){G+="let used = false\n";let K=n("parse",{total:Q.parse.length});for(let I=0;I<Q.parse.length;I++){let v=K.resolveChild(Q.parse[I].fn.name),u=`bo${I}`;if(I!==0)G+="if(!used) {\n";if(G+=`let ${u} = parse[${I}](c, contentType)\n`,G+=`if(${u} instanceof Promise) ${u} = await ${u}\n`,G+=`if(${u} !== undefined) { c.body = ${u}; used = true }\n`,v(),I!==0)G+="}"}K.resolve()}if(G+="\ndelete c.contentType\n",Q.parse.length)G+="if (!used) {";if(Q.type&&!Array.isArray(Q.type))switch(Q.type){case"json":case"application/json":if(a1(W.body))G+="try { c.body = await c.request.json() } catch {}";else G+="c.body = await c.request.json()";break;case"text":case"text/plain":G+="c.body = await c.request.text()\n";break;case"urlencoded":case"application/x-www-form-urlencoded":G+="c.body = parseQuery(await c.request.text())\n";break;case"arrayBuffer":case"application/octet-stream":G+="c.body = await c.request.arrayBuffer()\n";break;case"formdata":case"multipart/form-data":G+=`c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}\n`;break}else G+=`
					switch (contentType) {
						case 'application/json':
							${a1(W.body)?"try { c.body = await c.request.json() } catch {}":"c.body = await c.request.json()"}
							break

						case 'text/plain':
							c.body = await c.request.text()
							break

						case 'application/x-www-form-urlencoded':
							c.body = parseQuery(await c.request.text())
							break

						case 'application/octet-stream':
							c.body = await c.request.arrayBuffer();
							break

						case 'multipart/form-data':
							c.body = {}

							const form = await c.request.formData()
							for (const key of form.keys()) {
								if (c.body[key])
									continue

								const value = form.getAll(key)
								if (value.length === 1)
									c.body[key] = value[0]
								else c.body[key] = value
							}

							break
					}`;if(Q.parse.length)G+="}";G+="}\n"}G+="\nisParsing = false\n"}if(A9.resolve(),Q?.transform){let b=n("transform",{total:Q.transform.length});if(Q.transform.length)G+="\nlet transformed\n";for(let K=0;K<Q.transform.length;K++){let I=Q.transform[K],v=b.resolveChild(I.fn.name);if(G+=Z1(I)?`transformed = await transform[${K}](c)\n`:`transformed = transform[${K}](c)\n`,I.subType==="mapDerive")G+=`if(transformed instanceof ElysiaCustomStatusResponse)
					throw transformed
				else {
					transformed.request = c.request
					transformed.store = c.store
					transformed.qi = c.qi
					transformed.path = c.path
					transformed.url = c.url
					transformed.redirect = c.redirect
					transformed.set = c.set
					transformed.error = c.error

					c = transformed
			}`;else G+=`if(transformed instanceof ElysiaCustomStatusResponse)
					throw transformed
				else
					Object.assign(c, transformed)\n`;v()}b.resolve()}if(W){if(G+="\n",W.headers){if(x0&&"Clean"in W.headers&&!F8(W.headers))G+="c.headers = validator.headers.Clean(c.headers);\n";if(Z2("default",W.headers.schema))for(let[b,K]of Object.entries(Y0.Default(W.headers.schema,{}))){let I=typeof K==="object"?JSON.stringify(K):typeof K==="string"?`'${K}'`:K;if(I!==void 0)G+=`c.headers['${b}'] ??= ${I}\n`}if(a1(W.headers))G+="if(isNotEmpty(c.headers)) {";if(G+=`if(validator.headers.Check(c.headers) === false) {
				${T("headers")}
			}`,Q2(W.headers.schema))G+="c.headers = validator.headers.Decode(c.headers)\n";if(a1(W.headers))G+="}"}if(W.params){if(Z2("default",W.params.schema))for(let[b,K]of Object.entries(Y0.Default(W.params.schema,{}))){let I=typeof K==="object"?JSON.stringify(K):typeof K==="string"?`'${K}'`:K;if(I!==void 0)G+=`c.params['${b}'] ??= ${I}\n`}if(G+=`if(validator.params.Check(c.params) === false) {
				${T("params")}
			}`,Q2(W.params.schema))G+="\nc.params = validator.params.Decode(c.params)\n"}if(W.query){if(x0&&"Clean"in W.query&&!F8(W.query))G+="c.query = validator.query.Clean(c.query);\n";if(Z2("default",W.query.schema))for(let[b,K]of Object.entries(Y0.Default(W.query.schema,{}))){let I=typeof K==="object"?JSON.stringify(K):typeof K==="string"?`'${K}'`:K;if(I!==void 0)G+=`if(c.query['${b}'] === undefined) c.query['${b}'] = ${I}\n`}if(a1(W.query))G+="if(isNotEmpty(c.query)) {";if(G+=`if(validator.query.Check(c.query) === false) {
          		${T("query")}
			}`,Q2(W.query.schema))G+="\nc.query = validator.query.Decode(Object.assign({}, c.query))\n";if(a1(W.query))G+="}"}if(W.body){if(x0&&"Clean"in W.body&&!F8(W.body))G+="c.body = validator.body.Clean(c.body);\n";let b=Q2(W.body.schema);if(b||a1(W.body))G+='\nconst isNotEmptyObject = c.body && (typeof c.body === "object" && isNotEmpty(c.body))\n';if(Z2("default",W.body.schema)){let K=Y0.Default(W.body.schema,W.body.schema.type==="object"?{}:void 0),I=typeof K==="object"?JSON.stringify(K):typeof K==="string"?`'${K}'`:K;if(G+=`if(validator.body.Check(c.body) === false) {
					if (typeof c.body === 'object') {
						c.body = Object.assign(${I}, c.body)
					} else { c.body = ${I} }`,a1(W.body))G+=`
					    if(isNotEmptyObject && validator.body.Check(c.body) === false) {
            				${T("body")}
             			}
                    }`;else G+=`
    				if(validator.body.Check(c.body) === false) {
        				${T("body")}
         			}
                }`}else if(a1(W.body))G+=`if(isNotEmptyObject && validator.body.Check(c.body) === false) {
         			${T("body")}
          		}`;else G+=`if(validator.body.Check(c.body) === false) {
         			${T("body")}
          		}`;if(b)G+="\nif(isNotEmptyObject) c.body = validator.body.Decode(c.body)\n"}if(C8(d?.schema?.properties??d?.schema?.schema??{})){if(G+=`const cookieValue = {}
    			for(const [key, value] of Object.entries(c.cookie))
    				cookieValue[key] = value.value\n`,Z2("default",d.schema))for(let[b,K]of Object.entries(Y0.Default(d.schema,{})))G+=`cookieValue['${b}'] = ${typeof K==="object"?JSON.stringify(K):K}\n`;if(a1(W.cookie))G+="if(isNotEmpty(c.cookie)) {";if(G+=`if(validator.cookie.Check(cookieValue) === false) {
				${T("cookie","cookieValue")}
			}`,Q2(W.cookie.schema))G+=`\nfor(const [key, value] of Object.entries(validator.cookie.Decode(cookieValue)))
					c.cookie[key].value = value\n`;if(a1(W.cookie))G+="}"}}if(Q?.beforeHandle){let b=n("beforeHandle",{total:Q.beforeHandle.length}),K=!1;for(let I=0;I<Q.beforeHandle.length;I++){let v=Q.beforeHandle[I],u=b.resolveChild(v.fn.name),U1=K4(v);if(v.subType==="resolve"||v.subType==="mapResolve"){if(!K)K=!0,G+="\nlet resolved\n";if(G+=Z1(v)?`resolved = await beforeHandle[${I}](c);\n`:`resolved = beforeHandle[${I}](c);\n`,v.subType==="mapResolve")G+=`if(resolved instanceof ElysiaCustomStatusResponse)
						throw resolved
					else {
						resolved.request = c.request
						resolved.store = c.store
						resolved.qi = c.qi
						resolved.path = c.path
						resolved.url = c.url
						resolved.redirect = c.redirect
						resolved.set = c.set
						resolved.error = c.error

						c = resolved
					}`;else G+=`if(resolved instanceof ElysiaCustomStatusResponse)
						throw resolved
					else
						Object.assign(c, resolved)\n`}else if(!U1)G+=Z1(v)?`await beforeHandle[${I}](c);\n`:`beforeHandle[${I}](c);\n`,u();else{if(G+=Z1(v)?`be = await beforeHandle[${I}](c);\n`:`be = beforeHandle[${I}](c);\n`,u("be"),G+="if(be !== undefined) {\n",b.resolve(),Q.afterHandle?.length){n("handle",{name:B?J.name:void 0}).resolve();let N1=n("afterHandle",{total:Q.afterHandle.length});for(let l0=0;l0<Q.afterHandle.length;l0++){let S6=Q.afterHandle[l0],N=K4(S6),x=N1.resolveChild(S6.fn.name);if(G+="c.response = be\n",!N)G+=Z1(S6.fn)?`await afterHandle[${l0}](c, be)\n`:`afterHandle[${l0}](c, be)\n`;else G+=Z1(S6.fn)?`af = await afterHandle[${l0}](c)\n`:`af = afterHandle[${l0}](c)\n`,G+="if(af !== undefined) { c.response = be = af }\n";x("af")}N1.resolve()}if(W.response)G+=e("be");let $0=n("mapResponse",{total:Q.mapResponse.length});if(Q.mapResponse.length){G+="\nc.response = be\n";for(let N1=0;N1<Q.mapResponse.length;N1++){let l0=Q.mapResponse[N1],S6=$0.resolveChild(l0.fn.name);G+=`\nif(mr === undefined) {
							mr = ${W2(l0)?"await":""} onMapResponse[${N1}](c)
							if(mr !== undefined) be = c.response = mr
						}\n`,S6()}}$0.resolve(),G+=k,G+=`return mapEarlyResponse(${e0} be, c.set ${t})}\n`}}b.resolve()}if(Q?.afterHandle.length){let b=n("handle",{name:B?J.name:void 0});if(Q.afterHandle.length)G+=H0?`let r = c.response = await ${U};\n`:`let r = c.response = ${U};\n`;else G+=H0?`let r = await ${U};\n`:`let r = ${U};\n`;b.resolve();let K=n("afterHandle",{total:Q.afterHandle.length});for(let v=0;v<Q.afterHandle.length;v++){let u=Q.afterHandle[v],U1=K4(u),$0=K.resolveChild(u.fn.name);if(!U1)G+=Z1(u.fn)?`await afterHandle[${v}](c)\n`:`afterHandle[${v}](c)\n`,$0();else if(G+=Z1(u.fn)?`af = await afterHandle[${v}](c)\n`:`af = afterHandle[${v}](c)\n`,$0("af"),W.response)G+="if(af !== undefined) {",K.resolve(),G+=e("af"),G+="c.response = af }";else G+="if(af !== undefined) {",K.resolve(),G+="c.response = af}\n"}if(K.resolve(),G+="r = c.response\n",W.response)G+=e();G+=k;let I=n("mapResponse",{total:Q.mapResponse.length});if(Q.mapResponse.length)for(let v=0;v<Q.mapResponse.length;v++){let u=Q.mapResponse[v],U1=I.resolveChild(u.fn.name);G+=`\nmr = ${W2(u)?"await":""} onMapResponse[${v}](c)
				if(mr !== undefined) r = c.response = mr\n`,U1()}if(I.resolve(),v0)G+=`return mapResponse(${e0} r, c.set ${t})\n`;else G+=`return mapCompactResponse(${e0} r ${t})\n`}else{let b=n("handle",{name:B?J.name:void 0});if(W.response||Q.mapResponse.length){if(G+=H0?`let r = await ${U};\n`:`let r = ${U};\n`,b.resolve(),W.response)G+=e();n("afterHandle").resolve();let K=n("mapResponse",{total:Q.mapResponse.length});if(Q.mapResponse.length){G+="\nc.response = r\n";for(let I=0;I<Q.mapResponse.length;I++){let v=Q.mapResponse[I],u=K.resolveChild(v.fn.name);G+=`\nif(mr === undefined) {
						mr = ${W2(v)?"await":""} onMapResponse[${I}](c)
    					if(mr !== undefined) r = c.response = mr
					}\n`,u()}}if(K.resolve(),G+=k,J instanceof Response)G+=M.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${e0} ${U}.clone(), c.set ${t})
				else
					return ${U}.clone()`:`return ${U}.clone()`,G+="\n";else if(v0)G+=`return mapResponse(${e0} r, c.set ${t})\n`;else G+=`return mapCompactResponse(${e0} r ${t})\n`}else if(C||w){G+=H0?`let r = await ${U};\n`:`let r = ${U};\n`,b.resolve(),n("afterHandle").resolve();let K=n("mapResponse",{total:Q.mapResponse.length});if(Q.mapResponse.length){G+="\nc.response = r\n";for(let I=0;I<Q.mapResponse.length;I++){let v=Q.mapResponse[I],u=K.resolveChild(v.fn.name);G+=`\nif(mr === undefined) {
							mr = ${W2(v)?"await":""} onMapResponse[${I}](c)
    						if(mr !== undefined) r = c.response = mr
						}\n`,u()}}if(K.resolve(),G+=k,v0)G+=`return mapResponse(${e0} r, c.set ${t})\n`;else G+=`return mapCompactResponse(${e0} r ${t})\n`}else{b.resolve();let K=H0?`await ${U}`:U;if(n("afterHandle").resolve(),J instanceof Response)G+=M.set?`if(
					isNotEmpty(c.set.headers) ||
					c.set.status !== 200 ||
					c.set.redirect ||
					c.set.cookie
				)
					return mapResponse(${e0} ${U}.clone(), c.set ${t})
				else
					return ${U}.clone()`:`return ${U}.clone()`,G+="\n";else if(v0)G+=`return mapResponse(${e0} ${K}, c.set ${t})\n`;else G+=`return mapCompactResponse(${e0} ${K} ${t})\n`}}if(G+="\n} catch(error) {",q)G+="\nif(isParsing) error = new ParseError()\n";if(!X8)G+="\nreturn (async () => {\n";if(G+="\nconst set = c.set\nif (!set.status || set.status < 300) set.status = error?.status || 500\n",w)for(let b=0;b<Q.trace.length;b++)G+=`report${b}?.resolve(error);reportChild${b}?.(error);\n`;let Y6=n("error",{total:Q.error.length});if(Q.error.length){G+=`
				c.error = error
				if(error instanceof TypeBoxError) {
					c.code = "VALIDATION"
					c.set.status = 422
				} else
					c.code = error.code ?? error[ERROR_CODE] ?? "UNKNOWN"
				let er
			`;for(let b=0;b<Q.error.length;b++){let K=Y6.resolveChild(Q.error[b].fn.name);if(Z1(Q.error[b]))G+=`\ner = await handleErrors[${b}](c)\n`;else G+=`\ner = handleErrors[${b}](c)\nif (er instanceof Promise) er = await er\n`;K();let I=n("mapResponse",{total:Q.mapResponse.length});if(Q.mapResponse.length)for(let v=0;v<Q.mapResponse.length;v++){let u=Q.mapResponse[v],U1=I.resolveChild(u.fn.name);G+=`\nc.response = er\n
							er = ${W2(u)?"await":""} onMapResponse[${v}](c)
							if(er instanceof Promise) er = await er\n`,U1()}if(I.resolve(),G+=`er = mapEarlyResponse(er, set ${t})\n`,G+="if (er) {",w){for(let v=0;v<Q.trace.length;v++)G+=`\nreport${v}.resolve()\n`;Y6.resolve()}G+="return er\n}\n"}}if(Y6.resolve(),G+="return handleError(c, error, true)\n",!X8)G+="})()";if(G+="}",A||w){if(G+=" finally { ",!X8)G+=";(async () => {";let b=n("afterResponse",{total:Q.afterResponse.length});if(A)for(let K=0;K<Q.afterResponse.length;K++){let I=b.resolveChild(Q.afterResponse[K].fn.name);G+=`\nawait afterResponse[${K}](c);\n`,I()}if(b.resolve(),!X8)G+="})();";G+="}"}G=`const {
		handler,
		handleError,
		hooks: {
			transform,
			resolve,
			beforeHandle,
			afterHandle,
			mapResponse: onMapResponse,
			parse,
			error: handleErrors,
			afterResponse,
			trace: _trace
		},
		validator,
		utils: {
			mapResponse,
			mapCompactResponse,
			mapEarlyResponse,
			parseQuery,
			parseQueryFromURL,
			isNotEmpty
		},
		error: {
			NotFoundError,
			ValidationError,
			InternalServerError,
			ParseError
		},
		schema,
		definitions,
		ERROR_CODE,
		parseCookie,
		signCookie,
		decodeURIComponent,
		ElysiaCustomStatusResponse,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer,
		TypeBoxError
	} = hooks

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)

	return ${X8?"async":""} function handle(c) {
		${Q.beforeHandle.length?"let be":""}
		${Q.afterHandle.length?"let af":""}
		${Q.mapResponse.length?"let mr":""}

		${z?"c.schema = schema; c.defs = definitions":""}
		${G}
	}`;try{return Function("hooks",G)({handler:J,hooks:TZ(Q),validator:W,handleError:X.handleError,utils:{mapResponse:u0,mapCompactResponse:N6,mapEarlyResponse:Q1,parseQuery:c5,parseQueryFromURL:MQ,isNotEmpty:C8},error:{NotFoundError:I7,ValidationError:O0,InternalServerError:JQ,ParseError:zQ},schema:X.router.history,definitions:X.definitions.type,ERROR_CODE:b7,parseCookie:rZ,signCookie:j7,decodeURIComponent:$D.default,ElysiaCustomStatusResponse:U8,ELYSIA_TRACE:l5,ELYSIA_REQUEST_ID:E7,getServer:()=>X.getServer(),TypeBoxError:l})}catch{let b=TZ(Q);console.log("[Composer] failed to generate optimized handler"),console.log("Please report the following to SaltyAom privately as it may include sensitive information about your codebase:"),console.log("---"),console.log({handler:typeof J==="function"?J.toString():J,hooks:{...b,transform:b?.transform?.map?.((K)=>K.toString()),resolve:b?.resolve?.map?.((K)=>K.toString()),beforeHandle:b?.beforeHandle?.map?.((K)=>K.toString()),afterHandle:b?.afterHandle?.map?.((K)=>K.toString()),mapResponse:b?.mapResponse?.map?.((K)=>K.toString()),parse:b?.parse?.map?.((K)=>K.toString()),error:b?.error?.map?.((K)=>K.toString()),afterResponse:b?.afterResponse?.map?.((K)=>K.toString()),stop:b?.stop?.map?.((K)=>K.toString())},validator:W,definitions:X.definitions.type}),console.log("---"),process.exit(1)}},vZ=(X)=>{let Y=X.config.handler?.standardHostname??!0,$="",Z="",Q=X.setHeaders;for(let H of Object.keys(X.singleton.decorator))$+=`,${H}: app.singleton.decorator.${H}`;let W=X.router,J=X.event.trace.length>0,z=`
	const route = router.find(request.method, path) ${W.http.root.ALL?'?? router.find("ALL", path)':""}

	if (route === null)
		return ${X.event.error.length?"app.handleError(ctx, notFound)":X.event.request.length?`new Response(error404Message, {
					status: ctx.set.status === 200 ? 404 : ctx.set.status,
					headers: ctx.set.headers
				})`:"error404.clone()"}

	ctx.params = route.params\n`;z+=`if(route.store.handler) return route.store.handler(ctx)
	return (route.store.handler = route.store.compile())(ctx)\n`;let M="";for(let[H,{code:q,all:_,static:R}]of Object.entries(W.static.http.map)){if(R)M+=`case '${H}':\nswitch(request.method) {\n${q}\n${_??"default: break map"}}\n\n`;M+=`case '${H}':\nswitch(request.method) {\n${q}\n${_??"default: break map"}}\n\n`}let B=X.event.request.some(Z1);if(Z+=`const {
		app,
		mapEarlyResponse,
		NotFoundError,
		randomId,
		handleError,
		error,
		redirect,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID,
		getServer
	} = data

	const store = app.singleton.store
	const staticRouter = app.router.static.http
	const st = staticRouter.handlers
	const wsRouter = app.router.ws
	const router = app.router.http
	const trace = app.event.trace.map(x => typeof x === 'function' ? x : x.fn)

	const notFound = new NotFoundError()
	const hoc = app.extender.higherOrderFunctions.map(x => x.fn)

	${X.event.request.length?"const onRequest = app.event.request.map(x => x.fn)":""}
	${X.event.error.length?"":`\nconst error404Message = notFound.message.toString()
	const error404 = new Response(error404Message, { status: 404 });\n`}

	${X.event.trace.length?`const ${X.event.trace.map((H,q)=>`tr${q} = app.event.trace[${q}].fn`).join(",")}`:""}

	${B?"async":""} function map(request) {\n`,X.event.request.length)Z+="let re";if(Z+=`\nconst url = request.url
		const s = url.indexOf('/', ${Y?11:7})
		const qi = url.indexOf('?', s + 1)
		let path
		if(qi === -1)
			path = url.substring(s)
		else
			path = url.substring(s, qi)\n`,Z+=`${J?"const id = randomId()":""}
		const ctx = {
			request,
			store,
			qi,
			path,
			url,
			redirect,
			set: {
				headers: ${Object.keys(Q??{}).length?"Object.assign({}, app.setHeaders)":"{}"},
				status: 200
			},
			error
			${X.inference.server?`, get server() {
							return getServer()
						}`:""}
			${J?",[ELYSIA_REQUEST_ID]: id":""}
			${$}
		}\n`,X.event.trace.length)Z+=`\nctx[ELYSIA_TRACE] = [${X.event.trace.map((H,q)=>`tr${q}(ctx)`).join(",")}]\n`;let U=o5({context:"ctx",trace:X.event.trace,addFn(H){Z+=H}})("request",{attribute:"ctx",total:X.event.request.length});if(X.event.request.length){Z+="\n try {\n";for(let H=0;H<X.event.request.length;H++){let q=X.event.request[H],_=K4(q),R=Z1(q),S=U.resolveChild(X.event.request[H].fn.name);if(_)Z+=`re = mapEarlyResponse(
					${R?"await":""} onRequest[${H}](ctx),
					ctx.set,
					request
				)\n`,S("re"),Z+="if(re !== undefined) return re\n";else Z+=`${R?"await":""} onRequest[${H}](ctx)\n`,S()}Z+=`} catch (error) {
			return app.handleError(ctx, error)
		}`}U.resolve();let A=X.router.static.ws,w=X.router.ws;if(Object.keys(A).length||w.history.length){Z+=`
			if(request.method === 'GET') {
				switch(path) {`;for(let[H,q]of Object.entries(A))Z+=`
					case '${H}':
						if(request.headers.get('upgrade') === 'websocket')
							return st[${q}](ctx)

						break`;Z+=`
				default:
					if(request.headers.get('upgrade') === 'websocket') {
						const route = wsRouter.find('ws', path)

						if(route) {
							ctx.params = route.params

							if(route.store.handler)
							    return route.store.handler(ctx)

							return (route.store.handler = route.store.compile())(ctx)
						}
					}

					break
			}
		}\n`}if(Z+=`
		map: switch(path) {
			${M}

			default:
				break
		}

		${z}
	}\n`,X.extender.higherOrderFunctions.length){let H="map";for(let q=0;q<X.extender.higherOrderFunctions.length;q++)H=`hoc[${q}](${H}, request)`;Z+=`return function hocMap(request) { return ${H}(request) }`}else Z+="return map";let G=UQ(X);return X.handleError=G,Function("data",Z)({app:X,mapEarlyResponse:Q1,NotFoundError:I7,randomId:WQ,handleError:G,error:YD,redirect:QQ,ELYSIA_TRACE:l5,ELYSIA_REQUEST_ID:E7,getServer:()=>X.getServer()})},UQ=(X)=>{let Y=X.event,$="";$+=`const {
		app: { event: { error: onErrorContainer, afterResponse: resContainer, mapResponse: _onMapResponse, trace: _trace } },
		mapResponse,
		ERROR_CODE,
		ElysiaCustomStatusResponse,
		ELYSIA_TRACE,
		ELYSIA_REQUEST_ID
	} = inject

	const trace = _trace.map(x => typeof x === 'function' ? x : x.fn)
	const onMapResponse = []

	for(let i = 0; i < _onMapResponse.length; i++)
		onMapResponse.push(_onMapResponse[i].fn ?? _onMapResponse[i])

	delete _onMapResponse

	const onError = onErrorContainer.map(x => x.fn)
	const res = resContainer.map(x => x.fn)

	return ${X.event.error.find(Z1)||X.event.mapResponse.find(Z1)?"async":""} function(context, error, skipGlobal) {`;let Z=X.event.trace.length>0;if(Z)$+="\nconst id = context[ELYSIA_REQUEST_ID]\n";let Q=o5({context:"context",trace:Y.trace,addFn:(z)=>{$+=z}});$+=`
		const set = context.set
		let r

		if(!context.code)
			context.code = error.code ?? error[ERROR_CODE]

		if(!(context.error instanceof Error))
			context.error = error

		if(error instanceof ElysiaCustomStatusResponse) {
			error.status = error.code
			error.message = error.response
		}\n`;let W=Z||Y.afterResponse.length>0||Y.afterResponse.length>0?"context.response = ":"";for(let z=0;z<X.event.error.length;z++){let M=X.event.error[z],B=`${Z1(M)?"await ":""}onError[${z}](context)`;if($+="\nif(skipGlobal !== true) {\n",K4(M)){$+=`r = ${B}; if(r !== undefined) {
				if(r instanceof Response) return r

				if(r instanceof ElysiaCustomStatusResponse) {
					error.status = error.code
					error.message = error.response
				}

				if(set.status === 200) set.status = error.status\n`;let U=Q("mapResponse",{total:Y.mapResponse.length,name:"context"});if(Y.mapResponse.length)for(let A=0;A<Y.mapResponse.length;A++){let w=Y.mapResponse[A],G=U.resolveChild(w.fn.name);$+=`\ncontext.response = r
						r = ${W2(w)?"await":""} onMapResponse[${A}](context)\n`,G()}U.resolve(),$+=`return mapResponse(${W} r, set, context.request)}\n`}else $+=B+"\n";$+="\n}\n"}$+=`if(error.constructor.name === "ValidationError" || error.constructor.name === "TransformDecodeError") {
	    const reportedError = error.error ?? error
		set.status = reportedError.status ?? 422
		return new Response(
			reportedError.message,
			{
				headers: Object.assign(
					{ 'content-type': 'application/json'},
					set.headers
				),
				status: set.status
			}
		)
	} else {
		if(error.code && typeof error.status === "number")
			return new Response(
				error.message,
				{ headers: set.headers, status: error.status }
			)\n`;let J=Q("mapResponse",{total:Y.mapResponse.length,name:"context"});if(Y.mapResponse.length)for(let z=0;z<Y.mapResponse.length;z++){let M=Y.mapResponse[z],B=J.resolveChild(M.fn.name);$+=`\ncontext.response = error
			error = ${W2(M)?"await":""} onMapResponse[${z}](context)\n`,B()}return J.resolve(),$+=`\nreturn mapResponse(${W} error, set, context.request)\n}\n}`,Function("inject",$)({app:X,mapResponse:u0,ERROR_CODE:b7,ElysiaCustomStatusResponse:U8,ELYSIA_TRACE:l5,ELYSIA_REQUEST_ID:E7})},pZ=(X)=>async(Y)=>{let $=Y.url,Z=$.indexOf("/",11),Q=$.indexOf("?",Z+1),W=Q===-1?$.substring(Z):$.substring(Z,Q),J={cookie:{},status:200,headers:{}},z=Object.assign({},X.singleton.decorator,{set:J,store:X.singleton.store,request:Y,path:W,qi:Q,redirect:QQ});try{for(let R=0;R<X.event.request.length;R++){let S=X.event.request[R].fn,C=S(z);if(C instanceof Promise)C=await C;if(C=Q1(C,J),C)return z.response=C}let M=X.router.dynamic.find(Y.method,W)??X.router.dynamic.find("ALL",W);if(!M)throw new I7;let{handle:B,hooks:U,validator:A,content:w}=M.store,G;if(Y.method!=="GET"&&Y.method!=="HEAD")if(w)switch(w){case"application/json":G=await Y.json();break;case"text/plain":G=await Y.text();break;case"application/x-www-form-urlencoded":G=c5(await Y.text());break;case"application/octet-stream":G=await Y.arrayBuffer();break;case"multipart/form-data":G={};let R=await Y.formData();for(let S of R.keys()){if(G[S])continue;let C=R.getAll(S);if(C.length===1)G[S]=C[0];else G[S]=C}break}else{let R=Y.headers.get("content-type");if(R){let S=R.indexOf(";");if(S!==-1)R=R.slice(0,S);z.contentType=R;for(let C=0;C<U.parse.length;C++){let d=U.parse[C].fn,h=d(z,R);if(h instanceof Promise)h=await h;if(h){G=h;break}}if(delete z.contentType,G===void 0)switch(R){case"application/json":G=await Y.json();break;case"text/plain":G=await Y.text();break;case"application/x-www-form-urlencoded":G=c5(await Y.text());break;case"application/octet-stream":G=await Y.arrayBuffer();break;case"multipart/form-data":G={};let C=await Y.formData();for(let d of C.keys()){if(G[d])continue;let h=C.getAll(d);if(h.length===1)G[d]=h[0];else G[d]=h}break}}}z.body=G,z.params=M?.params||void 0,z.query=Q===-1?{}:MQ($.substring(Q+1)),z.headers={};for(let[R,S]of Y.headers.entries())z.headers[R]=S;let H=Object.assign({},X.config?.cookie,A?.cookie?.config),q=Y.headers.get("cookie");z.cookie=await rZ(z.set,q,H?{secrets:H.secrets!==void 0?typeof H.secrets==="string"?H.secrets:H.secrets.join(","):void 0,sign:H.sign===!0?!0:H.sign!==void 0?typeof H.sign==="string"?H.sign:H.sign.join(","):void 0}:void 0);for(let R=0;R<U.transform.length;R++){let S=U.transform[R],C=S.fn(z);if(S.subType==="derive")if(C instanceof Promise)Object.assign(z,await C);else Object.assign(z,C);else if(C instanceof Promise)await C}if(A){if(A.createHeaders?.()){let R={};for(let S in Y.headers)R[S]=Y.headers.get(S);if(A.headers.Check(R)===!1)throw new O0("header",A.headers,R)}else if(A.headers?.Decode)z.headers=A.headers.Decode(z.headers);if(A.createParams?.()?.Check(z.params)===!1)throw new O0("params",A.params,z.params);else if(A.params?.Decode)z.params=A.params.Decode(z.params);if(A.createQuery?.()?.Check(z.query)===!1)throw new O0("query",A.query,z.query);else if(A.query?.Decode)z.query=A.query.Decode(z.query);if(A.createCookie?.()){let R={};for(let[S,C]of Object.entries(z.cookie))R[S]=C.value;if(A.cookie.Check(R)===!1)throw new O0("cookie",A.cookie,R);else if(A.cookie?.Decode)R=A.cookie.Decode(R)}if(A.createBody?.()?.Check(G)===!1)throw new O0("body",A.body,G);else if(A.body?.Decode)z.body=A.body.Decode(G)}for(let R=0;R<U.beforeHandle.length;R++){let S=U.beforeHandle[R],C=S.fn(z);if(S.subType==="resolve"){if(C instanceof U8){let d=Q1(C,z.set);if(d)return z.response=d}if(C instanceof Promise)Object.assign(z,await C);else Object.assign(z,C);continue}else if(C instanceof Promise)C=await C;if(C!==void 0){z.response=C;for(let h=0;h<U.afterHandle.length;h++){let k=U.afterHandle[h].fn(z);if(k instanceof Promise)k=await k;if(k)C=k}let d=Q1(C,z.set);if(d)return z.response=d}}let _=B(z);if(_ instanceof Promise)_=await _;if(!U.afterHandle.length){let R=_ instanceof U8?_.code:J.status?typeof J.status==="string"?I4[J.status]:J.status:200,S=A?.createResponse?.()?.[R];if(S?.Check(_)===!1)throw new O0("response",S,_);else if(S?.Decode)_=S.Decode(_)}else{z.response=_;for(let R=0;R<U.afterHandle.length;R++){let S=U.afterHandle[R].fn(z);if(S instanceof Promise)S=await S;let C=Q1(S,z.set);if(C!==void 0){let d=A?.response?.[C.status];if(d?.Check(C)===!1)throw new O0("response",d,C);else if(d?.Decode)_=d.Decode(_);return z.response=C}}}if(z.set.cookie&&H?.sign){let R=!H.secrets?void 0:typeof H.secrets==="string"?H.secrets:H.secrets[0];if(H.sign===!0)for(let[S,C]of Object.entries(z.set.cookie))z.set.cookie[S].value=await j7(C.value,"${secret}");else{let S=A?.cookie?.schema?.properties;for(let C of H.sign){if(!(C in S))continue;if(z.set.cookie[C]?.value)z.set.cookie[C].value=await j7(z.set.cookie[C].value,R)}}}return z.response=u0(_,z.set)}catch(M){let B=M instanceof P7&&M.error?M.error:M;if(B.status)J.status=B.status;return X.handleError(z,B)}finally{for(let M of X.event.afterResponse)await M.fn(z)}},MD=(X)=>async(Y,$)=>{let Z=Object.assign(Y,{error:$,code:$.code});Z.set=Y.set;for(let Q=0;Q<X.event.error.length;Q++){let W=X.event.error[Q].fn(Z);if(W instanceof Promise)W=await W;if(W!==void 0&&W!==null)return Y.response=u0(W,Y.set)}return new Response(typeof $.cause==="string"?$.cause:$.message,{headers:Y.set.headers,status:$.status??500})};class J1{config;server=null;dependencies={};_routes={};_types={Prefix:"",Scoped:!1,Singleton:{},Definitions:{},Metadata:{}};_ephemeral={};_volatile={};static version=dZ;version=dZ;singleton={decorator:{},store:{},derive:{},resolve:{}};get store(){return this.singleton.store}get decorator(){return this.singleton.decorator}get _scoped(){return this.config.scoped}definitions={type:{},error:{}};extender={macros:[],higherOrderFunctions:[]};validator={global:null,scoped:null,local:null,getCandidate(){return F4(F4(this.global,this.scoped),this.local)}};event={start:[],request:[],parse:[],transform:[],beforeHandle:[],afterHandle:[],mapResponse:[],afterResponse:[],trace:[],error:[],stop:[]};telemetry={stack:void 0};router={http:new J2,ws:new J2,dynamic:new J2,static:{http:{static:{},handlers:[],map:{},all:""},ws:{}},history:[]};routeTree=new Map;get routes(){return this.router.history}getGlobalRoutes(){return this.router.history}inference={body:!1,cookie:!1,headers:!1,query:!1,set:!1,server:!1};getServer(){return this.server}_promisedModules;get promisedModules(){if(!this._promisedModules)this._promisedModules=new ZQ;return this._promisedModules}constructor(X={}){if(X.tags)if(!X.detail)X.detail={tags:X.tags};else X.detail.tags=X.tags;if(X.nativeStaticResponse===void 0)X.nativeStaticResponse=!0;if(this.config={},this.applyConfig(X??{}),X?.analytic&&(X?.name||X?.seed!==void 0))this.telemetry.stack=new Error().stack}env(X,Y=Bun?.env??process.env){if(f1(X,{dynamic:!0,additionalProperties:!0,coerce:!0}).Check(Y)===!1){let $=new O0("env",X,Y);throw new Error($.all.map((Z)=>Z.summary).join("\n"))}return this}wrap(X){return this.extender.higherOrderFunctions.push({checksum:C4(JSON.stringify({name:this.config.name,seed:this.config.seed,content:X.toString()})),fn:X}),this}applyMacro(X){if(this.extender.macros.length){let Y=aN({globalHook:this.event,localHook:X}),$={events:{global:this.event,local:X},onParse:Y("parse"),onTransform:Y("transform"),onBeforeHandle:Y("beforeHandle"),onAfterHandle:Y("afterHandle"),mapResponse:Y("mapResponse"),onAfterResponse:Y("afterResponse"),onError:Y("error")};for(let Z of this.extender.macros)rN(Z.fn($),X)}}applyConfig(X){return this.config={prefix:"",aot:!0,strictPath:!1,global:!1,analytic:!1,normalize:!0,...X,cookie:{path:"/",...X?.cookie},experimental:X?.experimental??{},seed:X?.seed===void 0?"":X?.seed},this}get models(){let X={};for(let[Y,$]of Object.entries(this.definitions.type))X[Y]=f1($);return X}add(X,Y,$,Z,{allowMeta:Q=!1,skipPrefix:W=!1}={allowMeta:!1,skipPrefix:!1}){if(Z=XD(Z),Y!==""&&Y.charCodeAt(0)!==47)Y="/"+Y;if(this.config.prefix&&!W&&!this.config.scoped)Y=this.config.prefix+Y;if(Z?.type)switch(Z.type){case"text":Z.type="text/plain";break;case"json":Z.type="application/json";break;case"formdata":Z.type="multipart/form-data";break;case"urlencoded":Z.type="application/x-www-form-urlencoded";break;case"arrayBuffer":Z.type="application/octet-stream";break;default:break}let J=this.definitions.type,z=!this.config.aot,M={...this.validator.getCandidate()},B={body:Z?.body??M?.body,headers:Z?.headers??M?.headers,params:Z?.params??M?.params,query:Z?.query??M?.query,cookie:Z?.cookie??M?.cookie,response:Z?.response??M?.response},U=()=>B.cookie?$Q({validator:B.cookie,defaultConfig:this.config.cookie,config:B.cookie?.config??{},dynamic:z,models:J}):void 0,A=this.config.normalize,w=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.schema===!0?{body:f1(B.body,{dynamic:z,models:J,normalize:A,additionalCoerce:bZ()}),headers:f1(B.headers,{dynamic:z,models:J,additionalProperties:!this.config.normalize,coerce:!0,additionalCoerce:$2()}),params:f1(B.params,{dynamic:z,models:J,coerce:!0,additionalCoerce:$2()}),query:f1(B.query,{dynamic:z,models:J,normalize:A,coerce:!0,additionalCoerce:$2()}),cookie:U(),response:jZ(B.response,{dynamic:z,models:J,normalize:A})}:{createBody(){if(this.body)return this.body;return this.body=f1(B.body,{dynamic:z,models:J,normalize:A,additionalCoerce:bZ()})},createHeaders(){if(this.headers)return this.headers;return this.headers=f1(B.headers,{dynamic:z,models:J,additionalProperties:!A,coerce:!0,additionalCoerce:$2()})},createParams(){if(this.params)return this.params;return this.params=f1(B.params,{dynamic:z,models:J,coerce:!0,additionalCoerce:$2()})},createQuery(){if(this.query)return this.query;return this.query=f1(B.query,{dynamic:z,models:J,coerce:!0,additionalCoerce:$2()})},createCookie(){if(this.cookie)return this.cookie;return this.cookie=U()},createResponse(){if(this.response)return this.response;return this.response=jZ(B.response,{dynamic:z,models:J,normalize:A})}},G=Y.endsWith("/")?Y.slice(0,Y.length-1):Y+"/";if(Z=M8(Z,M),Z.tags)if(!Z.detail)Z.detail={tags:Z.tags};else Z.detail.tags=Z.tags;if(C8(this.config.detail))Z.detail=y1(Object.assign({},this.config.detail),Z.detail);this.applyMacro(Z);let H=M8(this.event,Z);if(this.config.aot===!1){if(this.router.dynamic.add(X,Y,{validator:w,hooks:H,content:Z?.type,handle:$}),this.config.strictPath===!1)this.router.dynamic.add(X,G,{validator:w,hooks:H,content:Z?.type,handle:$});this.router.history.push({method:X,path:Y,composed:null,handler:$,hooks:H});return}let q=this.config.precompile===!0||typeof this.config.precompile==="object"&&this.config.precompile.compose===!0,_=f5(this.inference),R=typeof $!=="function"?hN($,H,this.setHeaders):void 0,S=typeof $!=="function"?mN($,H,this.setHeaders):void 0;if(this.config.nativeStaticResponse===!0&&S&&(X==="GET"||X==="ALL"))this.router.static.http.static[Y]=S();let C=()=>zD({app:this,path:Y,method:X,localHook:M8(Z),hooks:H,validator:w,handler:$,allowMeta:Q,inference:_}),d=q?C():(T)=>{return C()(T)},h=this.router.history.length;if(this.routeTree.has(X+Y))for(let T=0;T<this.router.history.length;T++){let e=this.router.history[T];if(e.path===Y&&e.method===X){let n=this.router.history.splice(T,1)[0];if(n&&this.routeTree.has(n?.method+n?.path))this.routeTree.delete(n.method+n.path)}}else this.routeTree.set(X+Y,h);this.router.history.push({method:X,path:Y,composed:d,handler:$,hooks:H});let k=this.router.static.http,x0={handler:q?d:void 0,compile:C};if(X==="$INTERNALWS"){let T=this.config.strictPath?void 0:Y.endsWith("/")?Y.slice(0,Y.length-1):Y+"/";if(Y.indexOf(":")===-1&&Y.indexOf("*")===-1){let e=k.handlers.length;if(k.handlers.push((n)=>(k.handlers[e]=C())(n)),this.router.static.ws[Y]=e,T)this.router.static.ws[T]=e}else if(this.router.ws.add("ws",Y,x0),T)this.router.ws.add("ws",T,x0);return}if(Y.indexOf(":")===-1&&Y.indexOf("*")===-1){let T=k.handlers.length;if(k.handlers.push(R??((n)=>(k.handlers[T]=C())(n))),!k.map[Y])k.map[Y]={code:""};let e=R?"":"ctx";if(X==="ALL")k.map[Y].all=`default: return st[${T}](${e})\n`;else k.map[Y].code=`case '${X}': return st[${T}](${e})\n${k.map[Y].code}`;if(!this.config.strictPath){if(!k.map[G])k.map[G]={code:""};if(this.config.nativeStaticResponse===!0&&S&&(X==="GET"||X==="ALL"))this.router.static.http.static[G]=S();if(X==="ALL")k.map[G].all=`default: return st[${T}](${e})\n`;else k.map[G].code=`case '${X}': return st[${T}](${e})\n${k.map[G].code}`}}else if(this.router.http.add(X,Y,x0),!this.config.strictPath){let T=Y.endsWith("/")?Y.slice(0,Y.length-1):Y+"/";if(this.config.nativeStaticResponse===!0&&R&&(X==="GET"||X==="ALL"))this.router.static.http.static[T]=R();this.router.http.add(X,T,x0)}}setHeaders;headers(X){if(!X)return this;if(!this.setHeaders)this.setHeaders={};return this.setHeaders=y1(this.setHeaders,X),this}onStart(X){return this.on("start",X),this}onRequest(X){return this.on("request",X),this}onParse(X,Y){if(!Y)return this.on("parse",X);return this.on(X,"parse",Y)}onTransform(X,Y){if(!Y)return this.on("transform",X);return this.on(X,"transform",Y)}resolve(X,Y){if(!Y)Y=X,X={as:"local"};let $={subType:"resolve",fn:Y};return this.onBeforeHandle(X,$)}mapResolve(X,Y){if(!Y)Y=X,X={as:"local"};let $={subType:"mapResolve",fn:Y};return this.onBeforeHandle(X,$)}onBeforeHandle(X,Y){if(!Y)return this.on("beforeHandle",X);return this.on(X,"beforeHandle",Y)}onAfterHandle(X,Y){if(!Y)return this.on("afterHandle",X);return this.on(X,"afterHandle",Y)}mapResponse(X,Y){if(!Y)return this.on("mapResponse",X);return this.on(X,"mapResponse",Y)}onAfterResponse(X,Y){if(!Y)return this.on("afterResponse",X);return this.on(X,"afterResponse",Y)}trace(X,Y){if(!Y)Y=X,X={as:"local"};if(!Array.isArray(Y))Y=[Y];for(let $ of Y)this.on(X,"trace",ZD($));return this}error(X,Y){switch(typeof X){case"string":return Y.prototype[b7]=X,this.definitions.error[X]=Y,this;case"function":return this.definitions.error=X(this.definitions.error),this}for(let[$,Z]of Object.entries(X))Z.prototype[b7]=$,this.definitions.error[$]=Z;return this}onError(X,Y){if(!Y)return this.on("error",X);return this.on(X,"error",Y)}onStop(X){return this.on("stop",X),this}on(X,Y,$){let Z;switch(typeof X){case"string":Z=X,$=Y;break;case"object":if(Z=Y,!Array.isArray(Y)&&typeof Y==="object")$=Y;break}if(Array.isArray($))$=B8($);else if(typeof $==="function")$=[{fn:$}];else $=[$];let Q=$;for(let W of Q)W.scope=typeof X==="string"?"local":X?.as??"local";if(Z!=="trace")lZ({[Z]:Q.map((W)=>W.fn)},this.inference);for(let W of Q){let J=sN(W,"global",{skipIfHasType:!0});switch(Z){case"start":this.event.start.push(J);break;case"request":this.event.request.push(J);break;case"parse":this.event.parse.push(J);break;case"transform":this.event.transform.push(J);break;case"beforeHandle":this.event.beforeHandle.push(J);break;case"afterHandle":this.event.afterHandle.push(J);break;case"mapResponse":this.event.mapResponse.push(J);break;case"afterResponse":this.event.afterResponse.push(J);break;case"trace":this.event.trace.push(J);break;case"error":this.event.error.push(J);break;case"stop":this.event.stop.push(J);break}}return this}propagate(){return P1(this.event.parse),P1(this.event.transform),P1(this.event.beforeHandle),P1(this.event.afterHandle),P1(this.event.mapResponse),P1(this.event.afterResponse),P1(this.event.trace),P1(this.event.error),this}as(X){let Y={plugin:"scoped",global:"global"}[X];if(P1(this.event.parse,Y),P1(this.event.transform,Y),P1(this.event.beforeHandle,Y),P1(this.event.afterHandle,Y),P1(this.event.mapResponse,Y),P1(this.event.afterResponse,Y),P1(this.event.trace,Y),P1(this.event.error,Y),X==="plugin")this.validator.scoped=F4(this.validator.scoped,this.validator.local),this.validator.local=null;else if(X==="global")this.validator.global=F4(this.validator.global,F4(this.validator.scoped,this.validator.local)),this.validator.scoped=null,this.validator.local=null;return this}group(X,Y,$){let Z=new J1({...this.config,prefix:""});Z.singleton={...this.singleton},Z.definitions={...this.definitions},Z.getServer=()=>this.getServer(),Z.inference=f5(this.inference),Z.extender={...this.extender};let Q=typeof Y==="object",W=(Q?$:Y)(Z);if(this.singleton=y1(this.singleton,Z.singleton),this.definitions=y1(this.definitions,Z.definitions),W.event.request.length)this.event.request=[...this.event.request||[],...W.event.request||[]];if(W.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],...W.event.mapResponse||[]];return this.model(W.definitions.type),Object.values(Z.router.history).forEach(({method:J,path:z,handler:M,hooks:B})=>{if(z=(Q?"":this.config.prefix)+X+z,Q){let U=Y,A=B;this.add(J,z,M,M8(U,{...A||{},error:!A.error?W.event.error:Array.isArray(A.error)?[...A.error||{},...W.event.error||{}]:[A.error,...W.event.error||{}]}))}else this.add(J,z,M,M8(B,{error:W.event.error}),{skipPrefix:!0})}),this}guard(X,Y){if(!Y){if(typeof X==="object"){this.applyMacro(X);let Q=X.as??"local";if(this.validator[Q]={body:X.body??this.validator[Q]?.body,headers:X.headers??this.validator[Q]?.headers,params:X.params??this.validator[Q]?.params,query:X.query??this.validator[Q]?.query,response:X.response??this.validator[Q]?.response,cookie:X.cookie??this.validator[Q]?.cookie},X.parse)this.on({as:Q},"parse",X.parse);if(X.transform)this.on({as:Q},"transform",X.transform);if(X.beforeHandle)this.on({as:Q},"beforeHandle",X.beforeHandle);if(X.afterHandle)this.on({as:Q},"afterHandle",X.afterHandle);if(X.mapResponse)this.on({as:Q},"mapResponse",X.mapResponse);if(X.afterResponse)this.on({as:Q},"afterResponse",X.afterResponse);if(X.error)this.on({as:Q},"error",X.error);if(X.detail)if(this.config.detail)this.config.detail=y1(Object.assign({},this.config.detail),X.detail);else this.config.detail=X.detail;if(X?.tags)if(!this.config.detail)this.config.detail={tags:X.tags};else this.config.detail.tags=X.tags;return this}return this.guard({},X)}let $=new J1({...this.config,prefix:""});$.singleton={...this.singleton},$.definitions={...this.definitions},$.inference=f5(this.inference),$.extender={...this.extender};let Z=Y($);if(this.singleton=y1(this.singleton,$.singleton),this.definitions=y1(this.definitions,$.definitions),Z.getServer=()=>this.server,Z.event.request.length)this.event.request=[...this.event.request||[],...Z.event.request||[]];if(Z.event.mapResponse.length)this.event.mapResponse=[...this.event.mapResponse||[],...Z.event.mapResponse||[]];return this.model(Z.definitions.type),Object.values($.router.history).forEach(({method:Q,path:W,handler:J,hooks:z})=>{this.add(Q,W,J,M8(X,{...z||{},error:!z.error?Z.event.error:Array.isArray(z.error)?[...z.error||{},...Z.event.error||[]]:[z.error,...Z.event.error||[]]}))}),this}use(X,Y){if(Y?.scoped)return this.guard({},($)=>$.use(X));if(Array.isArray(X)){let $=this;for(let Z of X)$=this.use(Z);return $}if(X instanceof Promise)return this.promisedModules.add(X.then(($)=>{if(typeof $==="function")return $(this);if($ instanceof J1)return this._use($).compile();if(typeof $.default==="function")return $.default(this);if($.default instanceof J1)return this._use($.default);throw new Error('Invalid plugin type. Expected Elysia instance, function, or module with "default" as Elysia instance or function that returns Elysia instance.')}).then(($)=>$.compile())),this;return this._use(X)}_use(X){if(typeof X==="function"){let Q=X(this);if(Q instanceof Promise)return this.promisedModules.add(Q.then((W)=>{if(W instanceof J1){W.getServer=()=>this.getServer(),W.getGlobalRoutes=()=>this.getGlobalRoutes(),W.model(this.definitions.type),W.error(this.definitions.error);for(let{method:J,path:z,handler:M,hooks:B}of Object.values(W.router.history))this.add(J,z,M,M8(B,{error:W.event.error}));return W.compile(),W}if(typeof W==="function")return W(this);if(typeof W.default==="function")return W.default(this);return this._use(W)}).then((W)=>W.compile())),this;return Q}let{name:Y,seed:$}=X.config;X.getServer=()=>this.getServer(),X.getGlobalRoutes=()=>this.getGlobalRoutes(),X.model(this.definitions.type),X.error(this.definitions.error);let Z=X.config.scoped;if(Z){if(Y){if(!(Y in this.dependencies))this.dependencies[Y]=[];let W=$!==void 0?C4(Y+JSON.stringify($)):0;if(this.dependencies[Y].some(({checksum:J})=>W===J))return this;this.dependencies[Y].push(!this.config?.analytic?{name:X.config.name,seed:X.config.seed,checksum:W,dependencies:X.dependencies}:{name:X.config.name,seed:X.config.seed,checksum:W,dependencies:X.dependencies,stack:X.telemetry.stack,routes:X.router.history,decorators:X.singleton.decorator,store:X.singleton.store,type:X.definitions.type,error:X.definitions.error,derive:X.event.transform.filter((J)=>J.subType==="derive").map((J)=>({fn:J.fn.toString(),stack:new Error().stack??""})),resolve:X.event.transform.filter((J)=>J.subType==="derive").map((J)=>({fn:J.fn.toString(),stack:new Error().stack??""}))})}X.extender.macros=this.extender.macros.concat(X.extender.macros);let Q=[];for(let W=0;W<X.extender.macros.length;W++){let J=this.extender.macros[W];if(Q.includes(J.checksum))X.extender.macros.splice(W,1),W--;Q.push(J.checksum)}if(X.onRequest((W)=>{Object.assign(W,this.singleton.decorator),Object.assign(W.store,this.singleton.store)}),X.event.trace.length)X.event.trace.push(...X.event.trace);if(!X.config.prefix)console.warn("It's recommended to use scoped instance with a prefix to prevent collision routing with other instance.");if(X.event.error.length)X.event.error.push(...this.event.error);if(X.config.aot)X.compile();if(Z===!0&&X.config.prefix){this.mount(X.config.prefix+"/",X.fetch);for(let W of X.router.history)this.routeTree.set(W.method+`${X.config.prefix}${W.path}`,this.router.history.length),this.router.history.push({...W,path:`${X.config.prefix}${W.path}`,hooks:M8(W.hooks,{error:this.event.error})})}else{this.mount(X.fetch);for(let W of X.router.history)this.routeTree.set(W.method+`${X.config.prefix}${W.path}`,this.router.history.length),this.router.history.push({...W,path:`${X.config.prefix}${W.path}`,hooks:M8(W.hooks,{error:this.event.error})})}return this}else{if(this.headers(X.setHeaders),Y){if(!(Y in this.dependencies))this.dependencies[Y]=[];let W=$!==void 0?C4(Y+JSON.stringify($)):0;if(!this.dependencies[Y].some(({checksum:J})=>W===J))this.extender.macros=this.extender.macros.concat(X.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(X.extender.higherOrderFunctions)}else this.extender.macros=this.extender.macros.concat(X.extender.macros),this.extender.higherOrderFunctions=this.extender.higherOrderFunctions.concat(X.extender.higherOrderFunctions);gZ(this.extender.macros),gZ(this.extender.higherOrderFunctions);let Q=[];for(let W=0;W<this.extender.higherOrderFunctions.length;W++){let J=this.extender.higherOrderFunctions[W];if(J.checksum){if(Q.includes(J.checksum))this.extender.higherOrderFunctions.splice(W,1),W--;Q.push(J.checksum)}}this.inference={body:this.inference.body||X.inference.body,cookie:this.inference.cookie||X.inference.cookie,headers:this.inference.headers||X.inference.headers,query:this.inference.query||X.inference.query,set:this.inference.set||X.inference.set,server:this.inference.server||X.inference.server}}this.decorate(X.singleton.decorator),this.state(X.singleton.store),this.model(X.definitions.type),this.error(X.definitions.error),X.extender.macros=this.extender.macros.concat(X.extender.macros);for(let{method:Q,path:W,handler:J,hooks:z}of Object.values(X.router.history))this.add(Q,W,J,M8(z,{error:X.event.error}));if(!Z)if(Y){if(!(Y in this.dependencies))this.dependencies[Y]=[];let Q=$!==void 0?C4(Y+JSON.stringify($)):0;if(this.dependencies[Y].some(({checksum:W})=>Q===W))return this;this.dependencies[Y].push(!this.config?.analytic?{name:X.config.name,seed:X.config.seed,checksum:Q,dependencies:X.dependencies}:{name:X.config.name,seed:X.config.seed,checksum:Q,dependencies:X.dependencies,stack:X.telemetry.stack,routes:X.router.history,decorators:X.singleton,store:X.singleton.store,type:X.definitions.type,error:X.definitions.error,derive:X.event.transform.filter((W)=>W?.subType==="derive").map((W)=>({fn:W.toString(),stack:new Error().stack??""})),resolve:X.event.transform.filter((W)=>W?.subType==="resolve").map((W)=>({fn:W.toString(),stack:new Error().stack??""}))}),this.event=VZ(this.event,EZ(X.event),Q)}else this.event=VZ(this.event,EZ(X.event));return this.validator.global=M8(this.validator.global,{...X.validator.global}),this.validator.local=M8(this.validator.local,{...X.validator.scoped}),this}macro(X){let Y={checksum:C4(JSON.stringify({name:this.config.name,seed:this.config.seed,content:X.toString()})),fn:X};return this.extender.macros.push(Y),this}mount(X,Y){if(X instanceof J1||typeof X==="function"||X.length===0||X==="/"){let Q=typeof X==="function"?X:X instanceof J1?X.compile().fetch:Y instanceof J1?Y.compile().fetch:Y,W=async({request:J,path:z})=>{if(J.method==="GET"||J.method==="HEAD"||!J.headers.get("content-type"))return Q(new Request(R7(J.url,z||"/"),J));return Q(new Request(R7(J.url,z||"/"),{...J,body:await J.arrayBuffer()}))};return this.all("/*",W,{type:"none"}),this}let $=X.length;if(Y instanceof J1)Y=Y.compile().fetch;let Z=async({request:Q,path:W})=>{if(Q.method==="GET"||Q.method==="HEAD"||!Q.headers.get("content-type"))return Y(new Request(R7(Q.url,W.slice($)||"/"),Q));return Y(new Request(R7(Q.url,W.slice($)||"/"),{...Q,body:await Q.arrayBuffer()}))};return this.all(X,Z,{type:"none"}),this.all(X+(X.endsWith("/")?"*":"/*"),Z,{type:"none"}),this}get(X,Y,$){return this.add("GET",X,Y,$),this}post(X,Y,$){return this.add("POST",X,Y,$),this}put(X,Y,$){return this.add("PUT",X,Y,$),this}patch(X,Y,$){return this.add("PATCH",X,Y,$),this}delete(X,Y,$){return this.add("DELETE",X,Y,$),this}options(X,Y,$){return this.add("OPTIONS",X,Y,$),this}all(X,Y,$){return this.add("ALL",X,Y,$),this}head(X,Y,$){return this.add("HEAD",X,Y,$),this}connect(X,Y,$){return this.add("CONNECT",X,Y,$),this}route(X,Y,$,Z){return this.add(X.toUpperCase(),Y,$,Z,Z?.config),this}ws(X,Y){let $=Y.transformMessage?Array.isArray(Y.transformMessage)?Y.transformMessage:[Y.transformMessage]:void 0,Z=null,Q=f1(Y?.body,{models:this.definitions.type,normalize:this.config.normalize}),W=f1(Y?.response,{models:this.definitions.type,normalize:this.config.normalize}),J=(z)=>{if(typeof z==="string"){let M=z?.charCodeAt(0);if(M===47||M===123)try{z=JSON.parse(z)}catch{}else if(h5(z))z=+z}if($?.length)for(let M=0;M<$.length;M++){let B=$[M](z);if(B!==void 0)z=B}return z};return this.route("$INTERNALWS",X,(z)=>{let{set:M,path:B,qi:U,headers:A,query:w,params:G}=z;if(Z===null)Z=this.getServer();if(Z?.upgrade(z.request,{headers:typeof Y.upgrade==="function"?Y.upgrade(z):Y.upgrade,data:{validator:W,open(H){Y.open?.(new R4(H,z))},message:(H,q)=>{let _=J(q);if(Q?.Check(_)===!1)return void H.send(new O0("message",Q,_).message);Y.message?.(new R4(H,z),_)},drain(H){Y.drain?.(new R4(H,z))},close(H,q,_){Y.close?.(new R4(H,z),q,_)}}}))return;return M.status=400,"Expected a websocket connection"},{beforeHandle:Y.beforeHandle,transform:Y.transform,headers:Y.headers,params:Y.params,query:Y.query}),this}state(X,Y,$){if(Y===void 0)$=X,X={as:"append"},Y="";else if($===void 0){if(typeof X==="string")$=Y,Y=X,X={as:"append"};else if(typeof X==="object")$=Y,Y=""}let{as:Z}=X;if(typeof Y!=="string")return this;switch(typeof $){case"object":if(Y){if(Y in this.singleton.store)this.singleton.store[Y]=y1(this.singleton.store[Y],$,{override:Z==="override"});else this.singleton.store[Y]=$;return this}if($===null)return this;return this.singleton.store=y1(this.singleton.store,$,{override:Z==="override"}),this;case"function":if(Y){if(Z==="override"||!(Y in this.singleton.store))this.singleton.store[Y]=$}else this.singleton.store=$(this.singleton.store);return this;default:if(Z==="override"||!(Y in this.singleton.store))this.singleton.store[Y]=$;return this}}decorate(X,Y,$){if(Y===void 0)$=X,X={as:"append"},Y="";else if($===void 0){if(typeof X==="string")$=Y,Y=X,X={as:"append"};else if(typeof X==="object")$=Y,Y=""}let{as:Z}=X;if(typeof Y!=="string")return this;switch(typeof $){case"object":if(Y){if(Y in this.singleton.decorator)this.singleton.decorator[Y]=y1(this.singleton.decorator[Y],$,{override:Z==="override"});else this.singleton.decorator[Y]=$;return this}if($===null)return this;return this.singleton.decorator=y1(this.singleton.decorator,$,{override:Z==="override"}),this;case"function":if(Y){if(Z==="override"||!(Y in this.singleton.decorator))this.singleton.decorator[Y]=$}else this.singleton.decorator=$(this.singleton.decorator);return this;default:if(Z==="override"||!(Y in this.singleton.decorator))this.singleton.decorator[Y]=$;return this}}derive(X,Y){if(!Y)Y=X,X={as:"local"};let $={subType:"derive",fn:Y};return this.onTransform(X,$)}model(X,Y){switch(typeof X){case"object":return Object.entries(X).forEach(([$,Z])=>{if(!($ in this.definitions.type))this.definitions.type[$]=Z}),this;case"function":return this.definitions.type=X(this.definitions.type),this}return this.definitions.type[X]=Y,this}mapDerive(X,Y){if(!Y)Y=X,X={as:"local"};let $={subType:"mapDerive",fn:Y};return this.onTransform(X,$)}affix(X,Y,$){if($==="")return this;let Z=["_","-"," "],Q=(M)=>M[0].toUpperCase()+M.slice(1),W=X==="prefix"?(M,B)=>Z.includes(M.at(-1)??"")?M+B:M+Q(B):Z.includes($.at(-1)??"")?(M,B)=>B+M:(M,B)=>B+Q(M),J=(M)=>{let B={};switch(M){case"decorator":for(let U in this.singleton.decorator)B[W($,U)]=this.singleton.decorator[U];this.singleton.decorator=B;break;case"state":for(let U in this.singleton.store)B[W($,U)]=this.singleton.store[U];this.singleton.store=B;break;case"model":for(let U in this.definitions.type)B[W($,U)]=this.definitions.type[U];this.definitions.type=B;break;case"error":for(let U in this.definitions.error)B[W($,U)]=this.definitions.error[U];this.definitions.error=B;break}},z=Array.isArray(Y)?Y:[Y];for(let M of z.some((B)=>B==="all")?["decorator","state","model","error"]:z)J(M);return this}prefix(X,Y){return this.affix("prefix",X,Y)}suffix(X,Y){return this.affix("suffix",X,Y)}compile(){if(this.fetch=this.config.aot?vZ(this):pZ(this),typeof this.server?.reload==="function")this.server.reload({...this.server||{},fetch:this.fetch});return this}handle=async(X)=>this.fetch(X);fetch=(X)=>{return(this.fetch=this.config.aot?vZ(this):pZ(this))(X)};handleError=async(X,Y)=>(this.handleError=this.config.aot?UQ(this):MD(this))(X,Y);outerErrorHandler=(X)=>new Response(X.message||X.name||"Error",{status:X?.status??500});listen=(X,Y)=>{if(typeof Bun==="undefined")throw new Error(".listen() is designed to run on Bun only. If you are running Elysia in other environment please use a dedicated plugin or export the handler via Elysia.fetch");if(this.compile(),typeof X==="string"){if(!h5(X))throw new Error("Port must be a numeric value");X=parseInt(X)}let $=this.fetch,Z=typeof X==="object"?{development:!V7,reusePort:!0,...this.config.serve||{},...X||{},static:this.router.static.http.static,websocket:{...this.config.websocket||{},...yZ||{}},fetch:$,error:this.outerErrorHandler}:{development:!V7,reusePort:!0,...this.config.serve||{},static:this.router.static.http.static,websocket:{...this.config.websocket||{},...yZ||{}},port:X,fetch:$,error:this.outerErrorHandler};this.server=Bun?.serve(Z);for(let Q=0;Q<this.event.start.length;Q++)this.event.start[Q].fn(this);if(Y)Y(this.server);return process.on("beforeExit",()=>{if(this.server){this.server.stop(),this.server=null;for(let Q=0;Q<this.event.stop.length;Q++)this.event.stop[Q].fn(this)}}),this.promisedModules.then(()=>{Bun?.gc(!1)}),this};stop=async(X)=>{if(!this.server)throw new Error("Elysia isn't running. Call `app.listen` to start the server.");if(this.server){if(this.server.stop(X),this.server=null,this.event.stop.length)for(let Y=0;Y<this.event.stop.length;Y++)this.event.stop[Y].fn(this)}};get modules(){return Promise.all(this.promisedModules.promises)}}class n5 extends Error{X;constructor(X,Y){super(Y);this.status=X}}var Xz=$Y(YY(),1),FC=new Xz.PrismaClient({log:["query"]}),Yz=FC;var $z=new J1({prefix:"/:id"}).get("/",async({params:X})=>{return{id:X.id}});var Zz=f.Object({languageCode:f.Enum({EN_US:"EN_US",ZH_CN:"ZH_CN"}),type:f.Enum({post:"post",moment:"moment"},{default:"post"}),cursor:f.Optional(f.String()),limit:f.Number({minimum:1,maximum:10,default:5})});var Qz=$Y(YY(),1),Wz=(X)=>{let Y=X.type==="moment"?"moment":"post";return Qz.Prisma.validator()({languages:{some:{languageCode:X.languageCode}},tags:{some:{tag:{category:"type",name:Y}}}})};var Jz=new J1({prefix:"/posts"}).use($z).get("/",async({query:X})=>{return(await Yz.post.findMany({where:Wz(X),select:{languages:{select:{title:!0}},postId:!0,createdAt:!0,updatedAt:!0}})).map(($)=>{let{languages:Z,...Q}=$;return{...Q,title:Z[0].title}})},{query:Zz}).put("/",()=>{return{msg:"PUT /post"}});var zz=console.log,CC=new J1({name:"logger"}).state("startTime",BigInt(0)).onRequest(({request:X,store:Y})=>{Y.startTime=process.hrtime.bigint()}).onBeforeHandle({as:"global"},({request:X,store:Y})=>{Y.startTime=process.hrtime.bigint()}).onAfterHandle({as:"global"},({request:X,store:Y})=>{let Z=process.hrtime.bigint()-Y.startTime,Q=new URL(X.url),W=Z/BigInt(1e6);zz(`${X.method} ${Q.pathname} - ${W}ms`)}).onError({as:"global"},({error:X,request:Y,store:$})=>{let Q=process.hrtime.bigint()-$.startTime;zz(`${Y.method} ${Y.url} - ${Q/BigInt(1e6)}ms - [ERROR] ${X.message}`)}),Mz=CC;var RC=()=>new J1().error({httpError:n5}).onError(({code:X,error:Y})=>{switch(console.error(`Error ${X} - ${Y.message}`),X){case"httpError":return{statusCode:Y.status,body:Y.message};case"VALIDATION":return{statusCode:400,message:Y.all.at(0)?.summary}}}),Bz=new J1({prefix:"/v1"}).use(RC).use(Mz).use(Jz).get("/health",()=>new Date().toString()).listen(8000);console.log(`\uD83E\uDD8A Elysia is running at ${Bz.server?.hostname}:${Bz.server?.port}`);export{Bz as app};
